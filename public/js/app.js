(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{0:function(t,e,s){s("bUC5"),t.exports=s("pyCd")},"04Vj":function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(s("JwTx")),o=function(){function t(t,e,s){if(void 0===s&&(s=!0),this.listeners={},this.openFunc=function(){},this.closeFunc=function(){},this.requests=[],this.response={},this.pingPongTimeout=30,void 0===e){var n=t.split(":");t=n[0]+":"+n[1],e=parseInt(n[2])}this.hashGenerator=new a.default,this.socket=this.connect(t,e,s)}return t.prototype.connect=function(t,e,s){var n=this;void 0===s&&(s=!0);var a=new WebSocket(t+":"+e);return a.addEventListener("open",(function(){if(n.openFunc.call(n),n.requests.length>0){for(var t=0;t<n.requests.length;t++)n.send(n.requests[t]);n.requests=[]}n.setPongPongTimeout()}),!1),s&&a.addEventListener("close",(function(){n.closeFunc.call(n),setTimeout((function(){return n.connect(t,e,s)}),1e3)}),!1),a.addEventListener("message",(function(t){var e=JSON.parse(t.data);if("request"===e.type&&void 0!==e.request_id&&void 0!==n.response[e.request_id])return n.response[e.request_id].call(n,e),delete n.response[e.request_id],!1;void 0!==n.listeners[e.action]&&n.listeners[e.action].call(n,e)})),a},t.prototype.setPongPongTimeout=function(){var t=this;clearTimeout(this.pingPong),this.pingPong=setTimeout((function(){t.send({type:"ping"})}),1e3*this.pingPongTimeout)},t.prototype.send=function(t){this.socket.send(JSON.stringify(t)),this.setPongPongTimeout()},t.prototype.listener=function(t,e){this.listeners[t]=e},t.prototype.request=function(t,e){var s=this;return new Promise((function(n,a){var o=s.hashGenerator.generate(16),r={action:t,type:"request",request_id:o,params:e};s.isOpen()?s.send(r):s.requests.push(r),s.response[o]=function(t){n(t)}}))},t.prototype.isOpen=function(){return this.socket.readyState===this.socket.OPEN},t.prototype.open=function(t){this.isOpen()?t.call(this):this.openFunc=t},t.prototype.close=function(t){clearInterval(this.pingPong),this.closeFunc=t},t}();e.default=o},"0CaT":function(t,e,s){(e=s("JPst")(!1)).push([t.i,"\n.fade-enter-active[data-v-37ee8818] {\n\ttransition: all .5s;\n}\n.fade-enter[data-v-37ee8818], .fade-leave-to[data-v-37ee8818] {\n\topacity: 0;\n}\n",""]),t.exports=e},"137A":function(t,e,s){var n=s("LboF"),a=s("2Vmi");"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);t.exports=a.locals||{}},"1aJf":function(t,e,s){(e=s("JPst")(!1)).push([t.i,"\ntextarea[data-v-2a0ea378] {\n\tmin-height: 38px;\n}\n.button[data-v-2a0ea378] {\n\tmargin-top: 35px;\n}\n.flip-list-move[data-v-2a0ea378] {\n\ttransition: transform 0.5s;\n}\n.no-move[data-v-2a0ea378] {\n\ttransition: transform 0s;\n}\n.ghost[data-v-2a0ea378] {\n\topacity: 0.5;\n\tbackground: #c8ebfb;\n}\n.handle[data-v-2a0ea378] {\n\tcursor: move;\n}\n.button-icon[data-v-2a0ea378] {\n\tcursor: pointer;\n}\n.control[data-v-2a0ea378] {\n\tposition: absolute;\n\ttop: 10px;\n\tright: 10px;\n}\n.task-complite[data-v-2a0ea378] {\n\tbackground-color: #cce5ff;\n}\n.story-point[data-v-2a0ea378] {\n\tpadding: 1px 6px;\n\tbackground-color: #007bff;\n\tcolor: #fff;\n\tborder-radius: 3px;\n}\n.task .control-owner[data-v-2a0ea378] {\n\topacity: 0;\n\ttransition: opacity .5s;\n}\n.task:hover .control-owner[data-v-2a0ea378] {\n\topacity: 1;\n}\n.fade-enter-active[data-v-2a0ea378] {\n\ttransition: all .5s;\n}\n.fade-enter[data-v-2a0ea378], .fade-leave-to[data-v-2a0ea378] {\n\topacity: 0;\n}\n",""]),t.exports=e},"2Vmi":function(t,e,s){(e=s("JPst")(!1)).push([t.i,"\n.panel-buttons[data-v-9f31bafa] {\n\talign-items: flex-start;\n}\n.pointer[data-v-9f31bafa] {\n\tcursor: pointer;\n}\n.user-control[data-v-9f31bafa] {\n\tfont-size: 100%;\n}\n.empty-card[data-v-9f31bafa] {\n\ttext-align: center;\n\twidth: 22px;\n\theight: 24px;\n\tcolor: #007bff;\n\tbackground-color: #007bff;\n\tborder-radius: .25rem;\n\tdisplay: inline-block;\n\tvertical-align: baseline;\n\twhite-space: nowrap;\n}\n",""]),t.exports=e},"3kVf":function(t,e,s){"use strict";var n=s("URMg");s.n(n).a},"9+4G":function(t,e,s){(e=s("JPst")(!1)).push([t.i,"\n.fade-enter-active[data-v-d1db1e4e] {\n\ttransition: all .5s;\n}\n.fade-enter[data-v-d1db1e4e], .fade-leave-to[data-v-d1db1e4e] {\n\topacity: 0;\n}\n.poker-card img[data-v-d1db1e4e] {\n\tcursor: pointer;\n\tborder-radius: 5px;\n}\n.approve[data-v-d1db1e4e] {\n\tbackground-color: #cdffb6;\n}\n\n/* entire container, keeps perspective */\n.flip-container[data-v-d1db1e4e] {\n\tperspective: 1000px;\n}\n\t/* flip the pane when hovered */\n.flip-container.hover .flipper[data-v-d1db1e4e] {\n\t\ttransform: rotateY(180deg);\n}\n.flip-container[data-v-d1db1e4e], .front[data-v-d1db1e4e], .back[data-v-d1db1e4e] {\n\t/* width: 96px;\n\theight: 144px; */\n\twidth: 100%;\n\t/* height: 100vh; */\n}\n\n/* flip speed goes here */\n.flipper[data-v-d1db1e4e] {\n\ttransition: ease-in-out 0.6s;\n\ttransform-style: preserve-3d;\n\n\tposition: relative;\n\n\twidth: 100%;\n\tpadding-top: 150%; /* 3:4 Aspect Ratio */\n}\n\n/* hide back of pane during swap */\n.front[data-v-d1db1e4e], .back[data-v-d1db1e4e] {\n\t-webkit-backface-visibility: hidden;\n\t        backface-visibility: hidden;\n\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tbottom: 0;\n\tright: 0;\n}\n\n/* front pane, placed above back */\n.front[data-v-d1db1e4e] {\n\tz-index: 2;\n\t/* for firefox 31 */\n\ttransform: rotateY(0deg);\n}\n\n/* back, initially hidden pane */\n.back[data-v-d1db1e4e] {\n\ttransform: rotateY(180deg);\n}\nimg.shake[data-v-d1db1e4e] {\n\t-webkit-animation: shake-data-v-d1db1e4e .5s;\n\t        animation: shake-data-v-d1db1e4e .5s;\n\t-webkit-animation-iteration-count: 1;\n\t        animation-iteration-count: 1;\n}\n@-webkit-keyframes shake-data-v-d1db1e4e {\n0% { transform:   rotate(0deg);\n}\n10% { transform:  rotate(2deg);\n}\n20% { transform:  rotate(4deg);\n}\n30% { transform:  rotate(2deg);\n}\n40% { transform:  rotate(0deg);\n}\n50% { transform:  rotate(-2deg);\n}\n60% { transform:  rotate(-4deg);\n}\n70% { transform:  rotate(-2deg);\n}\n80% { transform:  rotate(0deg);\n}\n90% { transform:  rotate(2deg);\n}\n100% { transform: rotate(0deg);\n}\n}\n@keyframes shake-data-v-d1db1e4e {\n0% { transform:   rotate(0deg);\n}\n10% { transform:  rotate(2deg);\n}\n20% { transform:  rotate(4deg);\n}\n30% { transform:  rotate(2deg);\n}\n40% { transform:  rotate(0deg);\n}\n50% { transform:  rotate(-2deg);\n}\n60% { transform:  rotate(-4deg);\n}\n70% { transform:  rotate(-2deg);\n}\n80% { transform:  rotate(0deg);\n}\n90% { transform:  rotate(2deg);\n}\n100% { transform: rotate(0deg);\n}\n}\n",""]),t.exports=e},"9Wh1":function(t,e,s){window._=s("LvDl"),window.axios=s("vDqi"),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"},Dczv:function(t,e,s){var n=s("LboF"),a=s("JpBZ");"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);t.exports=a.locals||{}},ItVB:function(t,e,s){"use strict";var n=s("NMSe");s.n(n).a},JpBZ:function(t,e,s){(e=s("JPst")(!1)).push([t.i,"\n.delete[data-v-5ee39924] {\n\tcursor: pointer;\n}\n",""]),t.exports=e},JwTx:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.generate=function(t){var e=new Uint32Array((t||40)/2);return window.crypto.getRandomValues(e),Array.from(e,this.dec2hex).join("").substr(0,t)},t.prototype.dec2hex=function(t){return t<10?"0"+String(t):t.toString(16)},t}();e.default=n},MDlo:function(t,e,s){var n=s("LboF"),a=s("1aJf");"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);t.exports=a.locals||{}},NMSe:function(t,e,s){var n=s("LboF"),a=s("0CaT");"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);t.exports=a.locals||{}},"R/51":function(t,e,s){(e=s("JPst")(!1)).push([t.i,"\n.fade-enter-active[data-v-49b8a719] {\n\ttransition: all .5s;\n}\n.fade-leave-active[data-v-49b8a719] {\n\ttransition: all .5s;\n}\n.fade-enter[data-v-49b8a719], .fade-leave-to[data-v-49b8a719] {\n\topacity: 0;\n}\n",""]),t.exports=e},RnhZ:function(t,e,s){var n={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-in":"7C5Q","./en-in.js":"7C5Q","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./en-sg":"t+mt","./en-sg.js":"t+mt","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fil":"1ppg","./fil.js":"1ppg","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./ga":"USCx","./ga.js":"USCx","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-deva":"qvJo","./gom-deva.js":"qvJo","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it-ch":"bxKX","./it-ch.js":"bxKX","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ku":"JCF/","./ku.js":"JCF/","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./oc-lnc":"Fnuy","./oc-lnc.js":"Fnuy","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tk":"Wv91","./tk.js":"Wv91","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-mo":"OmwH","./zh-mo.js":"OmwH","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function a(t){var e=o(t);return s(e)}function o(t){if(!s.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}a.keys=function(){return Object.keys(n)},a.resolve=o,t.exports=a,a.id="RnhZ"},TCAe:function(t,e,s){"use strict";var n=s("WFv9");s.n(n).a},URMg:function(t,e,s){var n=s("LboF"),a=s("9+4G");"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);t.exports=a.locals||{}},WFv9:function(t,e,s){var n=s("LboF"),a=s("WIom");"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);t.exports=a.locals||{}},WIom:function(t,e,s){(e=s("JPst")(!1)).push([t.i,"\n.chat-block[data-v-1867d3ff] {\n\tz-index: 10;\n\tposition: fixed;\n\tbottom: 10px;\n\tright: 10px;\n\tmax-height: calc(100vh - 20px);\n}\n.message-block[data-v-1867d3ff] {\n\toverflow: hidden;\n\tmax-height: calc(100vh - 58px);\n\toverflow-anchor: none;\n}\n#anchor[data-v-1867d3ff] {\n\toverflow-anchor: auto;\n\theight: 1px;\n}\n.toast[data-v-1867d3ff] {\n\tmin-width: 350px;\n}\n@media (max-width: 576px) {\n.toast[data-v-1867d3ff], .chat-block[data-v-1867d3ff], .message-block[data-v-1867d3ff] {\n\t\tmin-width: calc(100% - 20px);\n}\n.toast[data-v-1867d3ff] {\n\t\tmax-width: 100%;\n}\n}\ntextarea[data-v-1867d3ff] {\n\tmin-height: 38px;\n}\n.clear-all[data-v-1867d3ff] {\n\tbackground-color: rgba(255,255,255,.85);\n\tborder: 1px solid rgba(0,0,0,.1);\n\t-webkit-backdrop-filter: blur(10px);\n\t        backdrop-filter: blur(10px);\n}\n.clear-all[data-v-1867d3ff]:hover {\n\tbackground-color: rgba(108,117,125,.85);\n}\n.fade-enter-active[data-v-1867d3ff] {\n\ttransition: opacity .5s;\n}\n.fade-leave-active[data-v-1867d3ff] {\n\ttransition: opacity .5s;\n}\n.fade-enter[data-v-1867d3ff], .fade-leave-to[data-v-1867d3ff] {\n\topacity: 0;\n}\n.list-enter-active[data-v-1867d3ff], .list-leave-active[data-v-1867d3ff] {\n\ttransition: transform .5s, opacity .5s;\n}\n.list-enter[data-v-1867d3ff], .list-leave-to[data-v-1867d3ff] {\n\topacity: 0;\n\ttransform: translateX(30px);\n}\n",""]),t.exports=e},bUC5:function(t,e,s){"use strict";s.r(e);s("9Wh1");var n=s("XuX8"),a=s.n(n),o=s("04Vj"),r=s.n(o),i=s("jE9Z"),c={props:["text"]},l=s("KHd+"),u=Object(l.a)(c,(function(){var t=this.$createElement,e=this._self._c||t;return null!==this.text?e("div",{staticClass:"alert alert-danger px-3 py-1 mb-2",attrs:{role:"alert"}},[this._v("\n\t"+this._s(this.text)+"\n")]):this._e()}),[],!1,null,null,null).exports,d={props:["socket"],components:{TextError:u},data:function(){return{rooms:[],name:"",roomErrorText:null,changeNameErrorText:null,nameNewRoom:"",loading:!1}},created:function(){var t=this;localStorage.name&&(this.name=localStorage.name),localStorage.rooms&&(this.rooms=JSON.parse(localStorage.rooms));this.socket.request("room.get",{owner:this.$root.getUser()}).then((function(e){t.rooms=e.data,localStorage.rooms=JSON.stringify(t.rooms)}))},mounted:function(){this.$route.query.kicked&&alert("Kicked you out.")},methods:{saveName:function(){if(""===this.name)return this.changeNameErrorText="Empty name.",!1;localStorage.name=this.name,this.changeNameErrorText=null},createRoom:function(){var t=this;if(""===this.nameNewRoom)return this.roomErrorText="Empty name.",!1;this.socket.request("room.create",{name:this.nameNewRoom,owner:this.$root.getUser()}).then((function(e){t.rooms.push(e.data),localStorage.rooms=JSON.stringify(t.rooms),t.nameNewRoom=""}));this.roomErrorText=null},deleteRoom:function(t){var e=this;if(confirm("Delete room?"))this.socket.request("room.delete",{id:t,owner:this.$root.getUser()}).then((function(s){for(var n=0;n<e.rooms.length;n++)if(e.rooms[n].id==t){e.rooms.splice(n,1);break}localStorage.rooms=JSON.stringify(e.rooms)}))}}},m=(s("xjt1"),Object(l.a)(d,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-4 order-md-2 mb-4"},[s("h4",{staticClass:"d-flex justify-content-between align-items-center mb-3"},[t._v("Your name")]),t._v(" "),s("form",{on:{submit:function(e){return e.preventDefault(),t.saveName(e)}}},[s("text-error",{attrs:{text:t.changeNameErrorText}}),t._v(" "),s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter your name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),t._m(0)])],1)]),t._v(" "),s("div",{staticClass:"col-md-8 order-md-1"},[s("h4",{staticClass:"mb-3"},[t._v("Room list")]),t._v(" "),s("form",{on:{submit:function(e){return e.preventDefault(),t.createRoom(e)}}},[s("text-error",{attrs:{text:t.roomErrorText}}),t._v(" "),s("div",{staticClass:"input-group mb-4"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.nameNewRoom,expression:"nameNewRoom"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Room name"},domProps:{value:t.nameNewRoom},on:{input:function(e){e.target.composing||(t.nameNewRoom=e.target.value)}}}),t._v(" "),t._m(1)])],1),t._v(" "),t.rooms.length>0?s("ul",{staticClass:"list-group mb-3"},t._l(t.rooms,(function(e){return s("li",{staticClass:"list-group-item d-flex justify-content-between lh-condensed"},[s("router-link",{staticStyle:{cursor:"pointer"},attrs:{link:"",to:{name:"room",params:{hash:e.hash}}}},[s("h6",{staticClass:"my-0"},[t._v(t._s(e.name))])]),t._v(" "),s("span",{staticClass:"badge badge-secondary delete",on:{click:function(s){return t.deleteRoom(e.id)}}},[s("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])],1)})),0):t._e()])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"submit"}},[this._v("Save")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[this._v("New room")])])}],!1,null,"5ee39924",null).exports),h={data:function(){return{animateFrame:0,nowTime:0,diffTime:0,startTime:0,isRunning:!1}},mounted:function(){},methods:{setSubtractStartTime:function(t){t=void 0!==t?t:0;this.startTime=Math.floor(performance.now()-t)},startTimer:function(){var t=this;t.setSubtractStartTime(t.diffTime),function e(){t.nowTime=Math.floor(performance.now()),t.diffTime=t.nowTime-t.startTime,t.animateFrame=requestAnimationFrame(e)}(),t.isRunning=!0},stopTimer:function(){this.isRunning=!1,cancelAnimationFrame(this.animateFrame)},clearAll:function(){this.startTime=0,this.nowTime=0,this.diffTime=0,this.stopTimer(),this.animateFrame=0}},computed:{hours:function(){return Math.floor(this.diffTime/1e3/60/60)},minutes:function(){return Math.floor(this.diffTime/1e3/60)%60},seconds:function(){return Math.floor(this.diffTime/1e3)%60},milliSeconds:function(){return Math.floor(this.diffTime%1e3)}},filters:{zeroPad:function(t,e){e=void 0!==e?e:2;return t.toString().padStart(e,"0")}}},f=Object(l.a)(h,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",[t._v("\n\t"+t._s(t.hours?t.hours+" : ":"")+" \n\t"+t._s(t._f("zeroPad")(t.minutes))+" :\n\t"+t._s(t._f("zeroPad")(t.seconds))+"\n")])}),[],!1,null,null,null).exports,p=s("wd/R"),v=s.n(p),g={props:{created:{type:String,required:!0},refreshEvery:{type:Number,default:5}},data:function(){return{timeFromNow:null}},created:function(){this.getTimeFromNow(),setInterval(this.getTimeFromNow,1e3*this.refreshEvery)},destroyed:function(){clearInterval(this.getTimeFromNow)},methods:{getTimeFromNow:function(){this.timeFromNow=v()(this.created).fromNow()}},computed:{getFillTime:function(){return v()(this.created).format("LLL")}}},k=Object(l.a)(g,(function(){var t=this.$createElement;return(this._self._c||t)("span",{attrs:{title:this.getFillTime}},[this._v(this._s(this.timeFromNow))])}),[],!1,null,null,null).exports,b=s("nOak"),_=s.n(b),w=s("wZee"),y=s.n(w),x=(s("qHiR"),s("Yhcd"),s("jpss"),s("gAkk"),{props:["socket","room"],components:{Timer:k,VueMarkdown:_.a},data:function(){return{message:"",messages:[]}},created:function(){},mounted:function(){var t=this;if(localStorage["messages-"+this.room.hash]){this.messages=JSON.parse(localStorage["messages-"+this.room.hash]);for(var e=0;e<this.messages.length;e++)this.messages[e].notification&&setTimeout(this.remove.bind(this,this.messages[e].id),5e3);this.save()}this.socket.listener("room.chat.message",(function(e){t.messages.push({id:e.id,author_id:e.author_id,author_name:e.author_name,message:e.message,date:v()().format(),notification:e.notification}),e.notification&&setTimeout(t.remove.bind(t,e.id),1e4),t.save(),t.$nextTick((function(){y.a.highlightAll()}))})),this.$nextTick((function(){y.a.highlightAll()}))},methods:{send:function(){""!==this.message&&(this.socket.send({action:"room.chat.send",room:this.room.hash,name:this.$root.name,message:this.message}),this.message="")},remove:function(t){for(var e=0;e<this.messages.length;e++)if(this.messages[e].id===t){this.messages.splice(e,1),this.save();break}},save:function(){localStorage["messages-"+this.room.hash]=JSON.stringify(this.messages),this.$nextTick((function(){var t=document.getElementById("anchor");null!==t&&t.scrollIntoView()}))},clearAll:function(){this.messages=[],this.save()},getDate:function(t){return v.a.locale("en"),v()(t).fromNow()}},computed:{}}),j=(s("TCAe"),Object(l.a)(x,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._m(0),t._v(" "),s("div",{staticClass:"card p-2 mb-4"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.send(e)}}},[s("div",{staticClass:"input-group"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"form-control",attrs:{rows:"1",placeholder:"Enter your message"},domProps:{value:t.message},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.send(e))},input:function(e){e.target.composing||(t.message=e.target.value)}}}),t._v(" "),t._m(1)])])]),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.messages.length?s("div",{staticClass:"chat-block",attrs:{"aria-live":"polite","aria-atomic":"true"}},[s("div",{staticClass:"mb-2",staticStyle:{display:"flex","flex-direction":"column"}},[s("button",{staticClass:"btn clear-all btn-outline-secondary",attrs:{type:"submit"},on:{click:function(e){return t.clearAll()}}},[t._v("Clear")])]),t._v(" "),s("div",{staticClass:"message-block",attrs:{id:"message-block"}},[s("transition-group",{attrs:{name:"list"}},t._l(t.messages,(function(e){return s("div",{key:e.id,staticClass:"toast show",attrs:{role:"alert","aria-live":"assertive","aria-atomic":"true","data-autohide":"false"}},[s("div",{staticClass:"toast-header"},[s("strong",{staticClass:"mr-auto"},[t._v(t._s(e.author_name))]),t._v(" "),s("small",{staticClass:"text-muted"},[s("timer",{attrs:{created:e.date}})],1),t._v(" "),s("button",{staticClass:"ml-2 mb-1 close",attrs:{type:"button",title:"Hide this notification","data-dismiss":"toast","aria-label":"Close"},on:{click:function(s){return t.remove(e.id)}}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._v(" "),s("div",{staticClass:"toast-body"},[s("vue-markdown",{attrs:{html:!1,anchorAttributes:{target:"blank",rel:"nofollow"}}},[t._v(t._s(e.message))])],1)])})),0),t._v(" "),s("div",{attrs:{id:"anchor"}})],1)]):t._e()])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{staticClass:"d-flex justify-content-between align-items-center mb-2"},[e("span",{staticClass:"text-muted"},[this._v("Chat")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"submit"}},[this._v("Send")])])}],!1,null,"1867d3ff",null).exports),C=s("MQ60"),S=s.n(C),O={props:["socket","room"],components:{VueMarkdown:_.a,Draggable:S.a},data:function(){return{drag:!1,text:"",tasks:[],counter:1,edit:{enabled:!1,text:"",id:""}}},mounted:function(){var t=this;localStorage["tasks-"+this.room.hash]&&(this.tasks=JSON.parse(localStorage["tasks-"+this.room.hash]));this.socket.request("task.get",{room:this.room.hash}).then((function(e){t.tasks=e.data,t.tasksSort()}));this.socket.listener("room.task.add",(function(e){t.tasks.push(e.task),t.tasksSort(),t.$nextTick((function(){y.a.highlightAll()}))})),this.socket.listener("room.task.remove",(function(e){for(var s=0;s<t.tasks.length;s++)if(t.tasks[s].id===e.id){t.tasks.splice(s,1),t.save();break}})),this.socket.listener("room.task.update",(function(e){for(var s=0;s<t.tasks.length;s++)if(t.tasks[s].id===e.task.id){t.$set(t.tasks,s,e.task),t.save();break}})),this.socket.listener("room.task.update.all",(function(e){t.tasks=e.tasks,t.tasksSort()})),this.socket.listener("room.task.approve",(function(e){for(var s=0;s<t.tasks.length;s++)if(t.tasks[s].id===e.id){t.$set(t.tasks[s],"story_point",e.point),t.$set(t.tasks[s],"story_point_view",e.view),t.save();break}}))},methods:{endDrag:function(){this.drag=!1;for(var t=0;t<this.tasks.length;t++){var e=this.tasks[t];e.order=t+1,this.$set(this.tasks,t,e)}this.saveInServer(),this.save()},add:function(){if(""===this.text)return alert("Error! Empty text task."),!1;this.socket.request("task.create",{text:this.text,user:this.$root.getUser(),room:this.room.hash,order:this.counter}).then((function(t){}));this.counter++,this.text=""},remove:function(t){var e=this;if(confirm("Remove task?"))this.socket.request("task.delete",{id:t,user:this.$root.getUser()}).then((function(s){for(var n=0;n<e.tasks.length;n++)if(e.tasks[n].id===t){e.tasks.splice(n,1),e.save();break}}))},editInit:function(t){for(var e=0;e<this.tasks.length;e++)if(this.tasks[e].id===t){this.edit.enabled=!0,this.edit.id=this.tasks[e].id,this.edit.text=this.tasks[e].text;break}},editSave:function(){var t=this;this.socket.request("task.update",{id:this.edit.id,text:this.edit.text,user:this.$root.getUser()}).then((function(e){t.edit.enabled=!1,t.edit.text="",t.edit.id=""}))},save:function(){localStorage["tasks-"+this.room.hash]=JSON.stringify(this.tasks)},saveInServer:function(){this.socket.send({action:"room.task.update.all",room:this.room.hash,tasks:this.tasks,owner:this.$root.getUser()})},tasksSort:function(){this.tasks.sort((function(t,e){return t.order-e.order})),this.save()}},computed:{dragOptions:function(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost"}},anchorAttributes:function(){return{target:"blank",rel:"nofollow"}},completedTasks:function(){for(var t=0,e=0;e<this.tasks.length;e++)null!==this.tasks[e].story_point&&void 0!==this.tasks[e].story_point&&t++;return t},haveUnratedTasks:function(){for(var t=0;t<this.tasks.length;t++)if(null===this.tasks[t].story_point||void 0===this.tasks[t].story_point)return!0;return!1},amount:function(){for(var t=0,e=0;e<this.tasks.length;e++)null!==this.tasks[e].story_point&&void 0!==this.tasks[e].story_point&&(t+=parseFloat(this.tasks[e].story_point));return t}},watch:{tasks:function(){this.counter=this.tasks.length+1}}},T=(s("nhyC"),Object(l.a)(O,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"fade"}},[t.tasks.length||t.room.isOwner?s("div",[s("h4",{staticClass:"d-flex justify-content-between align-items-center mb-3"},[s("span",[t._v("Tasks")]),t._v(" "),s("div",[s("span",{staticClass:"badge badge-secondary",attrs:{title:"Completed tasks/Number of tasks"}},[t._v(t._s(t.completedTasks)+"/"+t._s(t.tasks.length))]),t._v(" "),s("span",{staticClass:"badge badge-primary",attrs:{title:"Amount story points"}},[t._v(t._s(t.amount))])])]),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.room.isOwner&&!t.edit.enabled?s("form",{staticClass:"mb-3",on:{submit:function(e){return e.preventDefault(),t.add(e)}}},[s("div",{staticClass:"input-group"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"form-control",attrs:{rows:"2",placeholder:"Enter text"},domProps:{value:t.text},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.add(e))},input:function(e){e.target.composing||(t.text=e.target.value)}}}),t._v(" "),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"submit"}},[t._v("Add task")])])])]):t._e()]),t._v(" "),t.room.isOwner&&t.edit.enabled?s("form",{staticClass:"mb-3",on:{submit:function(e){return e.preventDefault(),t.editSave(e)}}},[s("div",{staticClass:"input-group"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.edit.text,expression:"edit.text"}],staticClass:"form-control text-success",attrs:{rows:"2",placeholder:"Enter text"},domProps:{value:t.edit.text},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.editSave(e))},input:function(e){e.target.composing||t.$set(t.edit,"text",e.target.value)}}}),t._v(" "),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v("Save")])])])]):t._e(),t._v(" "),s("draggable",t._b({attrs:{handle:".handle"},on:{start:function(e){t.drag=!0},end:t.endDrag},model:{value:t.tasks,callback:function(e){t.tasks=e},expression:"tasks"}},"draggable",t.dragOptions,!1),[s("transition-group",{staticClass:"list-group mb-3",attrs:{tag:"ul",type:"transition",name:t.drag?null:"flip-list"}},t._l(t.tasks,(function(e){return s("li",{key:e.id,staticClass:"list-group-item d-flex justify-content-between lh-condensed task",class:{"task-complite":e.story_point_view}},[s("div",[s("span",{staticClass:"text-muted"},[t._v("#"+t._s(e.order))]),t._v(" "),s("vue-markdown",{attrs:{html:!1,anchorAttributes:t.anchorAttributes,source:e.text}})],1),t._v(" "),s("span",{staticClass:"control text-muted"},[t.room.isOwner?s("span",{staticClass:"control-owner"},[s("i",{staticClass:"fa fa-fw fa-align-justify handle",attrs:{title:"Sort"}}),t._v(" "),s("i",{staticClass:"fa fa-fw fa-pencil button-icon",attrs:{title:"Edit"},on:{click:function(s){return t.editInit(e.id)}}}),t._v(" "),s("i",{staticClass:"fa fa-fw fa-trash-o button-icon",attrs:{title:"Delete"},on:{click:function(s){return t.remove(e.id)}}})]):t._e(),t._v(" "),e.story_point_view?s("span",{staticClass:"story-point",attrs:{title:"Story points"}},[t._v(t._s(e.story_point_view))]):t._e()])])})),0)],1)],1):t._e()])}),[],!1,null,"2a0ea378",null).exports),N={props:["socket","canVote","room"],components:{VueMarkdown:_.a},data:function(){return{approve:!1,cover:"/images/cards/cover.png",cards:[{src:"/images/cards/0.25.png",point:.25,view:"1/4"},{src:"/images/cards/0.5.png",point:.5,view:"1/2"},{src:"/images/cards/1.png",point:1,view:"1"},{src:"/images/cards/2.png",point:2,view:"2"},{src:"/images/cards/3.png",point:3,view:"3"},{src:"/images/cards/5.png",point:5,view:"5"},{src:"/images/cards/8.png",point:8,view:"8"},{src:"/images/cards/13.png",point:13,view:"13"},{src:"/images/cards/dragon.png",point:0,view:"?"},{src:"/images/cards/infinity.png",point:0,view:"ထ"},{src:"/images/cards/0.png",point:0,view:"0"}]}},mounted:function(){var t=this;this.socket.listener("room.card.shake",(function(e){for(var s=0;s<t.cards.length;s++)if(t.cards[s].view===e.view){t.$set(t.cards[s],"shake",!0),setTimeout((function(){t.$set(t.cards[s],"shake",!1)}),500);break}}))},methods:{vote:function(t,e){this.canVote&&(this.selectPoint=t,this.socket.send({action:"room.vote",room:this.room.hash,point:t,view:e})),this.approve&&(this.socket.send({action:"room.task.approve",id:this.room.task.id,point:t,view:e}),this.stopApprove())},startApprove:function(){null!==this.room.task&&(this.approve=!0)},stopApprove:function(){this.approve=!1},cardShake:function(t){this.socket.send({action:"room.card.shake",view:t,room:this.room.hash})}},computed:{anchorAttributes:function(){return{target:"blank",rel:"nofollow"}}},watch:{"room.task":function(){this.$nextTick((function(){y.a.highlightAll()}))}}},E=(s("3kVf"),Object(l.a)(N,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row mb-3 pt-3",class:{approve:t.approve}},[s("transition",{attrs:{name:"fade"}},[t.room.task?s("div",{staticClass:"mb-3 col-12"},[s("vue-markdown",{staticClass:"alert alert-primary mb-0 p-2",attrs:{html:!1,anchorAttributes:t.anchorAttributes,source:t.room.task.text}})],1):t._e()]),t._v(" "),s("div",{staticClass:"col-12"},[t.approve?s("div",{staticClass:"font-weight-bolder",attrs:{role:"alert"}},[t._v("\n\t\t\tYou must confirm the grade for the current task in order to proceed.\n\t\t")]):t._e()]),t._v(" "),t._l(t.cards,(function(e){return s("div",{key:e.view,staticClass:"poker-card mb-3 d-flex col-3 col-md-2 pt-3 justify-content-between"},[s("div",{staticClass:"flip-container",class:{hover:t.canVote||t.approve}},[s("div",{staticClass:"flipper"},[s("div",{staticClass:"front"},[s("img",{class:{shake:e.shake},attrs:{src:t.cover,width:"100%"},on:{click:function(s){return t.cardShake(e.view)}}})]),t._v(" "),s("div",{staticClass:"back"},[s("img",{attrs:{src:e.src,width:"100%"},on:{click:function(s){return t.vote(e.point,e.view)}}})])])])])}))],2)}),[],!1,null,"d1db1e4e",null).exports),V={extends:s("H8ri").a,props:["chartdata","options"],mounted:function(){this.update()},methods:{update:function(){this.renderChart(this.chartdata,this.options)}}},$=Object(l.a)(V,void 0,void 0,!1,null,null,null).exports,R={props:["socket","user","room"],components:{TextError:u},data:function(){return{name:"",changeNameSwitcher:!1,changeNameErrorText:null}},mounted:function(){localStorage.name&&(this.name=localStorage.name)},methods:{changeName:function(){this.changeNameSwitcher=!0},saveName:function(){if(""===this.name)return this.changeNameErrorText="Empty name.",!1;localStorage.name=this.name,this.changeNameSwitcher=!1,this.socket.send({action:"room.user.changeName",name:this.name,room:this.room.hash}),this.changeNameErrorText=null},changeNameSwitcherForSelf:function(t){return this.user.isSelf&&this.changeNameSwitcher},kickOut:function(t){confirm("Kick out this user?")&&this.socket.send({action:"room.user.kick",id:t,room:this.room.hash})}}},A=(s("r6+a"),{props:["socket","users","room","average"],components:{User:Object(l.a)(R,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"list-group-item",class:{"d-flex justify-content-between lh-condensed px-3 py-2":!t.changeNameSwitcher}},[t.changeNameSwitcherForSelf()?t._e():s("div",{class:{"text-success":t.user.isVoted}},[s("h6",{staticClass:"my-0"},[t._v("\n\t\t\t"+t._s(""===t.user.name?"User #"+t.user.id:t.user.name)+"\n\t\t")]),t._v(" "),s("small",{staticClass:"text-muted"},[t._v(t._s(t.user.isOwner?"Owner":"Guest"))])]),t._v(" "),t.changeNameSwitcher?t._e():s("span",{staticClass:"text-muted d-flex panel-buttons"},[t.user.isSelf?s("span",{staticClass:"badge pr-0 user-control pointer",attrs:{title:"Change name"},on:{click:function(e){return e.preventDefault(),t.changeName(e)}}},[s("i",{staticClass:"fa fa-fw fa-pencil",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),t.room.isOwner&&!t.user.isOwner?s("span",{staticClass:"badge pr-0 user-control pointer",attrs:{title:"Kick this user"},on:{click:function(e){return t.kickOut(t.user.id)}}},[s("i",{staticClass:"fa fa-fw fa-sign-out",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),void 0===t.user.vote&&t.user.isVoted?s("span",{staticClass:"empty-card ml-1"}):t._e(),t._v(" "),s("span",{staticClass:"badge user-control badge-primary ml-1"},[t._v(t._s(t.user.voteView))])]),t._v(" "),t.user.isSelf&&t.changeNameSwitcher?s("form",{on:{submit:function(e){return e.preventDefault(),t.saveName(e)}}},[s("text-error",{attrs:{text:t.changeNameErrorText}}),t._v(" "),s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter your name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),t._m(0)])],1):t._e()])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"submit"}},[this._v("Save")])])}],!1,null,"9f31bafa",null).exports,Chart:$},data:function(){return{chart:!1,colors:["#6574cd","#e3342f","#38c172","#f6993f","#9561e2","#ffed4a","#6cb2eb"],chartOptions:{legend:{position:"bottom"}}}},mounted:function(){},methods:{chartData:function(){for(var t=[],e=[],s=0;s<this.users.length;s++){var n=t.indexOf(this.users[s].voteView);-1===n?(t[n=t.length]=this.users[s].voteView,e[n]=1):e[n]++}return{labels:t,datasets:[{label:"",backgroundColor:this.colors,data:e}]}}},computed:{},watch:{average:function(t){var e=this;null!==t?(this.chart=!0,this.$nextTick((function(){e.$refs.chart.update()}))):this.chart=!1}}}),D=(s("ItVB"),{props:["socket","hash"],components:{Stopwatch:f,Chat:j,TaskList:T,Cards:E,UsersList:Object(l.a)(A,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"fade"}},[t.users.length?s("div",[s("h4",{staticClass:"d-flex justify-content-between align-items-center mb-2"},[s("span",{staticClass:"text-muted"},[t._v("Users")]),t._v(" "),s("span",{staticClass:"badge badge-secondary"},[t._v(t._s(t.users.length))])]),t._v(" "),s("ul",{staticClass:"list-group mb-3"},[t._l(t.users,(function(e){return s("user",{key:e.id,attrs:{socket:t.socket,user:e,room:t.room}})})),t._v(" "),null!==t.average?s("li",{staticClass:"list-group-item d-flex justify-content-between px-3 py-2"},[s("span",[t._v("Average")]),t._v(" "),s("strong",[t._v(t._s(t.average))])]):t._e(),t._v(" "),t.chart?s("li",{staticClass:"list-group-item d-flex justify-content-between px-3 py-2"},[s("div",{staticStyle:{width:"100%"}},[s("chart",{ref:"chart",attrs:{chartdata:t.chartData(),options:t.chartOptions}})],1)]):t._e()],2)]):t._e()])}),[],!1,null,"37ee8818",null).exports},data:function(){return{name:"",room:{id:null,name:"",hash:null,task:null,ownerId:null,clientId:null,isOwner:!1},users:[],stage:0,average:null,canVote:!1}},created:function(){var t=this;this.room.hash=this.hash,localStorage.name&&(this.name=localStorage.name),this.socket.open((function(){t.enterRoom()}))},beforeRouteUpdate:function(t,e,s){this.enterRoom(),s()},beforeRouteLeave:function(t,e,s){this.leaveRoom(),s()},mounted:function(){var t=this;this.socket.listener("room.entered.user",(function(e){t.users.push({id:e.id,name:e.name,isOwner:e.isOwner}),e.isOwner&&(t.room.ownerId=e.id)})),this.socket.listener("room.left.user",(function(e){for(var s=0;s<t.users.length&&t.users[s].id!==e.id;s++);t.users.splice(s,1)})),this.socket.listener("room.parameters",(function(e){t.room.id=e.id,t.room.name=e.name,t.room.ownerId=e.owner,t.room.clientId=e.client_id,t.room.task=e.task,t.stage=e.stage,t.room.clientId===t.room.ownerId&&(t.room.isOwner=!0),t.setUsers(e.users)})),this.socket.listener("room.user.changeName",(function(e){for(var s=0;s<t.users.length;s++)if(t.users[s].id===e.id){t.users[s].name=e.name;break}e.id===t.room.clientId&&(t.name=e.name)})),this.socket.listener("room.vote.start",(function(e){t.stage=e.stage,t.room.task=e.task})),this.socket.listener("room.vote",(function(e){for(var s=0;s<t.users.length;s++)if(t.users[s].id===e.id){t.$set(t.users[s],"isVoted",!0);break}})),this.socket.listener("room.vote.you",(function(e){for(var s=0;s<t.users.length;s++)if(t.users[s].id===e.id){t.$set(t.users[s],"vote",e.vote),t.$set(t.users[s],"voteView",e.voteView),t.$set(t.users[s],"isVoted",!0);break}})),this.socket.listener("room.kicked.you",(function(e){t.$router.push({name:"home",query:{kicked:!0}})})),this.socket.listener("room.vote.final",(function(e){t.canVote=!1,t.$refs.stopwatch.stopTimer(),t.stage=2,t.setUsers(e.users),t.average=t.getAverage(),t.room.isOwner&&t.$refs.cards.startApprove()})),this.socket.listener("room.vote.reset",(function(e){t.stage=0,t.average=null;for(var s=0;s<t.users.length;s++)t.$set(t.users[s],"vote",void 0),t.$set(t.users[s],"voteView",void 0),t.$set(t.users[s],"isVoted",!1);t.room.task=null,t.$refs.stopwatch.clearAll()}))},methods:{enterRoom:function(){this.socket.send({action:"room.enter",room:this.hash,name:this.name,user:this.$root.getUser()})},leaveRoom:function(){this.socket.send({action:"room.leave",room:this.hash})},startVote:function(){this.socket.send({action:"room.vote.start",room:this.hash})},resetVote:function(){this.socket.send({action:"room.vote.reset",room:this.hash}),this.$refs.cards.stopApprove()},nextVote:function(){this.resetVote(),this.startVote()},getAverage:function(){for(var t=0,e=0,s=0;s<this.users.length;s++)0!=this.users[s].vote&&(t+=this.users[s].vote,e++);return 0===e?0:Math.round(t/e*100)/100},setUsers:function(t){this.users=t;for(var e=0;e<this.users.length;e++)this.users[e].id===this.room.clientId&&(this.users[e].isSelf=!0)}},computed:{canNextButton:function(){return 2===this.stage&&this.$refs.tasksList.haveUnratedTasks&&!this.$refs.cards.approve},canReVoteButton:function(){return 2===this.stage&&this.$refs.tasksList.haveUnratedTasks&&this.$refs.cards.approve}},watch:{stage:function(){switch(this.stage){case 0:this.canVote=!1,this.$refs.stopwatch.stopTimer();break;case 1:this.canVote=!0,this.$refs.stopwatch.startTimer();break;case 2:this.canVote=!1}}}}),z=(s("e873"),Object(l.a)(D,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-4 order-md-2 mb-4",staticStyle:{position:"inherit"}},[s("users-list",{attrs:{socket:t.socket,users:t.users,room:t.room,average:t.average}}),t._v(" "),s("chat",{attrs:{socket:t.socket,room:t.room}})],1),t._v(" "),s("div",{staticClass:"col-md-8 order-md-1"},[s("h4",{staticClass:"d-flex justify-content-between align-items-center"},[s("span",[t._v(t._s(t.room.name))]),t._v(" "),s("span",{staticClass:"badge badge-secondary"},[s("stopwatch",{ref:"stopwatch"})],1)]),t._v(" "),s("cards",{ref:"cards",attrs:{socket:t.socket,canVote:t.canVote,room:t.room}}),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.room.isOwner?s("div",{staticClass:"row mb-3 ml-0"},[0===t.stage?s("button",{staticClass:"btn mr-3 col-md-3 btn-primary",on:{click:t.startVote}},[t._v("Start vote")]):t._e(),t._v(" "),1===t.stage||2===t.stage?s("button",{staticClass:"btn mr-3 col-md-3 btn-primary",on:{click:t.resetVote}},[t._v("Reset")]):t._e(),t._v(" "),t.canNextButton?s("button",{staticClass:"btn mr-3 col-md-3 btn-primary",on:{click:t.nextVote}},[t._v("Next")]):t._e(),t._v(" "),t.canReVoteButton?s("button",{staticClass:"btn mr-3 col-md-3 btn-primary",on:{click:t.nextVote}},[t._v("Revote")]):t._e()]):t._e()]),t._v(" "),s("task-list",{ref:"tasksList",attrs:{socket:t.socket,room:t.room}})],1)])}),[],!1,null,"49b8a719",null).exports),F={props:["socket"],components:{VueMarkdown:_.a,Timer:k},data:function(){return{news:[]}},mounted:function(){var t=this;this.socket.request("new.get",{}).then((function(e){t.news=e.data}))},methods:{},computed:{anchorAttributes:function(){return{target:"blank",rel:"nofollow"}}}},M=Object(l.a)(F,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h4",{staticClass:"d-flex justify-content-between align-items-center my-4"},[s("span",{staticClass:"text-muted"},[t._v("News")]),t._v(" "),s("span",{staticClass:"badge badge-secondary"},[t._v(t._s(t.news.length))])]),t._v(" "),t._l(t.news,(function(e){return s("div",{key:e.id,staticClass:"card mb-4"},[s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title"},[t._v(t._s(e.title))]),t._v(" "),s("vue-markdown",{attrs:{html:!1,anchorAttributes:t.anchorAttributes,source:e.text}}),t._v(" "),s("p",{staticClass:"card-text"},[s("small",{staticClass:"text-muted"},[t._v("Created at "),s("timer",{attrs:{created:e.created_at}})],1)])],1)])}))],2)}),[],!1,null,null,null).exports,P={props:["socket"],components:{VueMarkdown:_.a},computed:{anchorAttributes:function(){return{target:"blank",rel:"nofollow"}}}},U=Object(l.a)(P,(function(){var t=this.$createElement;return(this._self._c||t)("vue-markdown",{attrs:{html:!1,anchorAttributes:this.anchorAttributes,source:"##### About"}})}),[],!1,null,null,null).exports;a.a.use(i.a);var J=new i.a({mode:"history",routes:[{path:"/",name:"home",component:m},{path:"/room/:hash",name:"room",component:z,props:!0},{path:"/news",name:"news",component:M},{path:"/about",name:"about",component:U}]}),q={props:{socket:{required:!0}},data:function(){return{}}},I=Object(l.a)(q,(function(){var t=this.$createElement;return(this._self._c||t)("router-view",{attrs:{socket:this.socket}})}),[],!1,null,null,null).exports,L={props:[],data:function(){return{list:[{title:"Home",route:"home",params:{}},{title:"News",route:"news",params:{}},{title:"About",route:"about",params:{}}]}},created:function(){},methods:{isCurrent:function(t){return this.$route.name===t}}},K=Object(l.a)(L,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarNav"}},[s("ul",{staticClass:"navbar-nav"},t._l(t.list,(function(e){return s("li",{key:e.route,staticClass:"nav-item",class:{active:t.isCurrent(e.route)}},[s("router-link",{staticClass:"nav-link",attrs:{to:{name:e.route,params:e.params}}},[t._v("\n\t\t\t\t"+t._s(e.title)),t.isCurrent(e.route)?s("span",{staticClass:"sr-only"},[t._v("(current)")]):t._e()])],1)})),0)])}),[],!1,null,null,null).exports,B={props:{socket:{required:!0}},data:function(){return{quantity:0}},created:function(){var t=this;this.socket.listener("users.online.update",(function(e){t.quantity=e.quantity}))}},Y=Object(l.a)(B,(function(){var t=this.$createElement;return(this._self._c||t)("span",[this._v("Online "+this._s(this.quantity)+" users")])}),[],!1,null,null,null).exports,Q=new a.a({el:"#app",router:J,components:{App:I,MenuList:K,Statistics:Y},data:{name:"",socket:null},created:function(){this.socket=new r.a(document.body.dataset.socket)},mounted:function(){localStorage.name&&(this.name=localStorage.name)},methods:{changedName:function(t){localStorage.name=this.name=t},getUser:function(){return this.getCookie("user")},getCookie:function(t){var e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}}});e.default=Q},e873:function(t,e,s){"use strict";var n=s("gQBC");s.n(n).a},gQBC:function(t,e,s){var n=s("LboF"),a=s("R/51");"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);t.exports=a.locals||{}},nhyC:function(t,e,s){"use strict";var n=s("MDlo");s.n(n).a},pyCd:function(t,e){},"r6+a":function(t,e,s){"use strict";var n=s("137A");s.n(n).a},xjt1:function(t,e,s){"use strict";var n=s("Dczv");s.n(n).a}},[[0,1,2]]]);