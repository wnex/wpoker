/*! For license information please see app.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[773],{6884:(t,e)=>{"use strict";e.Z={Default:[{point:0,view:"0",color:"#cccaff"},{point:.25,view:"1/4",color:"#8CCB5E"},{point:.5,view:"1/2",color:"#e87f6d"},{point:1,view:"1",color:"#6992c8"},{point:2,view:"2",color:"#f7abaa"},{point:3,view:"3",color:"#b0c4d1"},{point:5,view:"5",color:"#1db6a1"},{point:8,view:"8",color:"#7575b3"},{point:13,view:"13",color:"#f5e8b6"},{point:0,view:"?",color:"#f9a12f"},{point:0,view:":coffee:",color:"#76ccea"},{point:0,view:":dragon:",color:"#f8d37b"}],Alternative:[{point:0,view:"0",color:"#cccaff"},{point:.5,view:"1/2",color:"#8CCB5E"},{point:1,view:"1",color:"#e87f6d"},{point:2,view:"2",color:"#6992c8"},{point:3,view:"3",color:"#f7abaa"},{point:5,view:"5",color:"#b0c4d1"},{point:8,view:"8",color:"#1db6a1"},{point:13,view:"13",color:"#7575b3"},{point:20,view:"20",color:"#f5e8b6"},{point:40,view:"40",color:"#f9a12f"},{point:100,view:"100",color:"#76ccea"},{point:0,view:":dragon:",color:"#f8d37b"}],"Fibonacci Sequence":[{point:0,view:"0",color:"#cccaff"},{point:1,view:"1",color:"#8CCB5E"},{point:2,view:"2",color:"#e87f6d"},{point:3,view:"3",color:"#6992c8"},{point:5,view:"5",color:"#f7abaa"},{point:8,view:"8",color:"#b0c4d1"},{point:13,view:"13",color:"#1db6a1"},{point:21,view:"21",color:"#7575b3"},{point:34,view:"34",color:"#f5e8b6"},{point:55,view:"55",color:"#f9a12f"},{point:89,view:"89",color:"#76ccea"},{point:144,view:"144",color:"#f8d37b"}],"Numerical Sequence":[{point:0,view:"0",color:"#cccaff"},{point:1,view:"1",color:"#8CCB5E"},{point:2,view:"2",color:"#e87f6d"},{point:3,view:"3",color:"#6992c8"},{point:4,view:"4",color:"#f7abaa"},{point:5,view:"5",color:"#b0c4d1"},{point:6,view:"6",color:"#1db6a1"},{point:7,view:"7",color:"#7575b3"},{point:8,view:"8",color:"#f5e8b6"},{point:9,view:"9",color:"#f9a12f"},{point:10,view:"10",color:"#76ccea"},{point:11,view:"11",color:"#f8d37b"}],"Yes/No":[{point:0,view:"Yes",color:"#8CCB5E"},{point:0,view:"No",color:"#e87f6d"}]}},1343:(t,e,n)=>{"use strict";var s=n(6768),o=function(){function t(t,e,n){if(void 0===n&&(n=!0),this.listeners={},this.currentGroup="nogroup",this.openFuncs=[],this.closeFuncs=[],this.requests=[],this.response={},this.pingPongTimeout=30,void 0===e){var s=t.split(":");t=s[0]+":"+s[1],e=parseInt(s[2])}this.socket=this.connect(t,e,n)}return t.prototype.connect=function(t,e,n){var s=this;return void 0===n&&(n=!0),this.socket=new WebSocket(t+":"+e),this.socket.addEventListener("open",(function(){if(s.openFuncs.length>0)for(var t=0;t<s.openFuncs.length;t++)s.openFuncs[t].call(s);if(s.requests.length>0){for(t=0;t<s.requests.length;t++)s.send(s.requests[t]);s.requests=[]}s.setPongPongTimeout()}),!1),this.socket.addEventListener("close",(function(){if(s.closeFuncs.length>0)for(var o=0;o<s.closeFuncs.length;o++)s.closeFuncs[o].call(s);n&&setTimeout((function(){return s.connect(t,e,n)}),1e3)}),!1),this.socket.addEventListener("message",(function(t){var e=JSON.parse(t.data);if("request"===e.type&&void 0!==e.request_id&&void 0!==s.response[e.request_id])return s.response[e.request_id].call(s,e),delete s.response[e.request_id],!1;for(var n in s.listeners){var o=s.listeners[n][e.action];if(void 0!==o&&o.length>0)for(var r=0;r<s.listeners[n][e.action].length;r++)s.listeners[n][e.action][r].call(s,e)}})),this.socket},t.prototype.setPongPongTimeout=function(){var t=this;clearTimeout(this.pingPong),this.pingPong=setTimeout((function(){t.send({type:"ping"})}),1e3*this.pingPongTimeout)},t.prototype.send=function(t){this.isOpen()?this.socket.send(JSON.stringify(t)):this.requests.push(t),this.setPongPongTimeout()},t.prototype.listener=function(t,e,n){void 0===n&&(n=""),this.on(t,e,n)},t.prototype.on=function(t,e,n){void 0===n&&(n=""),""===n&&(n=this.currentGroup),void 0===this.listeners[n]&&(this.listeners[n]={}),void 0===this.listeners[n][t]&&(this.listeners[n][t]=[]),this.listeners[n][t].push(e)},t.prototype.off=function(t,e){for(var n in this.listeners){var s=this.listeners[n][t];if(void 0!==s&&s.length>0)for(var o=0;o<s.length;o++)if(s[o]===e){this.listeners[n][t].splice(o,1);break}}},t.prototype.group=function(t){this.currentGroup=t},t.prototype.endGroup=function(){this.currentGroup="nogroup"},t.prototype.offGroup=function(t){void 0!==this.listeners[t]&&(this.listeners[t]={})},t.prototype.request=function(t,e){var n=this;return new Promise((function(o,r){var a=(0,s.v5)("request",(0,s.v4)()),i={action:t,type:"request",request_id:a,params:e};n.isOpen()?n.send(i):n.requests.push(i),n.response[a]=function(t){o(t)}}))},t.prototype.isOpen=function(){return this.socket.readyState===this.socket.OPEN},t.prototype.onOpen=function(t){this.isOpen()&&t.call(this),this.openFuncs.push(t)},t.prototype.onClose=function(t){this.isOpen()||t.call(this),this.closeFuncs.push(t)},t.prototype.offOpen=function(t){for(var e=0;e<this.openFuncs.length;e++)if(this.openFuncs[e]===t){this.openFuncs.splice(e,1);break}},t.prototype.offClose=function(t){for(var e=0;e<this.closeFuncs.length;e++)if(this.closeFuncs[e]===t){this.closeFuncs.splice(e,1);break}},t}();e.Z=o},2134:(t,e,n)=>{"use strict";n(9755),n(8508),n(8877);var s=n(538),o=n(1343),r=n(8345),a=n(381),i=n.n(a);const c={props:{created:{type:String,required:!0},refreshEvery:{type:Number,default:5}},data:function(){return{timeFromNow:null}},created:function(){this.getTimeFromNow(),setInterval(this.getTimeFromNow,1e3*this.refreshEvery)},destroyed:function(){clearInterval(this.getTimeFromNow)},methods:{getTimeFromNow:function(){this.timeFromNow=i()(this.created).fromNow()}},computed:{getFillTime:function(){return i()(this.created).format("LLL")}}};var l=n(1900);const d=(0,l.Z)(c,(function(){var t=this;return(0,t._self._c)("span",{attrs:{title:t.getFillTime}},[t._v(t._s(t.timeFromNow))])}),[],!1,null,null,null).exports;const u={props:["text"]};const m=(0,l.Z)(u,(function(){var t=this,e=t._self._c;return null!==t.text?e("div",{staticClass:"alert alert-danger px-3 py-1 mb-2",attrs:{role:"alert"}},[t._v("\n\t"+t._s(t.text)+"\n")]):t._e()}),[],!1,null,null,null).exports;var h=n(8697),p=n(6090);function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function v(){v=function(){return e};var t,e={},n=Object.prototype,s=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function d(t,e,n,s){var r=e&&e.prototype instanceof A?e:A,a=Object.create(r.prototype),i=new B(s||[]);return o(a,"_invoke",{value:$(t,n,i)}),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var m="suspendedStart",h="suspendedYield",p="executing",g="completed",b={};function A(){}function k(){}function w(){}var y={};l(y,a,(function(){return this}));var C=Object.getPrototypeOf,x=C&&C(C(N([])));x&&x!==n&&s.call(x,a)&&(y=x);var _=w.prototype=A.prototype=Object.create(y);function S(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function n(o,r,a,i){var c=u(t[o],t,r);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==f(d)&&s.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,i)}),(function(t){n("throw",t,a,i)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,i)}))}i(c.arg)}var r;o(this,"_invoke",{value:function(t,s){function o(){return new e((function(e,o){n(t,s,e,o)}))}return r=r?r.then(o,o):o()}})}function $(e,n,s){var o=m;return function(r,a){if(o===p)throw new Error("Generator is already running");if(o===g){if("throw"===r)throw a;return{value:t,done:!0}}for(s.method=r,s.arg=a;;){var i=s.delegate;if(i){var c=E(i,s);if(c){if(c===b)continue;return c}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(o===m)throw o=g,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);o=p;var l=u(e,n,s);if("normal"===l.type){if(o=s.done?g:h,l.arg===b)continue;return{value:l.arg,done:s.done}}"throw"===l.type&&(o=g,s.method="throw",s.arg=l.arg)}}}function E(e,n){var s=n.method,o=e.iterator[s];if(o===t)return n.delegate=null,"throw"===s&&e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method)||"return"!==s&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+s+"' method")),b;var r=u(o,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,b;var a=r.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,b):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,r=function n(){for(;++o<e.length;)if(s.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return r.next=r}}throw new TypeError(f(e)+" is not iterable")}return k.prototype=w,o(_,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:k,configurable:!0}),k.displayName=l(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,l(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},S(j.prototype),l(j.prototype,i,(function(){return this})),e.AsyncIterator=j,e.async=function(t,n,s,o,r){void 0===r&&(r=Promise);var a=new j(d(t,n,s,o),r);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(_),l(_,c,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var s in e)n.push(s);return n.reverse(),function t(){for(;n.length;){var s=n.pop();if(s in e)return t.value=s,t.done=!1,t}return t.done=!0,t}},e.values=N,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&s.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(s,o){return i.type="throw",i.arg=e,n.next=s,o&&(n.method="next",n.arg=t),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],i=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=s.call(a,"catchLoc"),l=s.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&s.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=t,a.arg=e,r?(this.method="next",this.next=r.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var s=n.completion;if("throw"===s.type){var o=s.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,s){return this.delegate={iterator:N(e),resultName:n,nextLoc:s},"next"===this.method&&(this.arg=t),b}},e}function g(t,e,n,s,o,r,a){try{var i=t[r](a),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(s,o)}function b(t){return function(){var e=this,n=arguments;return new Promise((function(s,o){var r=t.apply(e,n);function a(t){g(r,s,o,a,i,"next",t)}function i(t){g(r,s,o,a,i,"throw",t)}a(void 0)}))}}const A={props:["socket"],components:{Timer:d,TextError:m},data:function(){return{rooms:[],visitHistory:[],name:"",roomErrorText:null,changeNameErrorText:null,nameNewRoom:"",loading:!1,uidVisibility:!1}},created:function(){localStorage.name&&(this.name=localStorage.name),localStorage.rooms&&(this.rooms=JSON.parse(localStorage.rooms)),localStorage.visitHistory&&(this.visitHistory=JSON.parse(localStorage.visitHistory)),this.roomsUpdate()},mounted:function(){this.$route.query.kicked&&this.$nextTick((function(){console.log("Kicked you out.")})),this.$root.setTitle()},methods:{roomsUpdate:function(){var t=this;this.socket.request("room.get",{owner:this.$root.getUser()}).then((function(e){t.rooms=e.data,localStorage.rooms=JSON.stringify(t.rooms)}))},saveName:function(){if(""===this.name)return this.changeNameErrorText="Empty name.",!1;localStorage.name=this.name,this.changeNameErrorText=null},captchaVerify:function(t){var e=this;return b(v().mark((function n(){var s,o,r;return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,p.zD)("6LeVSDIfAAAAABxjfI8yEzoalSQ5iNa1TTobtx8j");case 2:return s=n.sent,n.next=5,s.execute("room/create");case 5:return o=n.sent,n.next=8,e.socket.request("captcha.verify",{action:t,token:o});case 8:return r=n.sent,n.abrupt("return",r.data.success);case 10:case"end":return n.stop()}}),n)})))()},createRoom:function(){var t=this;return b(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.nameNewRoom){e.next=3;break}return t.roomErrorText="Empty name.",e.abrupt("return",!1);case 3:if(t.captchaVerify("room/create")){e.next=5;break}return e.abrupt("return",!1);case 5:t.socket.request("room.create",{name:t.nameNewRoom,owner:t.$root.getUser()}).then((function(e){t.rooms.unshift(e.data),localStorage.rooms=JSON.stringify(t.rooms),t.nameNewRoom=""})),t.roomErrorText=null;case 7:case"end":return e.stop()}}),e)})))()},cloneRoom:function(t,e){var n=this;return b(v().mark((function s(){var o;return v().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(""!==(o=prompt("Enter the new room name",e))){s.next=3;break}return s.abrupt("return",!1);case 3:if(n.captchaVerify("room/create")){s.next=5;break}return s.abrupt("return",!1);case 5:n.socket.request("room.create",{name:o,owner:n.$root.getUser(),clone:t}).then((function(t){n.rooms.unshift(t.data),localStorage.rooms=JSON.stringify(n.rooms)}));case 6:case"end":return s.stop()}}),s)})))()},deleteRoom:function(t){var e=this;if(confirm("Delete room?"))this.socket.request("room.delete",{id:t,owner:this.$root.getUser()}).then((function(n){for(var s=0;s<e.rooms.length;s++)if(e.rooms[s].id==t){e.rooms.splice(s,1);break}localStorage.rooms=JSON.stringify(e.rooms)}))},setPassword:function(t){var e=this,n=prompt("Enter the password for the room. Empty password will unlock the room.");if(null!==n)this.socket.request("room.update",{id:t,owner:this.$root.getUser(),password:n}).then((function(t){for(var n=0;n<e.rooms.length;n++)if(e.rooms[n].id==t.data.id){e.rooms.splice(n,1,t.data);break}localStorage.rooms=JSON.stringify(e.rooms)}))},copyUid:function(){n.g.navigator.clipboard.writeText(this.$root.getUser())},changeUid:function(){var t=this,e=prompt("Enter UID");if(null===e||""===e)return alert("Empty UID.");if(!(0,h.Z)(e))return alert("Not a valid UID.");if(confirm("Are you confident? All your current data will be rebound to the new UID."))this.socket.request("room.rebind",{owner:this.$root.getUser(),new_uid:e}).then((function(n){n.data&&(t.$cookies.set("uid",e,6e8),t.roomsUpdate())}))}}};var k=n(2446),w=n.n(k),y=n(2471),C={insert:"head",singleton:!1};w()(y.Z,C);y.Z.locals;const x=(0,l.Z)(A,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-8 order-md-1"},[e("h4",{staticClass:"mb-3"},[t._v("Your rooms")]),t._v(" "),e("form",{staticClass:"mb-4",on:{submit:function(e){return e.preventDefault(),t.createRoom.apply(null,arguments)}}},[e("text-error",{attrs:{text:t.roomErrorText}}),t._v(" "),e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.nameNewRoom,expression:"nameNewRoom"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter the name of the new room"},domProps:{value:t.nameNewRoom},on:{input:function(e){e.target.composing||(t.nameNewRoom=e.target.value)}}}),t._v(" "),t._m(0)]),t._v(" "),t._m(1)],1),t._v(" "),t.rooms.length>0?e("ul",{staticClass:"list-group mb-3"},t._l(t.rooms,(function(n){return e("li",{staticClass:"list-group-item d-flex justify-content-between lh-condensed"},[e("span",[e("router-link",{staticStyle:{cursor:"pointer"},attrs:{link:"",to:{name:"room",params:{hash:n.hash}}}},[e("h6",{staticClass:"my-0"},[t._v(t._s(n.name))])]),t._v(" "),e("small",{staticClass:"text-muted"},[t._v("\n\t\t\t\t\t\tSet: "+t._s(n.cardset?n.cardset.name:"Default")+" •\n\t\t\t\t\t\tUpdated at "),e("timer",{attrs:{created:n.updated_at}})],1)],1),t._v(" "),e("span",[e("span",{staticClass:"badge wn-button",attrs:{title:"Set password"},on:{click:function(e){return t.setPassword(n.id)}}},[e("i",{staticClass:"fa fa-fw",class:{"fa-unlock":!n.hasPassword,"fa-lock":n.hasPassword},attrs:{"aria-hidden":"true"}})]),t._v(" "),e("span",{staticClass:"badge wn-button",attrs:{title:"Clone the room"},on:{click:function(e){return t.cloneRoom(n.id,n.name)}}},[e("i",{staticClass:"fa fa-fw fa-clone",attrs:{"aria-hidden":"true"}})]),t._v(" "),e("span",{staticClass:"badge wn-button",attrs:{title:"Delete the room"},on:{click:function(e){return t.deleteRoom(n.id)}}},[e("i",{staticClass:"fa fa-fw fa-trash-o",attrs:{"aria-hidden":"true"}})])])])})),0):t._e()]),t._v(" "),e("div",{staticClass:"col-md-4 order-md-2 mb-4"},[e("h4",{staticClass:"d-flex justify-content-between align-items-center mb-3"},[t._v("Your name")]),t._v(" "),e("form",{staticClass:"mb-4",on:{submit:function(e){return e.preventDefault(),t.saveName.apply(null,arguments)}}},[e("text-error",{attrs:{text:t.changeNameErrorText}}),t._v(" "),e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter your name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),t._m(2)])],1),t._v(" "),e("h4",{staticClass:"d-flex justify-content-between align-items-center mb-3"},[t._v("Your secret UUID")]),t._v(" "),e("div",{staticClass:"input-group mb-3"},[e("input",{staticClass:"form-control",attrs:{type:t.uidVisibility?"text":"password",readonly:""},domProps:{value:t.$root.getUser()},on:{focus:function(t){return t.target.select()}}}),t._v(" "),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(e){t.uidVisibility=!t.uidVisibility}}},[e("i",{staticClass:"fa",class:{"fa-eye":!t.uidVisibility,"fa-eye-slash":t.uidVisibility},attrs:{"aria-hidden":"true"}})]),t._v(" "),e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.changeUid}},[e("i",{staticClass:"fa fa-pencil-square-o",attrs:{"aria-hidden":"true"}})]),t._v(" "),e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.copyUid}},[t._v("Copy")])])]),t._v(" "),t._m(3),t._v(" "),t.visitHistory.length>0?e("h4",{staticClass:"d-flex justify-content-between align-items-center mb-3"},[t._v("Visit history")]):t._e(),t._v(" "),t.visitHistory.length>0?e("div",t._l(t.visitHistory,(function(n){return e("div",[e("router-link",{staticStyle:{cursor:"pointer"},attrs:{link:"",to:{name:"room",params:{hash:n.hash}}}},[e("h6",{staticClass:"my-0"},[t._v(t._s(n.name))])]),t._v(" "),e("hr")],1)})),0):t._e()])])}),[function(){var t=this._self._c;return t("div",{staticClass:"input-group-append"},[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[this._v("Create room")])])},function(){var t=this,e=t._self._c;return e("small",{staticClass:"text-muted"},[t._v("\n\t\t\t\tThis site is protected by reCAPTCHA and the Google\n\t\t\t\t\t"),e("a",{attrs:{href:"https://policies.google.com/privacy",rel:"nofollow",target:"_blank"}},[t._v("Privacy Policy")]),t._v(" and\n\t\t\t\t\t"),e("a",{attrs:{href:"https://policies.google.com/terms",rel:"nofollow",target:"_blank"}},[t._v("Terms of Service")]),t._v(" apply.\n\t\t\t")])},function(){var t=this._self._c;return t("div",{staticClass:"input-group-append"},[t("button",{staticClass:"btn btn-secondary",attrs:{type:"submit"}},[this._v("Save")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-4"},[e("p",[t._v("This is your unique user ID. Your rooms are tied to it and your owner rights are determined by it.")]),t._v(" "),e("p",[t._v("You can copy and paste it on your other devices so you can access your rooms from all your devices.")]),t._v(" "),e("p",[t._v("Do not share this code with other people.")])])}],!1,null,"66c922b2",null).exports;const _={data:function(){return{animateFrame:0,nowTime:0,diffTime:0,startTime:0,isRunning:!1}},mounted:function(){},methods:{setSubtractStartTime:function(t){t=void 0!==t?t:0;this.startTime=Math.floor(performance.now()-t)},startTimer:function(t){var e=this;e.diffTime=void 0!==t?t:0,e.setSubtractStartTime(e.diffTime),function t(){e.nowTime=Math.floor(performance.now()),e.diffTime=e.nowTime-e.startTime,e.animateFrame=requestAnimationFrame(t)}(),e.isRunning=!0},stopTimer:function(){this.isRunning=!1,cancelAnimationFrame(this.animateFrame)},clearAll:function(){this.startTime=0,this.nowTime=0,this.diffTime=0,this.stopTimer(),this.animateFrame=0}},computed:{hours:function(){return Math.floor(this.diffTime/1e3/60/60)},minutes:function(){return Math.floor(this.diffTime/1e3/60)%60},seconds:function(){return Math.floor(this.diffTime/1e3)%60},milliSeconds:function(){return Math.floor(this.diffTime%1e3)}},filters:{zeroPad:function(t,e){e=void 0!==e?e:2;return t.toString().padStart(e,"0")}}};const S=(0,l.Z)(_,(function(){var t=this;return(0,t._self._c)("div",[t._v("\n\t"+t._s(t.hours?t.hours+" : ":"")+" \n\t"+t._s(t._f("zeroPad")(t.minutes))+" :\n\t"+t._s(t._f("zeroPad")(t.seconds))+"\n")])}),[],!1,null,null,null).exports;var j={install:function(t){t.directive("click-outside",{bind:function(t,e,n){window.event=function(s){t==s.target||t.contains(s.target)||n.context[e.expression](s)},document.body.addEventListener("click",window.event)},unbind:function(t){document.body.removeEventListener("click",window.event)}})}};const $=j;s.ZP.use($);const E={props:{},data:function(){return{focused:!1}},methods:{focus:function(){this.focused=!0,this.$emit("focused")},blur:function(){this.focused=!1,this.$emit("blurred")}}};var T=n(6837),O={insert:"head",singleton:!1};w()(T.Z,O);T.Z.locals;const B=(0,l.Z)(E,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.blur,expression:"blur"}],staticClass:"card focusable",class:{"is-focused":t.focused},on:{click:t.focus}},[t._t("default"),t._v(" "),t._t("main"),t._v(" "),e("transition",{attrs:{name:"fade"}},[t.focused?e("div",{staticClass:"row input-group-append m-0 mt-2"},[e("div",{staticClass:"col p-0"},[t._t("footer")],2)]):t._e()])],2)}),[],!1,null,"3b137a10",null).exports;var N=n(5548),V=n(9296),P=n.n(V),L=n(5660),U=n.n(L),D=(n(8529),n(6854),n(9945),n(7874),n(949)),R=n.n(D);n(4564);s.ZP.use(N);const q={props:{socket:{type:Object,required:!0},room:{type:Object,required:!0}},components:{Timer:d,VueMarkdown:P(),Focusable:B,VueCustomScrollbar:R()},data:function(){return{message:"",messages:[],sound:null,showChatHistory:!0,scrollSettings:{suppressScrollY:!1,suppressScrollX:!0,wheelPropagation:!1}}},created:function(){this.sound=new Audio("../sounds/intuition.mp3"),this.sound.volume=.4},mounted:function(){var t=this;if(localStorage["messages-"+this.room.hash]){this.messages=JSON.parse(localStorage["messages-"+this.room.hash]);for(var e=0;e<this.messages.length;e++)this.messages[e].isShow&&(this.messages[e].notification?setTimeout(this.remove.bind(this,this.messages[e].id),5e3):setTimeout(this.hide.bind(this,this.messages[e].id),1e4));this.save()}this.socket.listener("room.chat.message",(function(e){t.messages.length>=30&&t.messages.shift(),t.messages.push({id:e.id,author_id:e.author_id,author_name:e.author_name,message:e.message,date:i()().format(),notification:e.notification,isShow:!t.showChatHistory||e.notification}),e.notification?setTimeout(t.remove.bind(t,e.id),1e4):setTimeout(t.hide.bind(t,e.id),2e4),t.save(),e.author_id!==t.room.clientId&&(t.sound.pause(),t.sound.currentTime=0,t.sound.play()),t.$nextTick((function(){U().highlightAll(),t.scrollToBottom()}))}),"chat"),this.$nextTick((function(){U().highlightAll(),t.scrollToBottom()}))},destroyed:function(){this.socket.offGroup("chat")},methods:{send:function(){""!==this.message&&(this.socket.send({action:"room.chat.send",room:this.room.hash,name:this.$root.name,message:this.message}),this.message="")},remove:function(t){for(var e=0;e<this.messages.length;e++)if(this.messages[e].id===t){this.messages.splice(e,1),this.save();break}},hide:function(t){for(var e=0;e<this.messages.length;e++)if(this.messages[e].id===t){this.messages[e].isShow=!1,this.save();break}},save:function(){var t=this;localStorage["messages-"+this.room.hash]=JSON.stringify(this.messages),this.$nextTick((function(){t.scrollToBottom()}))},scrollToBottom:function(){var t=document.querySelectorAll(".chat-anchor");if(null!==t)for(var e=0;e<t.length;e++)t[e].scrollIntoView({behavior:"auto",block:"nearest",inline:"start"})},clearAll:function(){for(var t=0;t<this.messages.length;t++)this.messages[t].isShow=!1;this.save()},switchShowChatHistory:function(){var t=this;this.showChatHistory=!this.showChatHistory,this.$nextTick((function(){U().highlightAll(),t.scrollToBottom()}))},getDate:function(t){return i().locale("en"),i()(t).fromNow()},onBlurred:function(){this.$refs.message.blur()}},computed:{showMessagesLength:function(){for(var t=0,e=0;e<this.messages.length;e++)this.messages[e].isShow&&t++;return t}}};var F=n(3990),z={insert:"head",singleton:!1};w()(F.Z,z);F.Z.locals;const I=(0,l.Z)(q,(function(){var t=this,e=t._self._c;return e("div",[t._m(0),t._v(" "),e("div",{staticClass:"history mb-2"},[t.showChatHistory?e("div",{staticClass:"mb-0"},[e("vue-custom-scrollbar",{staticClass:"message-block",attrs:{id:"message-block",settings:t.scrollSettings}},[e("div",t._l(t.messages,(function(n){return n.notification?t._e():e("div",{key:n.id,staticClass:"toast show mb-1"},[e("div",{staticClass:"toast-body"},[e("strong",{staticClass:"mr-auto"},[t._v(t._s(n.author_name)+":")]),t._v(" "),e("small",{staticClass:"text-muted"},[e("timer",{attrs:{created:n.date}})],1),t._v(" "),e("vue-markdown",{attrs:{html:!1,anchorAttributes:{target:"blank",rel:"nofollow"}}},[t._v(t._s(n.message))])],1)])})),0),t._v(" "),e("div",{staticClass:"chat-anchor"})])],1):t._e()]),t._v(" "),e("focusable",{ref:"focusable",staticClass:"pt-2 pl-2 pr-2 mb-4 p-2",on:{blurred:t.onBlurred},scopedSlots:t._u([{key:"footer",fn:function(){return[e("button",{staticClass:"btn btn-primary btn-sm float-end",attrs:{disabled:0===t.message.length},on:{click:function(e){return e.preventDefault(),t.send.apply(null,arguments)}}},[t._v("Send")])]},proxy:!0}])},[e("form",{on:{submit:function(e){return e.preventDefault(),t.send.apply(null,arguments)}}},[e("div",{staticClass:"input-group"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"},{name:"autosize",rawName:"v-autosize",value:t.message,expression:"message"}],ref:"message",staticClass:"message-box",attrs:{placeholder:"Enter your message",rows:"1"},domProps:{value:t.message},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.send.apply(null,arguments))},focus:function(e){return t.$refs.focusable.focus()},input:function(e){e.target.composing||(t.message=e.target.value)}}})])])]),t._v(" "),e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showMessagesLength>0,expression:"showMessagesLength > 0"}],staticClass:"chat-block",attrs:{"aria-live":"polite","aria-atomic":"true"}},[e("div",{staticClass:"mb-2",staticStyle:{display:"flex","flex-direction":"column"}},[e("button",{staticClass:"btn clear-all btn-outline-secondary",attrs:{type:"submit"},on:{click:function(e){return t.clearAll()}}},[t._v("Hide all")])]),t._v(" "),e("div",{staticClass:"message-block",attrs:{id:"message-block"}},[e("transition-group",{attrs:{name:"list"}},t._l(t.messages,(function(n){return e("div",{directives:[{name:"show",rawName:"v-show",value:n.isShow,expression:"message.isShow"}],key:n.id,staticClass:"toast show mb-2",attrs:{role:"alert","aria-live":"assertive","aria-atomic":"true","data-autohide":"false"}},[e("div",{staticClass:"toast-header"},[e("strong",{staticClass:"mr-auto"},[t._v(t._s(n.author_name))]),t._v(" "),e("small",{staticClass:"text-muted"},[e("timer",{attrs:{created:n.date}})],1)]),t._v(" "),e("div",{staticClass:"toast-body"},[e("vue-markdown",{attrs:{html:!1,anchorAttributes:{target:"blank",rel:"nofollow"}}},[t._v(t._s(n.message))])],1)])})),0),t._v(" "),e("div",{staticClass:"chat-anchor"})],1)])])],1)}),[function(){var t=this._self._c;return t("h4",{staticClass:"d-flex justify-content-between align-items-center mb-2"},[t("span",{staticClass:"text-muted"},[this._v("Chat")])])}],!1,null,"0108baba",null).exports;var H=n(2021),M=n.n(H);s.ZP.use(N);const G={props:{text:{type:String,required:!0},placeholder:{type:String,required:!0},button:{type:String,required:!0},isEdit:{type:Boolean,default:!1}},components:{VueMarkdown:P(),Focusable:B},data:function(){return{textLocal:"",isPreview:!1,mode:"once"}},methods:{onPasteImage:function(t){0==t.clipboardData&&"function"==typeof callback&&console.log(void 0);var e=t.clipboardData.items;null==e&&"function"==typeof callback&&console.log(void 0);for(var n=0;n<e.length;n++)if(-1!=e[n].type.indexOf("image")){var s=e[n].getAsFile();console.log(s)}},submit:function(){if("multi"===this.mode)for(var t=this.textLocal.split("\n"),e=0;e<t.length;e++)this.$emit("submit",{text:t[e]});else this.$emit("submit",{text:this.textLocal})},focus:function(){this.$refs.text.focus(),this.$refs.focusable.focus()},onBlurred:function(){this.isPreview=!1,this.$refs.text.blur()}},computed:{anchorAttributes:function(){return{target:"blank",rel:"nofollow"}}},watch:{text:function(){this.textLocal=this.text},isPreview:function(){this.isPreview&&this.$nextTick((function(){U().highlightAll()}))}}};var Z=n(9339),J={insert:"head",singleton:!1};w()(Z.Z,J);Z.Z.locals;const Y=(0,l.Z)(G,(function(){var t=this,e=t._self._c;return e("focusable",{ref:"focusable",staticClass:"pt-2 pl-2 pr-2 mb-4 p-2",on:{blurred:t.onBlurred},scopedSlots:t._u([{key:"footer",fn:function(){return[e("button",{directives:[{name:"show",rawName:"v-show",value:!t.isPreview&&0!==t.textLocal.length,expression:"!isPreview && textLocal.length !== 0"}],staticClass:"btn btn-light btn-sm",on:{click:function(e){e.preventDefault(),t.isPreview=!0}}},[t._v("Preview")]),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:t.isPreview,expression:"isPreview"}],staticClass:"btn btn-light btn-sm",on:{click:function(e){e.preventDefault(),t.isPreview=!1}}},[t._v("Edit")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isEdit,expression:"!isEdit"}],staticClass:"btn-group",attrs:{role:"group"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.mode,expression:"mode"}],staticClass:"btn-check",attrs:{type:"radio",name:"mode",id:"modeOnce",value:"once"},domProps:{checked:t._q(t.mode,"once")},on:{change:function(e){t.mode="once"}}}),t._v(" "),e("label",{staticClass:"btn btn-light btn-sm",attrs:{for:"modeOnce"}},[t._v("Once")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.mode,expression:"mode"}],staticClass:"btn-check",attrs:{type:"radio",name:"mode",id:"modeMulti",value:"multi"},domProps:{checked:t._q(t.mode,"multi")},on:{change:function(e){t.mode="multi"}}}),t._v(" "),e("label",{staticClass:"btn btn-light btn-sm",attrs:{for:"modeMulti"}},[t._v("Multi")])]),t._v(" "),e("button",{staticClass:"btn btn-light btn-sm",attrs:{type:"button","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-title":"Markdown supported"}},[e("i",{staticClass:"fa fa-question-circle-o",attrs:{"aria-hidden":"true"}})]),t._v(" "),e("button",{staticClass:"btn btn-sm float-end",class:{"btn-success":t.isEdit,"btn-primary":!t.isEdit},attrs:{type:"submit",disabled:0===t.textLocal.length},on:{click:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[t._v(t._s(t.button))])]},proxy:!0}])},[e("form",{directives:[{name:"show",rawName:"v-show",value:!t.isPreview,expression:"!isPreview"}],on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",{staticClass:"input-group"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textLocal,expression:"textLocal"},{name:"autosize",rawName:"v-autosize",value:t.textLocal,expression:"textLocal"}],ref:"text",staticClass:"text-box",class:{"text-success":t.isEdit},attrs:{placeholder:t.placeholder,rows:"1"},domProps:{value:t.textLocal},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.submit.apply(null,arguments))},paste:t.onPasteImage,focus:function(e){return t.$refs.focusable.focus()},input:function(e){e.target.composing||(t.textLocal=e.target.value)}}})])]),t._v(" "),t.isPreview?e("vue-markdown",{attrs:{html:!1,anchorAttributes:t.anchorAttributes,source:t.textLocal}}):t._e()],1)}),[],!1,null,"72b7d0b3",null).exports;var K=n(6884);const W={props:["socket","room"],components:{VueMarkdown:P(),Draggable:M(),TaskForm:Y},data:function(){return{drag:!1,text:"",tasks:[],edit:{enabled:!1,text:"",id:""},textFocused:!1,cards:[],cardsets:{}}},mounted:function(){var t=this;this.cardsets=K.Z,this.socket.group("task"),this.socket.listener("room.task.add",(function(e){t.tasks.push(e.task),t.tasksSort(),t.$nextTick((function(){U().highlightAll()}))})),this.socket.listener("room.task.remove",(function(e){for(var n=0;n<t.tasks.length;n++)if(t.tasks[n].id===e.id){t.tasks.splice(n,1),t.save();break}})),this.socket.listener("room.task.update",(function(e){for(var n=0;n<t.tasks.length;n++)if(t.tasks[n].id===e.task.id){t.$set(t.tasks,n,e.task),t.save();break}})),this.socket.listener("room.task.update.all",(function(e){t.tasks=e.tasks,t.tasksSort()})),this.socket.listener("room.task.approve",(function(e){for(var n=0;n<t.tasks.length;n++)if(t.tasks[n].id===e.id){t.$set(t.tasks[n],"story_point",e.point),t.$set(t.tasks[n],"story_point_view",e.view),t.save();break}t.$emit("approve",e)})),this.socket.endGroup()},destroyed:function(){this.socket.offGroup("task")},methods:{init:function(){var t=this;localStorage["tasks-"+this.room.hash]&&(this.tasks=JSON.parse(localStorage["tasks-"+this.room.hash]));this.socket.request("task.get",{room:this.room.hash}).then((function(e){t.tasks=e.data,t.tasksSort()}))},endDrag:function(){this.drag=!1;for(var t=0;t<this.tasks.length;t++){var e=this.tasks[t];e.order=t+1,this.$set(this.tasks,t,e)}this.saveInServer(),this.save()},add:function(t){var e=this;if(this.text=t.text,""===this.text)return!1;this.socket.request("task.create",{text:this.text,user:this.$root.getUser(),room:this.room.hash}).then((function(t){e.text=""}))},remove:function(t){var e=this;if(confirm("Remove task?"))this.socket.request("task.delete",{id:t,user:this.$root.getUser()}).then((function(n){for(var s=0;s<e.tasks.length;s++)if(e.tasks[s].id===t){e.tasks.splice(s,1),e.save();break}}))},editInit:function(t){for(var e=this,n=0;n<this.tasks.length;n++)if(this.tasks[n].id===t){this.edit.enabled=!0,this.edit.id=this.tasks[n].id,this.edit.text=this.tasks[n].text,this.$nextTick((function(){e.$refs.editForm.focus()}));break}},editSave:function(t){var e=this;this.edit.text=t.text;this.socket.request("task.update",{id:this.edit.id,text:this.edit.text,user:this.$root.getUser()}).then((function(t){e.edit.enabled=!1,e.edit.text="",e.edit.id=""}))},editStoryPoint:function(t,e,n){this.socket.request("task.update",{id:t,story_point:e,story_point_view:n,user:this.$root.getUser()})},save:function(){localStorage["tasks-"+this.room.hash]=JSON.stringify(this.tasks)},saveInServer:function(){this.socket.send({action:"room.task.update.all",room:this.room.hash,tasks:this.tasks,owner:this.$root.getUser()})},tasksSort:function(){this.tasks.sort((function(t,e){return t.order-e.order})),this.save()}},computed:{dragOptions:function(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost"}},anchorAttributes:function(){return{target:"blank",rel:"nofollow"}},completedTasks:function(){for(var t=0,e=0;e<this.tasks.length;e++)null!==this.tasks[e].story_point&&void 0!==this.tasks[e].story_point&&t++;return t},haveUnratedTasks:function(){for(var t=0;t<this.tasks.length;t++)if(null===this.tasks[t].story_point||void 0===this.tasks[t].story_point)return!0;return!1},amount:function(){for(var t=0,e=0;e<this.tasks.length;e++)null!==this.tasks[e].story_point&&void 0!==this.tasks[e].story_point&&(t+=parseFloat(this.tasks[e].story_point));return t}},watch:{"room.id":function(){void 0!==this.room.id&&null!==this.room.id&&this.init()},"room.cardset":function(t,e){if(void 0!==t.name){if("Custom"===t.name)this.cards=t.cards;else for(var n in this.cardsets)if(n===t.name){this.cards=this.cardsets[n];break}}else this.cards=this.cardsets.Default}}};var Q=n(6879),X={insert:"head",singleton:!1};w()(Q.Z,X);Q.Z.locals;const tt=(0,l.Z)(W,(function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"fade"}},[t.tasks.length||t.room.isOwner?e("div",[e("h4",{staticClass:"d-flex justify-content-between align-items-center mb-3"},[e("span",[t._v("Tasks")]),t._v(" "),e("div",[e("span",{staticClass:"badge bg-secondary-subtle text-secondary-emphasis",attrs:{title:"Completed tasks/Number of tasks"}},[t._v(t._s(t.completedTasks)+"/"+t._s(t.tasks.length))]),t._v(" "),e("span",{staticClass:"badge bg-primary-subtle text-primary-emphasis",attrs:{title:"Amount story points"}},[t._v(t._s(t.amount))])])]),t._v(" "),e("transition",{attrs:{name:"fade"}},[e("task-form",{directives:[{name:"show",rawName:"v-show",value:t.room.isOwner&&!t.edit.enabled,expression:"room.isOwner && !edit.enabled"}],attrs:{text:t.text,placeholder:"Enter text new task",button:"Add task"},on:{submit:t.add}})],1),t._v(" "),e("task-form",{directives:[{name:"show",rawName:"v-show",value:t.room.isOwner&&t.edit.enabled,expression:"room.isOwner && edit.enabled"}],ref:"editForm",attrs:{text:t.edit.text,placeholder:"Enter text",button:"Save",isEdit:!0},on:{submit:t.editSave}}),t._v(" "),e("draggable",t._b({attrs:{handle:".handle"},on:{start:function(e){t.drag=!0},end:t.endDrag},model:{value:t.tasks,callback:function(e){t.tasks=e},expression:"tasks"}},"draggable",t.dragOptions,!1),[e("transition-group",{staticClass:"list-group mb-3",attrs:{tag:"ul",type:"transition",name:t.drag?null:"flip-list"}},t._l(t.tasks,(function(n){return e("li",{key:n.id,staticClass:"list-group-item d-flex justify-content-between lh-condensed task",class:{"list-group-item-secondary":n.story_point_view,"list-group-item-primary":n.id===(t.room.task?t.room.task.id:0)}},[e("div",[e("span",{staticClass:"text-muted"},[t._v("#"+t._s(n.order))]),t._v(" "),e("vue-markdown",{attrs:{html:!1,anchorAttributes:t.anchorAttributes,source:n.text}})],1),t._v(" "),e("span",{staticClass:"control text-muted"},[t.room.isOwner?e("span",{staticClass:"control-owner"},[e("i",{staticClass:"fa fa-fw fa-align-justify handle",attrs:{title:"Sort"}}),t._v(" "),e("i",{staticClass:"fa fa-fw fa-pencil button-icon",attrs:{title:"Edit"},on:{click:function(e){return e.stopPropagation(),t.editInit(n.id)}}}),t._v(" "),e("i",{staticClass:"fa fa-fw fa-trash-o button-icon",attrs:{title:"Delete"},on:{click:function(e){return t.remove(n.id)}}})]):t._e(),t._v(" "),n.story_point_view&&!t.room.isOwner?e("span",{staticClass:"story-point",attrs:{title:"Story points"}},[e("vue-markdown",{staticClass:"view",attrs:{html:!1,anchorAttributes:t.anchorAttributes,source:n.story_point_view}})],1):t._e(),t._v(" "),n.story_point_view&&t.room.isOwner?e("div",{staticClass:"btn-group",attrs:{role:"group"}},[e("div",{staticClass:"btn-group",attrs:{role:"group"}},[e("span",{staticClass:"story-point btn btn-primary dropdown-toggle",attrs:{title:"Story points","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e("vue-markdown",{staticClass:"view",attrs:{html:!1,anchorAttributes:t.anchorAttributes,source:n.story_point_view}})],1),t._v(" "),e("div",{staticClass:"dropdown-menu"},t._l(t.cards,(function(s,o){return e("button",{key:o,staticClass:"dropdown-item btn-sm",attrs:{type:"button"},on:{click:function(e){return t.editStoryPoint(n.id,s.point,s.view)}}},[e("vue-markdown",{staticClass:"view",attrs:{html:!1,anchorAttributes:t.anchorAttributes,source:s.view}})],1)})),0)])]):t._e()])])})),0)],1)],1):t._e()])}),[],!1,null,"3c8fa7ed",null).exports;function et(t){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},et(t)}function nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nt(Object(n),!0).forEach((function(e){ot(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ot(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==et(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var s=n.call(t,e||"default");if("object"!==et(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===et(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const rt={props:{value:{type:String,default:""}},computed:{listeners:function(){return st(st({},this.$listeners),{},{input:this.onInput})}},mounted:function(){this.$refs.editable.innerText=this.value},methods:{onInput:function(t){this.$emit("input",t.target.innerText)}}};const at={props:["socket","canVote","room","users"],components:{Editable:(0,l.Z)(rt,(function(){var t=this;return(0,t._self._c)("span",t._g({ref:"editable",attrs:{contenteditable:""}},t.listeners))}),[],!1,null,null,null).exports,VueMarkdown:P()},data:function(){return{approve:!1,cover:"/images/cards/cover_min.png",editing:!1,cards:[],cardsets:{}}},mounted:function(){var t=this;this.cardsets=K.Z,this.socket.listener("room.card.shake",(function(e){for(var n=0;n<t.cards.length;n++)if(t.cards[n].view===e.view){t.$set(t.cards[n],"shake",!0),setTimeout((function(){t.$set(t.cards[n],"shake",!1)}),500);break}}),"card")},destroyed:function(){this.socket.offGroup("card")},methods:{vote:function(t,e){var n=this;if(this.editing)return!1;this.canVote&&(this.selectPoint=t,this.socket.send({action:"room.vote",room:this.room.hash,point:t,view:e})),this.approve&&(this.socket.send({action:"room.task.approve",id:this.room.task.id,point:t,view:e}),this.stopApprove());for(var s=0;s<this.cards.length;s++)if(this.cards[s].view===e){this.$set(this.cards[s],"shake",!0),clearTimeout(this.cards[s].animation),this.$set(this.cards[s],"animation",setTimeout((function(){n.$set(n.cards[s],"shake",!1)}),500));break}},startApprove:function(){null!==this.room.task&&(this.approve=!0)},stopApprove:function(){this.approve=!1},cardShake:function(t){this.socket.send({action:"room.card.shake",view:t,room:this.room.hash})},newCard:function(){this.cards.push({view:"Card "+(this.cards.length+1),point:"0",color:"#"})},deleteCard:function(t){if(2===this.cards.length)return alert("Minimum number of cards in a set 2."),!1;confirm("Delete this card?")&&this.cards.splice(t,1)},saveCardSet:function(){var t=this;if(this.room.isOwner)this.socket.request("room.update",{id:this.room.id,owner:this.$root.getUser(),cardset:{name:"Custom",cards:this.cards}}).then((function(e){t.editing=!1}))},canselEditing:function(){this.editing=!1},setCardSet:function(t){var e=this;if(this.room.isOwner)this.socket.request("room.update",{id:this.room.id,owner:this.$root.getUser(),cardset:{name:t}}).then((function(t){e.editing=!1}))},isApprove:function(t){for(var e=0;e<this.users.length;e++){if(this.users[e].voteView===t)return!0}}},computed:{anchorAttributes:function(){return{target:"blank",rel:"nofollow"}}},watch:{"room.task":function(){this.$nextTick((function(){U().highlightAll()}))},"room.cardset":function(t,e){if(void 0!==t.name){if("Custom"===t.name)this.cards=t.cards;else for(var n in this.cardsets)if(n===t.name){this.cards=this.cardsets[n];break}}else this.cards=this.cardsets.Default}}};var it=n(6174),ct={insert:"head",singleton:!1};w()(it.Z,ct);it.Z.locals;var lt=n(2449),dt={insert:"head",singleton:!1};w()(lt.Z,dt);lt.Z.locals;const ut=(0,l.Z)(at,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mb-0 pt-0",class:{approve:t.approve}},[t.room.isOwner?e("div",{staticClass:"btn-toolbar col-12 d-flex justify-content-between align-items-center mb-2"},[e("div",{staticClass:"btn-group mr-3",attrs:{role:"group"}},[e("div",{staticClass:"btn-group",attrs:{role:"group"}},[e("button",{staticClass:"btn btn-primary btn-sm dropdown-toggle",attrs:{type:"button",id:"dropdownMenu2","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v(t._s(t.room.cardset&&t.room.cardset.name||"Default"))]),t._v(" "),e("div",{staticClass:"dropdown-menu"},t._l(t.cardsets,(function(n,s){return e("button",{key:s,staticClass:"dropdown-item btn-sm",attrs:{type:"button"},on:{click:function(e){return t.setCardSet(s)}}},[t._v("\n\t\t\t\t\t\t"+t._s(s)+"\n\t\t\t\t\t")])})),0)])]),t._v(" "),e("div",{staticClass:"btn-group",attrs:{role:"group"}},[t.editing?t._e():e("button",{staticClass:"btn btn-sm",class:{"btn-success":t.editing,"btn-outline-success":!t.editing},attrs:{type:"button"},on:{click:function(e){t.editing=!t.editing}}},[t._v("Edit card set")]),t._v(" "),t.editing?e("button",{staticClass:"btn btn-sm btn-success",attrs:{type:"button"},on:{click:t.saveCardSet}},[t._v("Save card set")]):t._e()])]):t._e(),t._v(" "),e("div",{staticClass:"col-12"},[t.approve?e("div",{staticClass:"alert alert-success mb-2",attrs:{role:"alert"}},[t._v("\n\t\t\tYou must confirm the vote for the current task.\n\t\t")]):t._e()]),t._v(" "),t._l(t.cards,(function(n,s){return e("div",{key:n.view,staticClass:"poker-card mb-3 d-flex col-3 col-md-2 justify-content-between"},[e("div",{staticClass:"flip-container",class:{hover:t.canVote||t.approve&&t.isApprove(n.view)||t.editing}},[e("div",{staticClass:"flipper"},[e("div",{staticClass:"front",class:{shake:n.shake},on:{click:function(e){return t.cardShake(n.view)}}}),t._v(" "),e("div",{staticClass:"back",class:{editable:t.editing}},[e("div",{staticClass:"poker-card-front",class:{shake:n.shake},style:"background-color: "+n.color+";",on:{click:function(e){return e.preventDefault(),t.vote(n.point,n.view)}}},[t.editing?t._e():e("vue-markdown",{staticClass:"view",attrs:{html:!1,anchorAttributes:t.anchorAttributes,source:n.view}}),t._v(" "),t.editing?e("div",[e("div",{staticClass:"input-group input-group-sm mb-1"},[e("input",{directives:[{name:"model",rawName:"v-model",value:n.view,expression:"card.view"}],staticClass:"form-control",attrs:{type:"text","aria-label":"Small","aria-describedby":"view"},domProps:{value:n.view},on:{input:function(e){e.target.composing||t.$set(n,"view",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"input-group input-group-sm mb-1"},[e("input",{directives:[{name:"model",rawName:"v-model",value:n.point,expression:"card.point"}],staticClass:"form-control",attrs:{type:"text","aria-label":"Small","aria-describedby":"point"},domProps:{value:n.point},on:{input:function(e){e.target.composing||t.$set(n,"point",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"input-group input-group-sm mb-1"},[e("input",{directives:[{name:"model",rawName:"v-model",value:n.color,expression:"card.color"}],staticClass:"form-control",attrs:{type:"text","aria-label":"Small","aria-describedby":"color"},domProps:{value:n.color},on:{input:function(e){e.target.composing||t.$set(n,"color",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"input-group input-group-sm mb-1"},[e("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:function(e){return t.deleteCard(s)}}},[t._v("Delete card")])])]):t._e()],1)])])])])})),t._v(" "),t.editing?e("div",{staticClass:"poker-card mb-2 d-flex col-3 col-md-2 pt-3 justify-content-between"},[e("div",{staticClass:"flip-container hover"},[e("div",{staticClass:"flipper"},[e("div",{staticClass:"front"},[e("img",{attrs:{src:t.cover,width:"100%"}})]),t._v(" "),e("div",{staticClass:"back"},[e("div",{staticClass:"poker-card-front new-card",on:{click:function(e){return t.newCard()}}},[e("span",[t._v("New")])])])])])]):t._e()],2)}),[],!1,null,"3ac0a6ae",null).exports;const mt={extends:n(6663).$I,props:["chartdata","options"],mounted:function(){this.update()},methods:{update:function(){this.renderChart(this.chartdata,this.options)}}};const ht=(0,l.Z)(mt,undefined,undefined,!1,null,null,null).exports;function pt(t){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pt(t)}function ft(){ft=function(){return e};var t,e={},n=Object.prototype,s=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function d(t,e,n,s){var r=e&&e.prototype instanceof g?e:g,a=Object.create(r.prototype),i=new T(s||[]);return o(a,"_invoke",{value:S(t,n,i)}),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var m="suspendedStart",h="suspendedYield",p="executing",f="completed",v={};function g(){}function b(){}function A(){}var k={};l(k,a,(function(){return this}));var w=Object.getPrototypeOf,y=w&&w(w(O([])));y&&y!==n&&s.call(y,a)&&(k=y);var C=A.prototype=g.prototype=Object.create(k);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,r,a,i){var c=u(t[o],t,r);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==pt(d)&&s.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,i)}),(function(t){n("throw",t,a,i)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,i)}))}i(c.arg)}var r;o(this,"_invoke",{value:function(t,s){function o(){return new e((function(e,o){n(t,s,e,o)}))}return r=r?r.then(o,o):o()}})}function S(e,n,s){var o=m;return function(r,a){if(o===p)throw new Error("Generator is already running");if(o===f){if("throw"===r)throw a;return{value:t,done:!0}}for(s.method=r,s.arg=a;;){var i=s.delegate;if(i){var c=j(i,s);if(c){if(c===v)continue;return c}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(o===m)throw o=f,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);o=p;var l=u(e,n,s);if("normal"===l.type){if(o=s.done?f:h,l.arg===v)continue;return{value:l.arg,done:s.done}}"throw"===l.type&&(o=f,s.method="throw",s.arg=l.arg)}}}function j(e,n){var s=n.method,o=e.iterator[s];if(o===t)return n.delegate=null,"throw"===s&&e.iterator.return&&(n.method="return",n.arg=t,j(e,n),"throw"===n.method)||"return"!==s&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+s+"' method")),v;var r=u(o,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,v;var a=r.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function $(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach($,this),this.reset(!0)}function O(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,r=function n(){for(;++o<e.length;)if(s.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return r.next=r}}throw new TypeError(pt(e)+" is not iterable")}return b.prototype=A,o(C,"constructor",{value:A,configurable:!0}),o(A,"constructor",{value:b,configurable:!0}),b.displayName=l(A,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,A):(t.__proto__=A,l(t,c,"GeneratorFunction")),t.prototype=Object.create(C),t},e.awrap=function(t){return{__await:t}},x(_.prototype),l(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,s,o,r){void 0===r&&(r=Promise);var a=new _(d(t,n,s,o),r);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(C),l(C,c,"Generator"),l(C,a,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var s in e)n.push(s);return n.reverse(),function t(){for(;n.length;){var s=n.pop();if(s in e)return t.value=s,t.done=!1,t}return t.done=!0,t}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&s.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(s,o){return i.type="throw",i.arg=e,n.next=s,o&&(n.method="next",n.arg=t),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],i=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=s.call(a,"catchLoc"),l=s.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&s.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=t,a.arg=e,r?(this.method="next",this.next=r.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var s=n.completion;if("throw"===s.type){var o=s.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,s){return this.delegate={iterator:O(e),resultName:n,nextLoc:s},"next"===this.method&&(this.arg=t),v}},e}function vt(t,e,n,s,o,r,a){try{var i=t[r](a),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(s,o)}const gt={props:["socket","user","room"],components:{VueMarkdown:P(),TextError:m},data:function(){return{name:"",changeNameSwitcher:!1,changeNameErrorText:null}},mounted:function(){localStorage.name&&(this.name=localStorage.name)},methods:{changeName:function(){this.changeNameSwitcher=!0},saveName:function(){if(""===this.name)return this.changeNameErrorText="Empty name.",!1;localStorage.name=this.name,this.changeNameSwitcher=!1,this.socket.send({action:"room.user.changeName",name:this.name,room:this.room.hash}),this.changeNameErrorText=null},changeNameSwitcherForSelf:function(t){return this.user.isSelf&&this.changeNameSwitcher},kickOut:function(t){confirm("Kick out this user?")&&this.socket.send({action:"room.user.kick",id:t,room:this.room.hash})},toggleUserHasVote:function(t,e){this.socket.send({action:"room.user.toggle.hasVote",id:t,value:e,room:this.room.hash})},transferTheRoom:function(t){var e,n=this;return(e=ft().mark((function e(){return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm("Transfer the room other user?")){e.next=4;break}return e.next=3,n.socket.request("room.update",{id:n.room.id,owner:n.$root.getUser(),owner_client_id:t});case 3:e.sent;case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(s,o){var r=e.apply(t,n);function a(t){vt(r,s,o,a,i,"next",t)}function i(t){vt(r,s,o,a,i,"throw",t)}a(void 0)}))})()}}};var bt=n(9680),At={insert:"head",singleton:!1};w()(bt.Z,At);bt.Z.locals;const kt={props:["socket","users","room","average"],components:{User:(0,l.Z)(gt,(function(){var t=this,e=t._self._c;return e("li",{staticClass:"list-group-item",class:{"d-flex justify-content-between lh-condensed":!t.changeNameSwitcher,disconnected:!t.user.active,"list-group-item-secondary":!t.user.hasVote}},[t.changeNameSwitcherForSelf()?t._e():e("div",{class:{"text-success":t.user.isVoted}},[e("h6",{staticClass:"my-0"},[t._v("\n\t\t\t"+t._s(""===t.user.name?"[No name]":t.user.name)+"\n\t\t")]),t._v(" "),t.user.isOwner?e("small",{staticClass:"text-muted"},[t._v("Owner")]):t._e(),t._v(" "),t.user.hasVote?t._e():e("small",{staticClass:"text-muted"},[t._v("Spectator")])]),t._v(" "),t.changeNameSwitcher?t._e():e("span",{staticClass:"text-muted d-flex panel-buttons"},[void 0===t.user.vote&&t.user.isVoted?e("span",{staticClass:"empty-card ml-1"}):t._e(),t._v(" "),e("vue-markdown",{staticClass:"badge user-control badge-primary ml-1",attrs:{html:!1,source:t.user.voteView}}),t._v(" "),t.user.isSelf||t.room.isOwner?e("div",{staticClass:"btn-group dropleft",attrs:{role:"group"}},[t._m(0),t._v(" "),e("div",{staticClass:"dropdown-menu"},[t.user.isSelf?e("button",{staticClass:"dropdown-item btn-sm",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.changeName.apply(null,arguments)}}},[e("i",{staticClass:"fa fa-fw fa-pencil",attrs:{"aria-hidden":"true"}}),t._v(" Change name\n\t\t\t\t")]):t._e(),t._v(" "),t.room.isOwner&&!t.user.isOwner?e("button",{staticClass:"dropdown-item btn-sm",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.kickOut(t.user.id)}}},[e("i",{staticClass:"fa fa-fw fa-sign-out",attrs:{"aria-hidden":"true"}}),t._v(" Kick from room\n\t\t\t\t")]):t._e(),t._v(" "),t.user.isSelf||t.room.isOwner&&!t.user.isOwner?e("button",{staticClass:"dropdown-item btn-sm",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.toggleUserHasVote(t.user.id,!t.user.hasVote)}}},[e("i",{staticClass:"fa fa-fw",class:{"fa-toggle-on":!t.user.hasVote,"fa-toggle-off":t.user.hasVote},attrs:{"aria-hidden":"true"}}),t._v(" Spectator mode\n\t\t\t\t")]):t._e(),t._v(" "),!t.user.isSelf&&t.room.isOwner?e("button",{staticClass:"dropdown-item btn-sm",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.transferTheRoom(t.user.id)}}},[e("i",{staticClass:"fa fa-fw fa-arrow-circle-o-right",attrs:{"aria-hidden":"true"}}),t._v(" Transfer the room\n\t\t\t\t")]):t._e()])]):t._e()],1),t._v(" "),t.user.isSelf&&t.changeNameSwitcher?e("form",{on:{submit:function(e){return e.preventDefault(),t.saveName.apply(null,arguments)}}},[e("text-error",{attrs:{text:t.changeNameErrorText}}),t._v(" "),e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter your name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),t._m(1)])],1):t._e()])}),[function(){var t=this._self._c;return t("button",{staticClass:"btn badge pr-0 user-control pointer",attrs:{type:"button",title:"","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t("i",{staticClass:"fa fa-ellipsis-v",attrs:{"aria-hidden":"true"}})])},function(){var t=this._self._c;return t("div",{staticClass:"input-group-append"},[t("button",{staticClass:"btn btn-secondary",attrs:{type:"submit"}},[this._v("Save")])])}],!1,null,"093145ab",null).exports,Chart:ht},data:function(){return{chart:!1,colors:["#6574cd","#e3342f","#38c172","#f6993f","#9561e2","#ffed4a","#6cb2eb"],chartOptions:{legend:{position:"bottom"}}}},mounted:function(){},methods:{chartData:function(){for(var t=[],e=[],n=0;n<this.users.length;n++)if(this.users[n].hasVote){var s=t.indexOf(this.users[n].voteView);-1===s?(t[s=t.length]=this.users[n].voteView,e[s]=1):e[s]++}return{labels:t,datasets:[{label:"",backgroundColor:this.colors,data:e}]}}},computed:{sortedUsers:function(){return this.users.sort((function(t,e){return t.isOwner&&!e.isOwner?-1:!t.isOwner&&e.isOwner?1:t.hasVote&&!e.hasVote?-1:!t.hasVote&&e.hasVote||""==t.name&&""==!e.name?1:""==!t.name&&""==e.name?-1:t.name.localeCompare(e.name)}))}},watch:{average:function(t){var e=this;null!==t?(this.chart=!0,this.$nextTick((function(){e.$refs.chart.update()}))):this.chart=!1}}};var wt=n(501),yt={insert:"head",singleton:!1};w()(wt.Z,yt);wt.Z.locals;const Ct=(0,l.Z)(kt,(function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"fade"}},[t.users.length?e("div",[e("h4",{staticClass:"d-flex justify-content-between align-items-center mb-2"},[e("span",{staticClass:"text-muted"},[t._v("Users")]),t._v(" "),e("span",{staticClass:"badge badge-secondary"},[t._v(t._s(t.users.length))])]),t._v(" "),e("ul",{staticClass:"list-group mb-3"},[t._l(t.sortedUsers,(function(n){return e("user",{key:n.id,attrs:{socket:t.socket,user:n,room:t.room}})})),t._v(" "),null!==t.average&&0!=t.average?e("li",{staticClass:"list-group-item d-flex justify-content-between"},[e("span",[t._v("Average")]),t._v(" "),e("strong",[t._v(t._s(t.average))])]):t._e(),t._v(" "),t.chart?e("li",{staticClass:"list-group-item d-flex justify-content-between"},[e("div",{staticStyle:{width:"100%"}},[e("chart",{ref:"chart",attrs:{chartdata:t.chartData(),options:t.chartOptions}})],1)]):t._e()],2)]):t._e()])}),[],!1,null,"305e101a",null).exports;var xt=n(9574);const _t={props:["socket","hash"],components:{Stopwatch:S,Chat:I,TaskList:tt,Cards:ut,UsersList:Ct,TextError:m,VueMarkdown:P(),QrcodeVue:xt.Z},data:function(){return{name:"",room:{id:null,name:"",hash:null,task:null,clientId:null,isOwner:!1,hasPassword:!1,cardset:null},users:[],stage:0,average:null,canVote:!1,soundStart:null,soundFinal:null,enterCountWrongPassword:0,changeRoomNameSwitcher:!1,changeRoomNameErrorText:null}},created:function(){this.room.hash=this.hash,localStorage.name&&(this.name=localStorage.name),this.socket.onOpen(this.enterRoom),this.soundStart=new Audio("../sounds/all-eyes-on-me.mp3"),this.soundStart.volume=.1,this.soundFinal=new Audio("../sounds/rhodesmas.mp3"),this.soundFinal.volume=.1},destroyed:function(){this.socket.offOpen(this.enterRoom),this.socket.offGroup("room")},beforeRouteUpdate:function(t,e,n){this.enterRoom(),n()},beforeRouteLeave:function(t,e,n){this.leaveRoom(),n()},mounted:function(){var t=this;this.socket.group("room"),this.socket.listener("room.entered.user",(function(e){t.users.push({id:e.id,name:e.name,isOwner:e.isOwner,hasVote:e.hasVote,active:!0})})),this.socket.listener("room.left.user",(function(e){for(var n=0;n<t.users.length&&t.users[n].id!==e.id;n++);t.users.splice(n,1)})),this.socket.listener("room.parameters",(function(e){t.room.id=e.id,t.room.name=e.name,t.room.isOwner=e.isOwner,t.room.clientId=e.client_id,t.room.task=e.task,t.room.hasPassword=e.hasPassword,t.room.cardset=e.cardset||{name:"Default"},t.hasVote=e.hasVote,t.stage=e.stage,t.$refs.stopwatch.clearAll(),t.$refs.stopwatch.startTimer(Date.now()-1e3*e.time),t.$root.setTitle(t.room.name),t.setUsers(e.users),t.saveVisitHistory()})),this.socket.listener("room.update",(function(e){t.room.name=e.name,t.room.hasPassword=e.hasPassword,t.room.cardset=e.cardset||{name:"Default"},t.$root.setTitle(t.room.name),t.room.isOwner=e.owner_client_id==t.room.clientId;for(var n=0;n<t.users.length;n++){var s=t.users[n];s.id!=e.owner_client_id||s.isOwner?s.id!=e.owner_client_id&&s.isOwner&&(t.users[n].isOwner=!1):t.users[n].isOwner=!0}})),this.socket.listener("room.user.changeName",(function(e){for(var n=0;n<t.users.length;n++)if(t.users[n].id===e.id){t.users[n].name=e.name;break}e.id===t.room.clientId&&(t.name=e.name)})),this.socket.listener("room.user.changeHasVote",(function(e){for(var n=0;n<t.users.length;n++)if(t.users[n].id===e.id){t.users[n].hasVote=e.hasVote;break}e.id===t.room.clientId&&(t.hasVote=e.hasVote,t.changedStage())})),this.socket.listener("room.vote.start",(function(e){t.stage=e.stage,t.room.task=e.task,t.soundStart.pause(),t.soundStart.currentTime=0,t.soundStart.play()})),this.socket.listener("room.vote.revote",(function(e){t.stage=e.stage,t.room.task=e.task,t.average=null;for(var n=0;n<t.users.length;n++)t.$set(t.users[n],"vote",void 0),t.$set(t.users[n],"voteView",void 0),t.$set(t.users[n],"isVoted",!1);t.soundStart.pause(),t.soundStart.currentTime=0,t.soundStart.play()})),this.socket.listener("room.vote",(function(e){for(var n=0;n<t.users.length;n++)if(t.users[n].id===e.id){t.$set(t.users[n],"isVoted",!0);break}})),this.socket.listener("room.vote.you",(function(e){for(var n=0;n<t.users.length;n++)if(t.users[n].id===e.id){t.$set(t.users[n],"vote",e.vote),t.$set(t.users[n],"voteView",e.voteView),t.$set(t.users[n],"isVoted",!0);break}})),this.socket.listener("room.kicked.you",(function(e){t.$router.push({name:"home",query:{kicked:!0}})})),this.socket.listener("room.vote.final",(function(e){2!==t.stage&&(t.soundFinal.pause(),t.soundFinal.currentTime=0,t.soundFinal.play()),t.canVote=!1,t.stage=2,t.setUsers(e.users),t.average=t.getAverage(),t.room.isOwner&&t.$refs.cards.startApprove()})),this.socket.listener("room.vote.reset",(function(e){t.stage=0,t.average=null;for(var n=0;n<t.users.length;n++)t.$set(t.users[n],"vote",void 0),t.$set(t.users[n],"voteView",void 0),t.$set(t.users[n],"isVoted",!1);t.room.task=null,t.$refs.stopwatch.clearAll()})),this.socket.listener("room.wait.password",(function(e){if(e.wrong&&t.enterCountWrongPassword++,t.enterCountWrongPassword>2)t.$router.push({name:"home"});else{t.$root.setTitle(e.name);var n=prompt('Enter the password for the room "'.concat(e.name,'"'));null!==n&&0!==n.length?t.socket.send({action:"room.enter",room:t.hash,name:t.name,uid:t.$root.getUser(),password:n}):t.$router.push({name:"home"})}})),this.socket.listener("room.user.disconnected",(function(e){for(var n=0;n<t.users.length;n++)if(t.users[n].id===e.id){t.users[n].active=!1;break}})),this.socket.endGroup()},methods:{onApprove:function(){this.$refs.stopwatch.stopTimer()},enterRoom:function(){this.socket.send({action:"room.enter",room:this.hash,name:this.name,uid:this.$root.getUser(),password:""})},leaveRoom:function(){this.socket.send({action:"room.leave",room:this.hash})},startVote:function(){this.socket.send({action:"room.vote.start",room:this.hash})},resetVote:function(){this.socket.send({action:"room.vote.reset",room:this.hash}),this.$refs.cards.stopApprove()},skipVote:function(){confirm("Skip the current task?")&&(this.socket.send({action:"room.task.approve",id:this.room.task.id,point:0,view:"skipped"}),this.$refs.cards.stopApprove())},revote:function(){this.socket.send({action:"room.vote.revote",room:this.hash}),this.$refs.cards.stopApprove()},getAverage:function(){for(var t=0,e=0,n=0;n<this.users.length;n++)this.users[n].hasVote&&0!=this.users[n].vote&&(t+=parseFloat(this.users[n].vote),e++);return 0===e?0:Math.round(t/e*100)/100},setUsers:function(t){this.users=t;for(var e=0;e<this.users.length;e++)this.users[e].id===this.room.clientId&&(this.users[e].isSelf=!0)},setPassword:function(){if(this.room.isOwner){var t=prompt("Enter the password for the room. Empty password will unlock the room.");if(null!==t)this.socket.request("room.update",{id:this.room.id,owner:this.$root.getUser(),password:t})}},editRoomName:function(){this.room.isOwner&&(this.changeRoomNameSwitcher=!0)},saveRoomName:function(){var t=this;if(this.room.isOwner){if(null===this.room.name||0===this.room.name.length)return void(this.changeRoomNameErrorText="Empty name.");this.changeRoomNameErrorText=null;this.socket.request("room.update",{id:this.room.id,owner:this.$root.getUser(),name:this.room.name}).then((function(e){t.changeRoomNameSwitcher=!1}))}},changedStage:function(){switch(this.stage){case 0:this.canVote=!1,this.$refs.stopwatch.stopTimer();break;case 1:this.hasVote?this.canVote=!0:this.canVote=!1,this.$refs.stopwatch.isRunning||this.$refs.stopwatch.startTimer();break;case 2:this.canVote=!1}},saveVisitHistory:function(){var t=[];localStorage.visitHistory&&(t=JSON.parse(localStorage.visitHistory));for(var e=0;e<t.length;e++)if(t[e].hash===this.room.hash){t.splice(e,1);break}t.unshift({name:this.room.name,hash:this.room.hash}),t.splice(5),localStorage.visitHistory=JSON.stringify(t)}},computed:{canNextButton:function(){return 2===this.stage&&this.$refs.tasksList.haveUnratedTasks&&!this.$refs.cards.approve},canSkipButton:function(){return!this.canNextButton&&null!==this.room.task&&(1===this.stage||2===this.stage)},canReVoteButton:function(){return 2===this.stage&&this.$refs.tasksList.haveUnratedTasks&&this.$refs.cards.approve},anchorAttributes:function(){return{target:"blank",rel:"nofollow"}},fullPageUrl:function(){return n.g.location.href}},watch:{stage:function(){this.changedStage()}}};var St=n(5212),jt={insert:"head",singleton:!1};w()(St.Z,jt);St.Z.locals;const $t=(0,l.Z)(_t,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4 order-md-2 mb-4",staticStyle:{position:"inherit"}},[e("users-list",{attrs:{socket:t.socket,users:t.users,room:t.room,average:t.average}}),t._v(" "),e("chat",{attrs:{socket:t.socket,room:t.room}})],1),t._v(" "),e("div",{staticClass:"col-md-8 order-md-1"},[e("div",{staticClass:"d-flex justify-content-between align-items-center mb-3"},[e("div",{staticClass:"d-flex justify-content-between align-items-center gap-2"},[t.changeRoomNameSwitcher?t._e():e("h4",[t._v(t._s(t.room.name))]),t._v(" "),t.room.isOwner&&t.changeRoomNameSwitcher?e("form",{on:{submit:function(e){return e.preventDefault(),t.saveRoomName.apply(null,arguments)}}},[e("text-error",{attrs:{text:t.changeRoomNameErrorText}}),t._v(" "),e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.room.name,expression:"room.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter room name"},domProps:{value:t.room.name},on:{input:function(e){e.target.composing||t.$set(t.room,"name",e.target.value)}}}),t._v(" "),t._m(0)])],1):t._e(),t._v(" "),""!==t.room.name&&t.room.isOwner&&!t.changeRoomNameSwitcher?e("span",{staticClass:"badge bg-secondary-subtle text-secondary-emphasis",attrs:{"data-bs-toggle":"modal","data-bs-target":"#passwordModal",title:"Edit room's name",role:"button"},on:{click:t.editRoomName}},[e("i",{staticClass:"fa fa-fw fa-pencil",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),""!==t.room.name&&t.room.isOwner&&!t.changeRoomNameSwitcher?e("span",{staticClass:"badge bg-secondary-subtle text-secondary-emphasis",attrs:{role:"button",title:"Set password"},on:{click:t.setPassword}},[e("i",{staticClass:"fa fa-fw",class:{"fa-unlock":!t.room.hasPassword,"fa-lock":t.room.hasPassword},attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),""===t.room.name||t.room.isOwner?t._e():e("span",{staticClass:"badge bg-secondary-subtle text-secondary-emphasis",attrs:{role:"button"}},[e("i",{staticClass:"fa",class:{"fa-unlock":!t.room.hasPassword,"fa-lock":t.room.hasPassword},attrs:{"aria-hidden":"true"}})]),t._v(" "),""===t.room.name||t.changeRoomNameSwitcher?t._e():e("span",{staticClass:"badge bg-secondary-subtle text-secondary-emphasis",attrs:{role:"button","data-bs-toggle":"modal","data-bs-target":"#qrcodeModal"}},[e("i",{staticClass:"fa fa-fw fa-share",attrs:{"aria-hidden":"true"}})]),t._v(" "),t._m(1),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"qrcodeModal",tabindex:"-1","aria-labelledby":"qrcodeModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[t._m(2),t._v(" "),e("div",{staticClass:"modal-body",staticStyle:{"text-align":"center"}},[e("qrcode-vue",{attrs:{value:t.fullPageUrl,size:300,level:"H"}}),t._v(" "),e("a",{attrs:{href:t.fullPageUrl}},[t._v(t._s(t.fullPageUrl))])],1),t._v(" "),t._m(3)])])])]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:""!==t.room.name,expression:"room.name !== ''"}],staticClass:"badge bg-secondary-subtle text-secondary-emphasis"},[e("stopwatch",{ref:"stopwatch"})],1)]),t._v(" "),e("cards",{ref:"cards",attrs:{socket:t.socket,canVote:t.canVote,room:t.room,users:t.users}}),t._v(" "),e("transition",{attrs:{name:"fade"}},[t.room.isOwner?e("div",{staticClass:"row ml-0"},[e("div",{staticClass:"d-flex gap-2"},[0===t.stage?e("button",{staticClass:"btn mr-3 col-md-3 mb-3 btn-primary",on:{click:t.startVote}},[t._v("Start vote")]):t._e(),t._v(" "),1===t.stage||2===t.stage?e("button",{staticClass:"btn mr-3 mb-3 col-md-3 btn-primary",on:{click:t.resetVote}},[t._v("Reset")]):t._e(),t._v(" "),t.canSkipButton?e("button",{staticClass:"btn mr-3 mb-3 col-md-3 btn-primary",on:{click:t.skipVote}},[t._v("Skip")]):t._e(),t._v(" "),t.canReVoteButton?e("button",{staticClass:"btn mr-3 col-md-3 mb-3 btn-primary",on:{click:t.revote}},[t._v("Revote")]):t._e()])]):t._e()]),t._v(" "),e("transition",{attrs:{name:"fade"}},[t.room.task?e("div",{staticClass:"row ml-0 mr-0 mt-3 mb-3 pt-0"},[e("h4",{staticClass:"d-flex justify-content-between align-items-center mb-3"},[e("span",[t._v("Сurrent task")])]),t._v(" "),e("div",{staticClass:"mb-2 col-12"},[e("vue-markdown",{staticClass:"alert alert-success mb-0 p-2",attrs:{html:!1,anchorAttributes:t.anchorAttributes,source:t.room.task.text}})],1)]):t._e()]),t._v(" "),e("task-list",{ref:"tasksList",attrs:{socket:t.socket,room:t.room},on:{approve:t.onApprove}})],1)])}),[function(){var t=this._self._c;return t("div",{staticClass:"input-group-append"},[t("button",{staticClass:"btn btn-secondary",attrs:{type:"submit"}},[this._v("Save")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal fade",attrs:{id:"passwordModal",tabindex:"-1","aria-labelledby":"passwordModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h1",{staticClass:"modal-title fs-5",attrs:{id:"passwordModalLabel"}},[t._v("New message")]),t._v(" "),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})]),t._v(" "),e("div",{staticClass:"modal-body"},[e("form",[e("div",{staticClass:"mb-3"},[e("label",{staticClass:"col-form-label",attrs:{for:"recipient-name"}},[t._v("Recipient:")]),t._v(" "),e("input",{staticClass:"form-control",attrs:{type:"text",id:"recipient-name"}})]),t._v(" "),e("div",{staticClass:"mb-3"},[e("label",{staticClass:"col-form-label",attrs:{for:"message-text"}},[t._v("Message:")]),t._v(" "),e("textarea",{staticClass:"form-control",attrs:{id:"message-text"}})])])]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"}},[t._v("Close")]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"}},[t._v("Save")])])])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-header"},[e("h1",{staticClass:"modal-title fs-5",attrs:{id:"qrcodeModalLabel"}},[t._v("Share QR Code")]),t._v(" "),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})])},function(){var t=this._self._c;return t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"}},[this._v("Close")])])}],!1,null,"f97f44d2",null).exports;const Et={props:["socket"],components:{VueMarkdown:P(),Timer:d},data:function(){return{news:[]}},mounted:function(){var t=this;this.socket.request("new.get",{}).then((function(e){t.news=e.data}));this.$root.setTitle()},methods:{},computed:{anchorAttributes:function(){return{target:"blank",rel:"nofollow"}}}};const Tt=(0,l.Z)(Et,(function(){var t=this,e=t._self._c;return e("div",[e("h4",{staticClass:"d-flex justify-content-between align-items-center my-4"},[e("span",{staticClass:"text-muted"},[t._v("News")]),t._v(" "),e("span",{staticClass:"badge badge-secondary"},[t._v(t._s(t.news.length))])]),t._v(" "),t._l(t.news,(function(n){return e("div",{key:n.id,staticClass:"card mb-4"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v(t._s(n.title))]),t._v(" "),e("vue-markdown",{attrs:{html:!1,anchorAttributes:t.anchorAttributes,source:n.text}}),t._v(" "),e("p",{staticClass:"card-text"},[e("small",{staticClass:"text-muted"},[t._v("Created at "),e("timer",{attrs:{created:n.created_at}})],1)])],1)])}))],2)}),[],!1,null,null,null).exports;const Ot={props:["socket"],mounted:function(){this.$root.setTitle()},components:{VueMarkdown:P()},computed:{anchorAttributes:function(){return{target:"blank",rel:"nofollow"}}}};var Bt=n(9130),Nt={insert:"head",singleton:!1};w()(Bt.Z,Nt);Bt.Z.locals;const Vt=(0,l.Z)(Ot,(function(){return(0,this._self._c)("vue-markdown",{attrs:{html:!0,anchorAttributes:this.anchorAttributes,source:"##### About\n\nThis site has been designed to carry out poker planning within the team. The goal was to develop a user-friendly online scheduling tool so that participants can vote from both a PC and a mobile device. As a result, this project can be used for planning poker online and offline, via mobile devices.\n\n> Planning poker, also called Scrum poker, is a consensus-based, gamified technique for estimating, mostly used for timeboxing in Agile principles. In planning poker, members of the group make estimates by playing numbered cards face-down to the table, instead of speaking them aloud. The cards are revealed, and the estimates are then discussed. By hiding the figures in this way, the group can avoid the cognitive bias of anchoring, where the first number spoken aloud sets a precedent for subsequent estimates.\n>\n> Planning poker is a variation of the Wideband delphi method. It is most commonly used in agile software development, in particular in Scrum and Extreme Programming.\n>\n> The method was first defined and named by James Grenning in 2002 and later popularized by Mike Cohn in the book Agile Estimating and Planning, whose company trade marked the term and a digital online tool.\n>\n>@wikipedia.org"}})}),[],!1,null,null,null).exports;s.ZP.use(r.ZP);const Pt=new r.ZP({mode:"history",routes:[{path:"/",name:"home",component:x},{path:"/room/:hash",name:"room",component:$t,props:!0},{path:"/news",name:"news",component:Tt},{path:"/about",name:"about",component:Vt}]});const Lt={props:{socket:{required:!0}},data:function(){return{}}};const Ut=(0,l.Z)(Lt,(function(){return(0,this._self._c)("router-view",{attrs:{socket:this.socket}})}),[],!1,null,null,null).exports;const Dt={props:[],data:function(){return{list:[{title:"Home",route:"home",params:{}},{title:"News",route:"news",params:{}},{title:"About",route:"about",params:{}}]}},created:function(){},methods:{isCurrent:function(t){return this.$route.name===t}}};const Rt=(0,l.Z)(Dt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarNav"}},[e("ul",{staticClass:"navbar-nav"},t._l(t.list,(function(n){return e("li",{key:n.route,staticClass:"nav-item",class:{active:t.isCurrent(n.route)}},[e("router-link",{staticClass:"nav-link",attrs:{to:{name:n.route,params:n.params}}},[t._v("\n\t\t\t\t"+t._s(n.title)),t.isCurrent(n.route)?e("span",{staticClass:"sr-only"},[t._v("(current)")]):t._e()])],1)})),0)])}),[],!1,null,null,null).exports;const qt={props:{socket:{required:!0}},data:function(){return{quantity:0}},created:function(){var t=this;this.socket.listener("users.online.update",(function(e){t.quantity=e.quantity}))}};const Ft=(0,l.Z)(qt,(function(){var t=this;return(0,t._self._c)("span",[t._v("Online "+t._s(t.quantity)+" users")])}),[],!1,null,null,null).exports;var zt=n(6123),It=n.n(zt);s.ZP.use(It());new s.ZP({el:"#app",router:Pt,components:{App:Ut,MenuList:Rt,Statistics:Ft},data:{name:"",socket:null,disconnect:!1},created:function(){this.socket=new o.Z(document.body.dataset.socket),this.socket.onOpen(this.onConnected),this.socket.onClose(this.onDisconnected)},destroyed:function(){this.socket.offOpen(this.onConnected),this.socket.offClose(this.onDisconnected)},mounted:function(){localStorage.name&&(this.name=localStorage.name)},methods:{onConnected:function(){this.disconnect=!1,this.socket.send({action:"user.connect",name:this.name,uid:this.getUser()})},onDisconnected:function(){this.disconnect=!0},changedName:function(t){localStorage.name=this.name=t},getUser:function(){return this.$cookies.get("uid")},setTitle:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";document.title=""!==t?t+" - "+n.g.meta.raw.name:n.g.meta.raw.name+" - "+n.g.meta.raw.tagline}}})},2449:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var s=n(7897),o=n.n(s),r=n(1519),a=n.n(r)()(o());a.push([t.id,'.flipper .front[data-v-3ac0a6ae]{background:linear-gradient(var(--ang,180deg),#015965,#36bbce);border-radius:.5em;box-shadow:0 0 5px #000;height:var(--h,150px);overflow:hidden;width:var(--w,100%)}.flipper .front[data-v-3ac0a6ae],.flipper .front[data-v-3ac0a6ae]:after,.flipper .front[data-v-3ac0a6ae]:before{--strip-stop:100%;--strip-f:.25;--strip-stop-0:calc(var(--strip-f)*var(--strip-stop));--strip-stop-1:calc(var(--strip-stop) - var(--strip-stop-0));--strip-end:red;--strip-mid:transparent;--strip-list:var(--strip-end) 0,var(--strip-end) var(--strip-stop-0),var(--strip-mid) 0,var(--strip-mid) var(--strip-stop-1),var(--strip-end) 0,var(--strip-end) var(--strip-stop);--joint-list:var(--joint-end,red) var(--joint-stop,25%),var(--joint-mid,transparent) 0;--joint-0:linear-gradient(135deg,var(--joint-list));--joint-1:linear-gradient(-135deg,var(--joint-list));--joint-2:linear-gradient(-45deg,var(--joint-list));--joint-3:linear-gradient(45deg,var(--joint-list))}.flipper .front[data-v-3ac0a6ae]:after,.flipper .front[data-v-3ac0a6ae]:before{--i:0;--noti:calc(1 - var(--i));--sgni:calc(var(--i)*2 - 1);--c:hsl(0,0%,0%,var(--i));--notc:hsl(0,0%,0%,var(--noti));--fill:linear-gradient(var(--c),var(--c));--c0:RGB(calc(var(--i)*54 + var(--noti)*1),calc(var(--i)*187 + var(--noti)*89),calc(var(--i)*206 + var(--noti)*101));--c1:RGB(calc(var(--i)*1 + var(--noti)*54),calc(var(--i)*89 + var(--noti)*187),calc(var(--i)*101 + var(--noti)*206));bottom:0;content:"";left:0;-webkit-mask:var(--mask);mask:var(--mask);-webkit-mask-position:var(--mask-o,50% 50%);mask-position:var(--mask-o,50% 50%);-webkit-mask-size:var(--mask-d);mask-size:var(--mask-d);position:absolute;right:0;top:0}.flipper .front[data-v-3ac0a6ae]:after{--i:1}.flipper .front[data-v-3ac0a6ae]{--d:2em;--ang:45deg;--strip-stop:calc(var(--d)*0.0625);--narr:var(--strip-list);outline:1px solid hsla(0,0%,100%,.5);outline-offset:-5px;position:relative}.flipper .front[data-v-3ac0a6ae]:after,.flipper .front[data-v-3ac0a6ae]:before{--strip-end:var(--c);--strip-mid:var(--notc);--strip-stop:var(--d);--mask:linear-gradient(90deg,var(--c),var(--notc)),repeating-linear-gradient(45deg,var(--narr)),repeating-linear-gradient(90deg,var(--strip-list)),repeating-linear-gradient(-45deg,var(--strip-list));background:var(--c0);-webkit-mask-composite:source-in,source-in,source-in,source-over;mask-composite:intersect}',"",{version:3,sources:["webpack://./resources/js/components/Cards.vue"],names:[],mappings:"AA0BA,iCAMC,6DAAA,CADA,kBAAA,CAEA,uBAAA,CAHA,qBAAA,CAHA,eAAA,CAEA,mBAtBD,CA4BC,gHACC,iBAAA,CACA,aAAA,CACA,qDAAA,CACA,4DAAA,CACA,eAAA,CACA,uBAAA,CACA,kLAAA,CAOA,sFAAA,CAGA,mDAAA,CAEA,oDAAA,CAEA,mDAAA,CAEA,kDAzBF,CA6BC,+EACC,KAAA,CACA,yBAAA,CACA,2BAAA,CACA,yBAAA,CACA,+BAAA,CACA,yCAAA,CAGA,oHAAA,CACA,oHAAA,CAFkB,QAAA,CASlB,UAAA,CAT6B,MAAA,CAG7B,wBAAA,CACI,gBAAA,CACJ,2CAAA,CACI,mCAAA,CACJ,+BAAA,CACI,uBAAA,CATJ,iBAAA,CACQ,OAAA,CAAR,KAfF,CA2BC,uCAAU,KAxBX,CA2BA,iCAKC,OAAA,CACA,WAAA,CACA,kCAAA,CACA,wBAAA,CAPA,oCAAA,CACA,mBAAA,CAEA,iBArBD,CA2BC,+EAEC,oBAAA,CACA,uBAAA,CACA,qBAAA,CACA,sMAAA,CAJA,oBAAA,CASA,gEAAA,CACI,wBAzBN",sourcesContent:["\n$w: 100%;\n$h: 150px;\n$f: calc($h / $w);\n$n: 7;\n$g: 1em;\n$c0: #015965;//#f2b6a6;//\n$c1: #36BBCE;//#d82c30;//\n\n@function int_ch($ch0, $ch1) {\n\t@return calc(\n\t\tvar(--i)*#{$ch1} + var(--noti)*#{$ch0})\n}\n\n@function int_col($c0, $c1) {\n\t$ch: 'red' 'green' 'blue';\n\t$n: length($ch);\n\t$args: ();\n\t\n\t@each $fn in $ch {\n\t\t$args: $args, int_ch(call(get-function($fn), $c0), call(get-function($fn), $c1))\n\t}\n\t\n\t@return RGB(#{$args})\n}\n\n.flipper .front {\n\toverflow: hidden;\n\t//position: relative;\n\twidth: var(--w, #{$w});\n\theight: var(--h, #{$h});\n\tborder-radius: .5em;\n\tbackground: linear-gradient(var(--ang, 180deg), $c0, $c1);\n\tbox-shadow: 0px 0px 5px #000;\n\t\n\t&, &:before, &:after {\n\t\t--strip-stop: 100%;\n\t\t--strip-f: .25;\n\t\t--strip-stop-0: calc(var(--strip-f)*var(--strip-stop));\n\t\t--strip-stop-1: calc(var(--strip-stop) - var(--strip-stop-0));\n\t\t--strip-end: red;\n\t\t--strip-mid: transparent;\n\t\t--strip-list:\n\t\t\tvar(--strip-end) 0,\n\t\t\tvar(--strip-end) var(--strip-stop-0), \n\t\t\tvar(--strip-mid) 0, \n\t\t\tvar(--strip-mid) var(--strip-stop-1), \n\t\t\tvar(--strip-end) 0, \n\t\t\tvar(--strip-end) var(--strip-stop);\n\t\t--joint-list: \n\t\t\tvar(--joint-end, red) var(--joint-stop, 25%), \n\t\t\tvar(--joint-mid, transparent) 0;\n\t\t--joint-0: \n\t\t\tlinear-gradient(135deg, var(--joint-list));\n\t\t--joint-1: \n\t\t\tlinear-gradient(-135deg, var(--joint-list));\n\t\t--joint-2:\n\t\t\tlinear-gradient(-45deg, var(--joint-list));\n\t\t--joint-3: \n\t\t\tlinear-gradient(45deg, var(--joint-list));\n\t}\n\t\n\t&:before, &:after {\n\t\t--i: 0;\n\t\t--noti: calc(1 - var(--i));\n\t\t--sgni: calc(2*var(--i) - 1);\n\t\t--c: hsl(0, 0%, 0%, var(--i));\n\t\t--notc: hsl(0, 0%, 0%, var(--noti));\n\t\t--fill: linear-gradient(var(--c), var(--c));\n\t\tposition: absolute;\n\t\ttop: 0; right: 0; bottom: 0; left: 0;\n\t\t--c0: #{int_col($c0, $c1)};\n\t\t--c1: #{int_col($c1, $c0)};\n\t\t-webkit-mask: var(--mask);\n\t\t\t\t\t\tmask: var(--mask);\n\t\t-webkit-mask-position: var(--mask-o, 50% 50%);\n\t\t\t\t\t\tmask-position: var(--mask-o, 50% 50%);\n\t\t-webkit-mask-size: var(--mask-d);\n\t\t\t\t\t\tmask-size: var(--mask-d);\n\t\tcontent: ''\n\t}\n\t\n\t&:after { --i: 1 }\n}\n\n.flipper .front {\n\toutline: 1px solid rgba(255,255,255,0.5);\n\toutline-offset: -5px;\n\n\tposition: relative;\n\t--d: 2em;\n\t--ang: 45deg;\n\t--strip-stop: calc(.0625*var(--d));\n\t--narr: var(--strip-list);\n\t\n\t&:before, &:after {\n\t\tbackground: var(--c0);\n\t\t--strip-end: var(--c);\n\t\t--strip-mid: var(--notc);\n\t\t--strip-stop: var(--d);\n\t\t--mask: \n\t\t\tlinear-gradient(90deg, var(--c), var(--notc)), \n\t\t\trepeating-linear-gradient(45deg, var(--narr)), \n\t\t\trepeating-linear-gradient(90deg, var(--strip-list)), \n\t\t\trepeating-linear-gradient(-45deg, var(--strip-list));\n\t\t-webkit-mask-composite: source-in, source-in, source-in, source-over;\n\t\t\t\t\t\tmask-composite: intersect\n\t}\n}\n"],sourceRoot:""}]);const i=a},6174:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var s=n(7897),o=n.n(s),r=n(1519),a=n.n(r)()(o());a.push([t.id,".fade-enter-active[data-v-3ac0a6ae]{transition:all .5s}.fade-enter[data-v-3ac0a6ae],.fade-leave-to[data-v-3ac0a6ae]{opacity:0}.poker-card>div[data-v-3ac0a6ae]{cursor:pointer}.poker-card-front[data-v-3ac0a6ae]{-webkit-text-stroke:1px #000;-webkit-touch-callout:none;background:linear-gradient(to left top,transparent 48.9%,rgba(0,0,0,.08) 51%,rgba(0,0,0,.08) 78%,transparent 80%),linear-gradient(to left top,rgba(0,0,0,.08) 28%,transparent 30%);background-size:.5em 1.5em;border-radius:.5em;box-shadow:0 0 5px rgba(0,0,0,.7);color:#eee;height:100%;letter-spacing:0;line-height:100%;outline:1px solid rgba(0,0,0,.2);outline-offset:-5px;position:relative;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;white-space:nowrap;width:100%}@media (max-width:576px){.poker-card-front[data-v-3ac0a6ae]{font-size:2rem}}@media (max-width:992px){.poker-card-front[data-v-3ac0a6ae]{font-size:2rem}}.poker-card-front div.view[data-v-3ac0a6ae]{font-size:3.3rem;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);z-index:10}.flip-container[data-v-3ac0a6ae]{perspective:1000px}.flip-container.hover .flipper[data-v-3ac0a6ae]{transform:rotateY(180deg)}.back[data-v-3ac0a6ae],.flip-container[data-v-3ac0a6ae],.flipper[data-v-3ac0a6ae],.front[data-v-3ac0a6ae]{width:100%}.flipper[data-v-3ac0a6ae]{position:relative;transform-style:preserve-3d;transition:.6s ease-in-out}.back[data-v-3ac0a6ae],.front[data-v-3ac0a6ae]{backface-visibility:hidden;bottom:0;left:0;position:absolute;right:0;top:0}.front[data-v-3ac0a6ae]{transform:rotateY(0deg);z-index:2}.back[data-v-3ac0a6ae]{transform:rotateY(180deg);transition:all .5s}.editable .poker-card-front[data-v-3ac0a6ae]{-webkit-text-stroke:0;font-size:.7rem;font-weight:100;line-height:10px;padding:5px}.editable input[data-v-3ac0a6ae]{width:50px}.new-card[data-v-3ac0a6ae]{font-size:2rem}.shake[data-v-3ac0a6ae]{animation:tilt-n-move-shaking2-3ac0a6ae .5s;animation-iteration-count:infinite}@keyframes shake-3ac0a6ae{0%{transform:rotate(0deg)}10%{transform:rotate(2deg)}20%{transform:rotate(4deg)}30%{transform:rotate(2deg)}40%{transform:rotate(0deg)}50%{transform:rotate(-2deg)}60%{transform:rotate(-4deg)}70%{transform:rotate(-2deg)}80%{transform:rotate(0deg)}90%{transform:rotate(2deg)}to{transform:rotate(0deg)}}@keyframes tilt-n-move-shaking-3ac0a6ae{0%{transform:translate(0) rotate(0deg)}25%{transform:translate(5px,5px) rotate(5deg)}50%{transform:translate(0) rotate(0deg)}75%{transform:translate(-5px,5px) rotate(-5deg)}to{transform:translate(0) rotate(0deg)}}@keyframes tilt-n-move-shaking2-3ac0a6ae{0%{transform:translate(0) rotate(0deg)}50%{transform:translate(2px,10px) rotate(-5deg)}to{transform:translate(0) rotate(0deg)}}","",{version:3,sources:["webpack://./resources/js/components/Cards.vue"],names:[],mappings:"AA+hBA,oCACA,kBACA,CACA,6DACA,SACA,CAEA,iCACA,cAEA,CAEA,mCASA,4BAAA,CAMA,0BAAA,CAHA,kLAAA,CACA,0BAAA,CAHA,kBAAA,CAYA,iCAAA,CAfA,UAAA,CAJA,WAAA,CAGA,gBAAA,CADA,gBAAA,CAkBA,gCAAA,CACA,mBAAA,CAvBA,iBAAA,CAGA,iBAAA,CAYA,wBAAA,CAEA,qBAAA,CAEA,gBAAA,CAZA,kBAAA,CANA,UAuBA,CAEA,yBACA,mCACA,cACA,CACA,CAEA,yBACA,mCACA,cACA,CACA,CAEA,4CAKA,gBAAA,CAFA,QAAA,CAFA,iBAAA,CACA,OAAA,CAIA,8BAAA,CAFA,UAGA,CAGA,iCACA,kBACA,CAGA,gDACA,yBACA,CAOA,0GAJA,UAaA,CATA,0BAIA,iBAAA,CAFA,2BAAA,CADA,0BAQA,CAGA,+CACA,0BAAA,CAIA,QAAA,CADA,MAAA,CAFA,iBAAA,CAIA,OAAA,CAHA,KAIA,CAGA,wBAGA,uBAAA,CAFA,SAGA,CAGA,uBACA,yBAAA,CACA,kBACA,CACA,6CAKA,qBAAA,CAJA,eAAA,CACA,eAAA,CACA,gBAAA,CACA,WAEA,CACA,iCACA,UACA,CACA,2BACA,cACA,CAEA,wBACA,2CAAA,CACA,kCACA,CAEA,0BACA,GAAA,sBAAA,CACA,IAAA,sBAAA,CACA,IAAA,sBAAA,CACA,IAAA,sBAAA,CACA,IAAA,sBAAA,CACA,IAAA,uBAAA,CACA,IAAA,uBAAA,CACA,IAAA,uBAAA,CACA,IAAA,sBAAA,CACA,IAAA,sBAAA,CACA,GAAA,sBAAA,CACA,CAEA,wCACA,GAAA,mCAAA,CACA,IAAA,yCAAA,CACA,IAAA,mCAAA,CACA,IAAA,2CAAA,CACA,GAAA,mCAAA,CACA,CAEA,yCACA,GAAA,mCAAA,CACA,IAAA,2CAAA,CACA,GAAA,mCAAA,CACA",sourcesContent:['<template>\n\t<div class="row mb-0 pt-0" :class="{\'approve\': approve}">\n\t\t<div v-if="room.isOwner" class="btn-toolbar col-12 d-flex justify-content-between align-items-center mb-2">\n\t\t\t<div class="btn-group mr-3" role="group">\n\t\t\t\t<div class="btn-group" role="group">\n\t\t\t\t\t<button class="btn btn-primary btn-sm dropdown-toggle" type="button" id="dropdownMenu2" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{ (room.cardset && room.cardset.name) || \'Default\' }}</button>\n\t\t\t\t\t<div class="dropdown-menu">\n\t\t\t\t\t\t<button v-for="(cardset, index) in cardsets" :key="index" @click="setCardSet(index)" class="dropdown-item btn-sm" type="button">\n\t\t\t\t\t\t\t{{ index }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="btn-group" role="group">\n\t\t\t\t<button v-if="!editing" type="button" @click="editing = !editing" class="btn btn-sm" :class="{\'btn-success\': editing, \'btn-outline-success\': !editing}">Edit card set</button>\n\t\t\t\t<button v-if="editing" type="button" @click="saveCardSet" class="btn btn-sm btn-success">Save card set</button>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="col-12">\n\t\t\t<div v-if="approve" class="alert alert-success mb-2" role="alert">\n\t\t\t\tYou must confirm the vote for the current task.\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div\n\t\t\tv-for="(card, index) in cards"\n\t\t\t:key="card.view"\n\t\t\tclass="poker-card mb-3 d-flex col-3 col-md-2 justify-content-between"\n\t\t>\n\t\t\t<div class="flip-container" :class="{\'hover\': canVote || (approve && isApprove(card.view)) || editing}">\n\t\t\t\t<div class="flipper">\n\t\t\t\t\t<div class="front" @click="cardShake(card.view)" :class="{\'shake\': card.shake}"></div>\n\t\t\t\t\t<div class="back" :class="{\'editable\': editing}">\n\t\t\t\t\t\t<div class="poker-card-front" :style="\'background-color: \'+card.color+\';\'" :class="{\'shake\': card.shake}"  @click.prevent="vote(card.point, card.view)">\n\t\t\t\t\t\t\t<vue-markdown\n\t\t\t\t\t\t\t\tv-if="!editing"\n\t\t\t\t\t\t\t\tclass="view"\n\t\t\t\t\t\t\t\t:html="false"\n\t\t\t\t\t\t\t\t:anchorAttributes="anchorAttributes"\n\t\t\t\t\t\t\t\t:source="card.view"\n\t\t\t\t\t\t\t></vue-markdown>\n\t\t\t\t\t\t\t<div v-if="editing">\n\t\t\t\t\t\t\t\t<div class="input-group input-group-sm mb-1">\n\t\t\t\t\t\t\t\t\t<input v-model="card.view" type="text" class="form-control" aria-label="Small" aria-describedby="view">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="input-group input-group-sm mb-1">\n\t\t\t\t\t\t\t\t\t<input v-model="card.point" type="text" class="form-control" aria-label="Small" aria-describedby="point">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="input-group input-group-sm mb-1">\n\t\t\t\t\t\t\t\t\t<input v-model="card.color" type="text" class="form-control" aria-label="Small" aria-describedby="color">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="input-group input-group-sm mb-1">\n\t\t\t\t\t\t\t\t\t<button type="button" @click="deleteCard(index)" class="btn btn-danger btn-sm">Delete card</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div v-if="editing" class="poker-card mb-2 d-flex col-3 col-md-2 pt-3 justify-content-between">\n\t\t\t<div class="flip-container hover">\n\t\t\t\t<div class="flipper">\n\t\t\t\t\t<div class="front">\n\t\t\t\t\t\t<img :src="cover" width="100%">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="back">\n\t\t\t\t\t\t<div class="poker-card-front new-card" @click="newCard()">\n\t\t\t\t\t\t\t<span>New</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\timport VueMarkdown from \'vue-markdown\';\n\n\timport Prism from \'prismjs\';\n\timport \'prismjs/themes/prism.css\';\n\n\timport \'prismjs/components/prism-markup-templating.js\';\n\timport \'prismjs/components/prism-php\';\n\timport \'prismjs/components/prism-bash\';\n\t\n\timport CardSets from \'@/js/modules/CardSets.ts\';\n\timport Editable from \'@/js/components/Editable\';\n\n\texport default {\n\t\tprops: [\'socket\', \'canVote\', \'room\', \'users\'],\n\n\t\tcomponents: {\n\t\t\tEditable,\n\t\t\tVueMarkdown,\n\t\t},\n\n\t\tdata: () => ({\n\t\t\tapprove: false,\n\t\t\tcover: \'/images/cards/cover_min.png\',\n\t\t\tediting: false,\n\t\t\tcards: [],\n\t\t\tcardsets: {},\n\t\t}),\n\n\t\tmounted: function() {\n\t\t\tthis.cardsets = CardSets;\n\n\t\t\tthis.socket.listener(\'room.card.shake\', (data) => {\n\t\t\t\tfor (var i = 0; i < this.cards.length; i++) {\n\t\t\t\t\tif (this.cards[i].view === data.view) {\n\t\t\t\t\t\tthis.$set(this.cards[i], \'shake\', true);\n\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.$set(this.cards[i], \'shake\', false);\n\t\t\t\t\t\t}, 500);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, \'card\');\n\t\t},\n\n\t\tdestroyed() {\n\t\t\tthis.socket.offGroup(\'card\');\n\t\t},\n\n\t\tmethods: {\n\t\t\tvote(point, view) {\n\t\t\t\tif (this.editing) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (this.canVote) {\n\t\t\t\t\tthis.selectPoint = point;\n\t\t\t\t\tthis.socket.send({\n\t\t\t\t\t\t\'action\': \'room.vote\',\n\t\t\t\t\t\t\'room\': this.room.hash,\n\t\t\t\t\t\t\'point\': point,\n\t\t\t\t\t\t\'view\': view,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (this.approve) {\n\t\t\t\t\tthis.socket.send({\n\t\t\t\t\t\t\'action\': \'room.task.approve\',\n\t\t\t\t\t\t\'id\': this.room.task.id,\n\t\t\t\t\t\t\'point\': point,\n\t\t\t\t\t\t\'view\': view,\n\t\t\t\t\t});\n\t\t\t\t\tthis.stopApprove();\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0; i < this.cards.length; i++) {\n\t\t\t\t\tif (this.cards[i].view === view) {\n\t\t\t\t\t\tthis.$set(this.cards[i], \'shake\', true);\n\n\t\t\t\t\t\tclearTimeout(this.cards[i][\'animation\']);\n\t\t\t\t\t\tthis.$set(this.cards[i], \'animation\', setTimeout(() => {\n\t\t\t\t\t\t\tthis.$set(this.cards[i], \'shake\', false);\n\t\t\t\t\t\t}, 500));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tstartApprove() {\n\t\t\t\tif (this.room.task !== null) {\n\t\t\t\t\tthis.approve = true;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tstopApprove() {\n\t\t\t\tthis.approve = false;\n\t\t\t},\n\n\t\t\t// Easter eggs\n\t\t\tcardShake(view) {\n\t\t\t\tthis.socket.send({\n\t\t\t\t\t\'action\': \'room.card.shake\',\n\t\t\t\t\t\'view\': view,\n\t\t\t\t\t\'room\': this.room.hash,\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tnewCard() {\n\t\t\t\tthis.cards.push({view: \'Card \'+(this.cards.length+1), point: \'0\', color: \'#\'});\n\t\t\t},\n\n\t\t\tdeleteCard(id) {\n\t\t\t\tif (this.cards.length === 2) {\n\t\t\t\t\talert(\'Minimum number of cards in a set 2.\');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (confirm(\'Delete this card?\')) {\n\t\t\t\t\tthis.cards.splice(id, 1);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tsaveCardSet() {\n\t\t\t\tif (this.room.isOwner) {\n\t\t\t\t\tlet promise = this.socket.request(\'room.update\', {\n\t\t\t\t\t\tid: this.room.id,\n\t\t\t\t\t\towner: this.$root.getUser(),\n\t\t\t\t\t\tcardset: {name: \'Custom\', \'cards\': this.cards},\n\t\t\t\t\t}).then((result) => {\n\t\t\t\t\t\tthis.editing = false;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcanselEditing() {\n\t\t\t\tthis.editing = false;\n\t\t\t},\n\n\t\t\tsetCardSet(name) {\n\t\t\t\tif (this.room.isOwner) {\n\t\t\t\t\tlet promise = this.socket.request(\'room.update\', {\n\t\t\t\t\t\tid: this.room.id,\n\t\t\t\t\t\towner: this.$root.getUser(),\n\t\t\t\t\t\tcardset: {name: name},\n\t\t\t\t\t}).then((result) => {\n\t\t\t\t\t\tthis.editing = false;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tisApprove(view) {\n\t\t\t\tfor (let i = 0; i < this.users.length; i++) {\n\t\t\t\t\tconst user = this.users[i];\n\t\t\t\t\tif (user.voteView === view)\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tcomputed: {\n\t\t\tanchorAttributes() {\n\t\t\t\treturn {\n\t\t\t\t\ttarget: \'blank\',\n\t\t\t\t\trel: \'nofollow\',\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\n\t\twatch: {\n\t\t\t\'room.task\'() {\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tPrism.highlightAll();\n\t\t\t\t});\n\t\t\t},\n\t\t\t\'room.cardset\'(n, o) {\n\t\t\t\tif (n.name !== undefined) {\n\t\t\t\t\tif (n.name === \'Custom\') {\n\t\t\t\t\t\tthis.cards = n.cards;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (let name in this.cardsets) {\n\t\t\t\t\t\t\tif (name === n.name) {\n\t\t\t\t\t\t\t\tthis.cards = this.cardsets[name];\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.cards = this.cardsets.Default;\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t}\n<\/script>\n\n<style scoped>\n\t.fade-enter-active {\n\t\ttransition: all .5s;\n\t}\n\t.fade-enter, .fade-leave-to {\n\t\topacity: 0;\n\t}\n\n\t.poker-card > div {\n\t\tcursor: pointer;\n\t\t/* border-radius: 5px; */\n\t}\n\n\t.poker-card-front {\n\t\tposition: relative;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\ttext-align: center;\n\t\tline-height: 100%;\n\t\tletter-spacing: 0px;\n\t\tcolor: #eee;\n\t\twhite-space: nowrap;\n\t\t-webkit-text-stroke: 1px rgba(0,0,0,1);\n\t\tborder-radius: 0.5em;\n\n\t\tbackground: linear-gradient(to left top, rgba(0, 0, 0, 0) 48.9%, rgba(0, 0, 0, .08) 51%, rgba(0, 0, 0, .08) 78%, rgba(0, 0, 0, 0) 80%), linear-gradient(to left top, rgba(0, 0, 0, .08) 28%, rgba(0, 0, 0, 0) 30%);\n\t\tbackground-size: .5em 1.5em;\n\n\t\t-webkit-touch-callout: none; /* iOS Safari */\n\t\t-webkit-user-select: none;   /* Chrome/Safari/Opera */\n\t\t-khtml-user-select: none;    /* Konqueror */\n\t\t-moz-user-select: none;      /* Firefox */\n\t\t-ms-user-select: none;       /* Internet Explorer/Edge */\n\t\tuser-select: none;\n\n\t\tbox-shadow: 0px 0px 5px rgba(0,0,0,0.7);\n\t\toutline: 1px solid rgba(0,0,0,0.2);\n\t\toutline-offset: -5px;\n\t}\n\n\t@media (max-width: 576px) {\n\t\t.poker-card-front {\n\t\t\tfont-size: 2rem;\n\t\t}\n\t}\n\n\t@media (max-width: 992px) {\n\t\t.poker-card-front {\n\t\t\tfont-size: 2rem;\n\t\t}\n\t}\n\n\t.poker-card-front div.view {\n\t\tposition: absolute;\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\tz-index: 10;\n\t\tfont-size: 3.3rem;\n\t\ttransform: translate(-50%, -50%);\n\t}\n\n\t/* entire container, keeps perspective */\n\t.flip-container {\n\t\tperspective: 1000px;\n\t}\n\n\t/* flip the pane when hovered */\n\t.flip-container.hover .flipper {\n\t\ttransform: rotateY(180deg);\n\t}\n\n\t.flip-container, .front, .back {\n\t\twidth: 100%;\n\t}\n\n\t/* flip speed goes here */\n\t.flipper {\n\t\ttransition: ease-in-out 0.6s;\n\t\ttransform-style: preserve-3d;\n\n\t\tposition: relative;\n\n\t\twidth: 100%;\n\t\t/* 3:4 Aspect Ratio */\n\t\t/* padding-top: 150%; */\n\t}\n\n\t/* hide back of pane during swap */\n\t.front, .back {\n\t\tbackface-visibility: hidden;\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tbottom: 0;\n\t\tright: 0;\n\t}\n\n\t/* front pane, placed above back */\n\t.front {\n\t\tz-index: 2;\n\t\t/* for firefox 31 */\n\t\ttransform: rotateY(0deg);\n\t}\n\n\t/* back, initially hidden pane */\n\t.back {\n\t\ttransform: rotateY(180deg);\n\t\ttransition: all 0.5s;\n\t}\n\t.editable .poker-card-front {\n\t\tfont-size:  0.7rem;\n\t\tfont-weight: 100;\n\t\tline-height: 10px;\n\t\tpadding: 5px;\n\t\t-webkit-text-stroke: 0;\n\t}\n\t.editable input {\n\t\twidth: 50px;\n\t}\n\t.new-card {\n\t\tfont-size:  2rem;\n\t}\n\n\t.shake {\n\t\tanimation: tilt-n-move-shaking2 .5s;\n\t\tanimation-iteration-count: infinite;\n\t}\n\n\t@keyframes shake {\n\t\t0% { transform:   rotate(0deg); }\n\t\t10% { transform:  rotate(2deg); }\n\t\t20% { transform:  rotate(4deg); }\n\t\t30% { transform:  rotate(2deg); }\n\t\t40% { transform:  rotate(0deg); }\n\t\t50% { transform:  rotate(-2deg); }\n\t\t60% { transform:  rotate(-4deg); }\n\t\t70% { transform:  rotate(-2deg); }\n\t\t80% { transform:  rotate(0deg); }\n\t\t90% { transform:  rotate(2deg); }\n\t\t100% { transform: rotate(0deg); }\n\t}\n\n\t@keyframes tilt-n-move-shaking {\n\t\t0% { transform: translate(0, 0) rotate(0deg); }\n\t\t25% { transform: translate(5px, 5px) rotate(5deg); }\n\t\t50% { transform: translate(0, 0) rotate(0deg); }\n\t\t75% { transform: translate(-5px, 5px) rotate(-5deg); }\n\t\t100% { transform: translate(0, 0) rotate(0deg); }\n\t}\n\n\t@keyframes tilt-n-move-shaking2 {\n\t\t0% { transform: translate(0, 0) rotate(0deg); }\n\t\t50% { transform: translate(2px, 10px) rotate(-5deg); }\n\t\t100% { transform: translate(0, 0) rotate(0deg); }\n\t}\n</style>\n\n\n<style lang="scss" scoped>\n\t$w: 100%;\n\t$h: 150px;\n\t$f: calc($h / $w);\n\t$n: 7;\n\t$g: 1em;\n\t$c0: #015965;//#f2b6a6;//\n\t$c1: #36BBCE;//#d82c30;//\n\n\t@function int_ch($ch0, $ch1) {\n\t\t@return calc(\n\t\t\tvar(--i)*#{$ch1} + var(--noti)*#{$ch0})\n\t}\n\n\t@function int_col($c0, $c1) {\n\t\t$ch: \'red\' \'green\' \'blue\';\n\t\t$n: length($ch);\n\t\t$args: ();\n\t\t\n\t\t@each $fn in $ch {\n\t\t\t$args: $args, int_ch(call(get-function($fn), $c0), call(get-function($fn), $c1))\n\t\t}\n\t\t\n\t\t@return RGB(#{$args})\n\t}\n\n\t.flipper .front {\n\t\toverflow: hidden;\n\t\t//position: relative;\n\t\twidth: var(--w, #{$w});\n\t\theight: var(--h, #{$h});\n\t\tborder-radius: .5em;\n\t\tbackground: linear-gradient(var(--ang, 180deg), $c0, $c1);\n\t\tbox-shadow: 0px 0px 5px #000;\n\t\t\n\t\t&, &:before, &:after {\n\t\t\t--strip-stop: 100%;\n\t\t\t--strip-f: .25;\n\t\t\t--strip-stop-0: calc(var(--strip-f)*var(--strip-stop));\n\t\t\t--strip-stop-1: calc(var(--strip-stop) - var(--strip-stop-0));\n\t\t\t--strip-end: red;\n\t\t\t--strip-mid: transparent;\n\t\t\t--strip-list:\n\t\t\t\tvar(--strip-end) 0,\n\t\t\t\tvar(--strip-end) var(--strip-stop-0), \n\t\t\t\tvar(--strip-mid) 0, \n\t\t\t\tvar(--strip-mid) var(--strip-stop-1), \n\t\t\t\tvar(--strip-end) 0, \n\t\t\t\tvar(--strip-end) var(--strip-stop);\n\t\t\t--joint-list: \n\t\t\t\tvar(--joint-end, red) var(--joint-stop, 25%), \n\t\t\t\tvar(--joint-mid, transparent) 0;\n\t\t\t--joint-0: \n\t\t\t\tlinear-gradient(135deg, var(--joint-list));\n\t\t\t--joint-1: \n\t\t\t\tlinear-gradient(-135deg, var(--joint-list));\n\t\t\t--joint-2:\n\t\t\t\tlinear-gradient(-45deg, var(--joint-list));\n\t\t\t--joint-3: \n\t\t\t\tlinear-gradient(45deg, var(--joint-list));\n\t\t}\n\t\t\n\t\t&:before, &:after {\n\t\t\t--i: 0;\n\t\t\t--noti: calc(1 - var(--i));\n\t\t\t--sgni: calc(2*var(--i) - 1);\n\t\t\t--c: hsl(0, 0%, 0%, var(--i));\n\t\t\t--notc: hsl(0, 0%, 0%, var(--noti));\n\t\t\t--fill: linear-gradient(var(--c), var(--c));\n\t\t\tposition: absolute;\n\t\t\ttop: 0; right: 0; bottom: 0; left: 0;\n\t\t\t--c0: #{int_col($c0, $c1)};\n\t\t\t--c1: #{int_col($c1, $c0)};\n\t\t\t-webkit-mask: var(--mask);\n\t\t\t\t\t\t\tmask: var(--mask);\n\t\t\t-webkit-mask-position: var(--mask-o, 50% 50%);\n\t\t\t\t\t\t\tmask-position: var(--mask-o, 50% 50%);\n\t\t\t-webkit-mask-size: var(--mask-d);\n\t\t\t\t\t\t\tmask-size: var(--mask-d);\n\t\t\tcontent: \'\'\n\t\t}\n\t\t\n\t\t&:after { --i: 1 }\n\t}\n\n\t.flipper .front {\n\t\toutline: 1px solid rgba(255,255,255,0.5);\n\t\toutline-offset: -5px;\n\n\t\tposition: relative;\n\t\t--d: 2em;\n\t\t--ang: 45deg;\n\t\t--strip-stop: calc(.0625*var(--d));\n\t\t--narr: var(--strip-list);\n\t\t\n\t\t&:before, &:after {\n\t\t\tbackground: var(--c0);\n\t\t\t--strip-end: var(--c);\n\t\t\t--strip-mid: var(--notc);\n\t\t\t--strip-stop: var(--d);\n\t\t\t--mask: \n\t\t\t\tlinear-gradient(90deg, var(--c), var(--notc)), \n\t\t\t\trepeating-linear-gradient(45deg, var(--narr)), \n\t\t\t\trepeating-linear-gradient(90deg, var(--strip-list)), \n\t\t\t\trepeating-linear-gradient(-45deg, var(--strip-list));\n\t\t\t-webkit-mask-composite: source-in, source-in, source-in, source-over;\n\t\t\t\t\t\t\tmask-composite: intersect\n\t\t}\n\t}\n</style>\n'],sourceRoot:""}]);const i=a},3990:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var s=n(7897),o=n.n(s),r=n(1519),a=n.n(r)()(o());a.push([t.id,".chat-block[data-v-0108baba]{bottom:10px;max-height:calc(100vh - 20px);position:fixed;right:10px;z-index:10}.message-block[data-v-0108baba]{max-height:calc(100vh - 58px);overflow:hidden;overflow-anchor:none}.chat-anchor[data-v-0108baba]{height:1px;overflow-anchor:auto}.toast[data-v-0108baba]{box-shadow:none;min-width:350px}.toast-header[data-v-0108baba]{padding:4px 10px}.toast-body[data-v-0108baba]{padding:10px}@media (max-width:576px){.chat-block[data-v-0108baba],.message-block[data-v-0108baba],.toast[data-v-0108baba]{min-width:calc(100% - 20px)}.toast[data-v-0108baba]{max-width:100%}}textarea.message-box[data-v-0108baba]{background-color:var(--bs-card-bg);border:none;flex:1 1 auto;font-size:14px;line-height:20px;min-height:20px;min-width:0;outline:0;overflow:hidden;overflow-wrap:break-word;position:relative;resize:none;width:1%}.show-all[data-v-0108baba]{cursor:pointer}.clear-all[data-v-0108baba]{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background-color:hsla(0,0%,100%,.85);border:1px solid rgba(0,0,0,.1)}.clear-all[data-v-0108baba]:hover{background-color:hsla(208,7%,46%,.85)}.fade-enter-active[data-v-0108baba],.fade-leave-active[data-v-0108baba]{transition:opacity .5s}.fade-enter[data-v-0108baba],.fade-leave-to[data-v-0108baba]{opacity:0}.list-enter-active[data-v-0108baba],.list-leave-active[data-v-0108baba]{transition:transform .5s,opacity .5s}.list-enter[data-v-0108baba],.list-leave-to[data-v-0108baba]{opacity:0;transform:translateX(30px)}.history .message-block[data-v-0108baba]{max-height:400px;overflow-x:hidden;overflow-y:auto}.history .toast[data-v-0108baba]{min-width:100%}.history .toast[data-v-0108baba]:last-of-type{margin-bottom:0!important}.history .toast-body[data-v-0108baba]{padding:5px 10px}","",{version:3,sources:["webpack://./resources/js/components/Chat.vue"],names:[],mappings:"AA0YA,6BAGA,WAAA,CAEA,6BAAA,CAHA,cAAA,CAEA,UAAA,CAHA,UAKA,CAEA,gCAEA,6BAAA,CADA,eAAA,CAEA,oBACA,CAEA,8BAEA,UAAA,CADA,oBAEA,CAEA,wBAEA,eAAA,CADA,eAEA,CAEA,+BACA,gBACA,CAEA,6BACA,YACA,CAEA,yBACA,qFACA,2BACA,CACA,wBACA,cACA,CACA,CAEA,sCAaA,kCAAA,CAHA,WAAA,CARA,aAAA,CAOA,cAAA,CADA,gBAAA,CADA,eAAA,CAHA,WAAA,CAOA,SAAA,CANA,eAAA,CACA,wBAAA,CALA,iBAAA,CAWA,WAAA,CATA,QAWA,CAEA,2BACA,cACA,CAEA,4BAGA,kCAAA,CAAA,0BAAA,CAFA,oCAAA,CACA,+BAEA,CACA,kCACA,qCACA,CAKA,wEACA,sBACA,CACA,6DACA,SACA,CAEA,wEACA,oCACA,CACA,6DACA,SAAA,CACA,0BACA,CAEA,yCAGA,gBAAA,CADA,iBAAA,CADA,eAGA,CAEA,iCACA,cACA,CAEA,8CACA,yBACA,CAEA,sCACA,gBACA",sourcesContent:['<template>\n\t<div>\n\t\t<h4 class="d-flex justify-content-between align-items-center mb-2">\n\t\t\t<span class="text-muted">Chat</span>\n\t\t\t\x3c!-- <button class="btn btn-sm btn-outline-secondary mb-0" @click="switchShowChatHistory">History</button> --\x3e\n\t\t</h4>\n\n\t\t<div class="history mb-2">\n\t\t\t<div v-if="showChatHistory" class="mb-0">\n\t\t\t\t<vue-custom-scrollbar id="message-block" class="message-block" :settings="scrollSettings">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-for="message in messages"\n\t\t\t\t\t\t\tv-if="!message.notification"\n\t\t\t\t\t\t\t:key="message.id"\n\t\t\t\t\t\t\tclass="toast show mb-1"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class="toast-body">\n\t\t\t\t\t\t\t\t<strong class="mr-auto">{{message.author_name}}:</strong>\n\t\t\t\t\t\t\t\t<small class="text-muted"><timer :created="message.date"></timer></small>\n\t\t\t\t\t\t\t\t<vue-markdown :html="false" :anchorAttributes="{target: \'blank\', rel: \'nofollow\'}">{{message.message}}</vue-markdown>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="chat-anchor"></div>\n\t\t\t\t</vue-custom-scrollbar>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<focusable class="pt-2 pl-2 pr-2 mb-4 p-2" ref="focusable" @blurred="onBlurred">\n\t\t\t<form @submit.prevent="send">\n\t\t\t\t<div class="input-group">\n\t\t\t\t\t<textarea\n\t\t\t\t\t\t@keydown.enter.exact.prevent="send"\n\t\t\t\t\t\t@focus="$refs.focusable.focus()"\n\t\t\t\t\t\tclass="message-box"\n\t\t\t\t\t\tref="message"\n\t\t\t\t\t\tv-model="message"\n\t\t\t\t\t\tplaceholder="Enter your message"\n\t\t\t\t\t\tv-autosize="message" rows="1"\n\t\t\t\t\t></textarea>\n\t\t\t\t</div>\n\t\t\t</form>\n\n\t\t\t<template v-slot:footer>\n\t\t\t\t<button @click.prevent="send" class="btn btn-primary btn-sm float-end" :disabled="message.length === 0">Send</button>\n\t\t\t</template>\n\t\t</focusable>\n\n\t\t<transition name="fade">\n\t\t\t<div v-show="showMessagesLength > 0" class="chat-block" aria-live="polite" aria-atomic="true">\n\t\t\t\t<div class="mb-2" style="display: flex; flex-direction: column;">\n\t\t\t\t\t<button type="submit" @click="clearAll()" class="btn clear-all btn-outline-secondary">Hide all</button>\n\t\t\t\t</div>\n\t\t\t\t<div id="message-block" class="message-block">\n\t\t\t\t\t<transition-group name="list">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-for="message in messages"\n\t\t\t\t\t\t\tv-show="message.isShow"\n\t\t\t\t\t\t\t:key="message.id"\n\t\t\t\t\t\t\tclass="toast show mb-2"\n\t\t\t\t\t\t\trole="alert"\n\t\t\t\t\t\t\taria-live="assertive"\n\t\t\t\t\t\t\taria-atomic="true"\n\t\t\t\t\t\t\tdata-autohide="false"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class="toast-header">\n\t\t\t\t\t\t\t\t<strong class="mr-auto">{{message.author_name}}</strong>\n\t\t\t\t\t\t\t\t<small class="text-muted"><timer :created="message.date"></timer></small>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="toast-body"><vue-markdown :html="false" :anchorAttributes="{target: \'blank\', rel: \'nofollow\'}">{{message.message}}</vue-markdown></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</transition-group>\n\t\t\t\t\t<div class="chat-anchor"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</transition>\n\t</div>\n</template>\n\n<script>\n\timport Timer from \'@/js/components/Timer\';\n\timport Focusable from \'@/js/components/Focusable\';\n\timport moment from \'moment\';\n\n\timport Vue from \'vue\';\n\timport VueAutosize from \'autosize-vue\';\n\tVue.use(VueAutosize);\n\n\timport VueMarkdown from \'vue-markdown\';\n\n\timport Prism from \'prismjs\';\n\timport \'prismjs/themes/prism.css\';\n\n\timport \'prismjs/components/prism-markup-templating.js\';\n\timport \'prismjs/components/prism-php\';\n\timport \'prismjs/components/prism-bash\';\n\n\timport VueCustomScrollbar from \'vue-custom-scrollbar\';\n\timport \'vue-custom-scrollbar/dist/vueScrollbar.css\';\n\n\texport default {\n\t\tprops: {\n\t\t\tsocket: {\n\t\t\t\ttype: Object,\n\t\t\t\trequired: true,\n\t\t\t},\n\t\t\troom: {\n\t\t\t\ttype: Object,\n\t\t\t\trequired: true,\n\t\t\t},\n\t\t},\n\n\t\tcomponents: {\n\t\t\tTimer,\n\t\t\tVueMarkdown,\n\t\t\tFocusable,\n\t\t\tVueCustomScrollbar,\n\t\t},\n\n\t\tdata: () => ({\n\t\t\tmessage: \'\',\n\t\t\tmessages: [],\n\t\t\tsound: null,\n\t\t\tshowChatHistory: true,\n\t\t\tscrollSettings: {\n\t\t\t\tsuppressScrollY: false,\n\t\t\t\tsuppressScrollX: true,\n\t\t\t\twheelPropagation: false\n\t\t\t},\n\t\t}),\n\n\t\tcreated: function() {\n\t\t\tthis.sound = new Audio(\'../sounds/intuition.mp3\');\n\t\t\tthis.sound.volume = 0.4;\n\t\t},\n\n\t\tmounted: function() {\n\t\t\tif (localStorage[\'messages-\'+this.room.hash]) {\n\t\t\t\tthis.messages = JSON.parse(localStorage[\'messages-\'+this.room.hash]);\n\t\t\t\tfor (var i = 0; i < this.messages.length; i++) {\n\t\t\t\t\tif (this.messages[i].isShow) {\n\t\t\t\t\t\tif (this.messages[i].notification) {\n\t\t\t\t\t\t\tsetTimeout(this.remove.bind(this, this.messages[i].id), 5000);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetTimeout(this.hide.bind(this, this.messages[i].id), 10000);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.save();\n\t\t\t}\n\n\t\t\tthis.socket.listener(\'room.chat.message\', (data) => {\n\t\t\t\tif (this.messages.length >= 30) {\n\t\t\t\t\tthis.messages.shift();\n\t\t\t\t}\n\n\t\t\t\tthis.messages.push({\n\t\t\t\t\tid: data.id,\n\t\t\t\t\tauthor_id: data.author_id,\n\t\t\t\t\tauthor_name: data.author_name,\n\t\t\t\t\tmessage: data.message,\n\t\t\t\t\tdate: moment().format(),\n\t\t\t\t\tnotification: data.notification,\n\t\t\t\t\tisShow: !this.showChatHistory || data.notification,\n\t\t\t\t});\n\n\t\t\t\tif (data.notification) {\n\t\t\t\t\tsetTimeout(this.remove.bind(this, data.id), 10000);\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(this.hide.bind(this, data.id), 20000);\n\t\t\t\t}\n\n\t\t\t\tthis.save();\n\n\t\t\t\tif (data.author_id !== this.room.clientId) {\n\t\t\t\t\tthis.sound.pause();\n\t\t\t\t\tthis.sound.currentTime = 0;\n\t\t\t\t\tthis.sound.play();\n\t\t\t\t}\n\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tPrism.highlightAll();\n\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t});\n\t\t\t}, \'chat\');\n\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tPrism.highlightAll();\n\t\t\t\tthis.scrollToBottom();\n\t\t\t});\n\t\t},\n\n\t\tdestroyed() {\n\t\t\tthis.socket.offGroup(\'chat\');\n\t\t},\n\n\t\tmethods: {\n\t\t\tsend() {\n\t\t\t\tif (this.message !== \'\') {\n\t\t\t\t\tthis.socket.send({\n\t\t\t\t\t\t\'action\': \'room.chat.send\',\n\t\t\t\t\t\t\'room\': this.room.hash,\n\t\t\t\t\t\t\'name\': this.$root.name,\n\t\t\t\t\t\t\'message\': this.message,\n\t\t\t\t\t});\n\t\t\t\t\tthis.message = \'\';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tremove(id) {\n\t\t\t\tfor (var i = 0; i < this.messages.length; i++) {\n\t\t\t\t\tif (this.messages[i].id === id) {\n\t\t\t\t\t\tthis.messages.splice(i, 1);\n\t\t\t\t\t\tthis.save();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\thide(id) {\n\t\t\t\tfor (var i = 0; i < this.messages.length; i++) {\n\t\t\t\t\tif (this.messages[i].id === id) {\n\t\t\t\t\t\tthis.messages[i].isShow = false;\n\t\t\t\t\t\tthis.save();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tsave() {\n\t\t\t\tlocalStorage[\'messages-\'+this.room.hash] = JSON.stringify(this.messages);\n\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tscrollToBottom() {\n\t\t\t\tvar blocks = document.querySelectorAll(\'.chat-anchor\');\n\t\t\t\tif (blocks !== null) {\n\t\t\t\t\tfor (var i = 0; i < blocks.length; i++) {\n\t\t\t\t\t\tblocks[i].scrollIntoView({behavior: \'auto\', block: \'nearest\', inline: \'start\'});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tclearAll() {\n\t\t\t\tfor (var i = 0; i < this.messages.length; i++) {\n\t\t\t\t\tthis.messages[i].isShow = false;\n\t\t\t\t}\n\t\t\t\tthis.save();\n\t\t\t},\n\n\t\t\tswitchShowChatHistory() {\n\t\t\t\tthis.showChatHistory = !this.showChatHistory;\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tPrism.highlightAll();\n\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tgetDate(date) {\n\t\t\t\tmoment.locale(\'en\');\n\t\t\t\treturn moment(date).fromNow();\n\t\t\t},\n\n\t\t\tonBlurred() {\n\t\t\t\tthis.$refs.message.blur();\n\t\t\t},\n\t\t},\n\n\t\tcomputed: {\n\t\t\tshowMessagesLength() {\n\t\t\t\tlet length = 0;\n\t\t\t\tfor (var i = 0; i < this.messages.length; i++) {\n\t\t\t\t\tif (this.messages[i].isShow) {\n\t\t\t\t\t\tlength++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn length;\n\t\t\t}\n\t\t},\n\t}\n<\/script>\n\n<style scoped>\n\t.chat-block {\n\t\tz-index: 10;\n\t\tposition: fixed;\n\t\tbottom: 10px;\n\t\tright: 10px;\n\t\tmax-height: calc(100vh - 20px);\n\t}\n\n\t.message-block {\n\t\toverflow: hidden;\n\t\tmax-height: calc(100vh - 58px);\n\t\toverflow-anchor: none;\n\t}\n\n\t.chat-anchor {\n\t\toverflow-anchor: auto;\n\t\theight: 1px;\n\t}\n\n\t.toast {\n\t\tmin-width: 350px;\n\t\tbox-shadow: none;\n\t}\n\n\t.toast-header {\n\t\tpadding: 4px 10px;\n\t}\n\n\t.toast-body {\n\t\tpadding: 10px;\n\t}\n\n\t@media (max-width: 576px) {\n\t\t.toast, .chat-block, .message-block {\n\t\t\tmin-width: calc(100% - 20px);\n\t\t}\n\t\t.toast {\n\t\t\tmax-width: 100%;\n\t\t}\n\t}\n\n\ttextarea.message-box {\n\t\tposition: relative;\n\t\tflex: 1 1 auto;\n\t\twidth: 1%;\n\t\tmin-width: 0;\n\t\toverflow: hidden;\n\t\toverflow-wrap: break-word;\n\t\tmin-height: 20px;\n\t\tline-height: 20px;\n\t\tfont-size: 14px;\n\t\tborder: none;\n\t\toutline: 0;\n\t\tresize: none;\n\t\tbackground-color: var(--bs-card-bg);\n\t}\n\n\t.show-all {\n\t\tcursor: pointer;\n\t}\n\n\t.clear-all {\n\t\tbackground-color: rgba(255,255,255,.85);\n\t\tborder: 1px solid rgba(0,0,0,.1);\n\t\tbackdrop-filter: blur(10px);\n\t}\n\t.clear-all:hover {\n\t\tbackground-color: rgba(108,117,125,.85);\n\t}\n\n\t.fade-enter-active {\n\t\ttransition: opacity .5s;\n\t}\n\t.fade-leave-active {\n\t\ttransition: opacity .5s;\n\t}\n\t.fade-enter, .fade-leave-to {\n\t\topacity: 0;\n\t}\n\n\t.list-enter-active, .list-leave-active {\n\t\ttransition: transform .5s, opacity .5s;\n\t}\n\t.list-enter, .list-leave-to {\n\t\topacity: 0;\n\t\ttransform: translateX(30px);\n\t}\n\n\t.history .message-block {\n\t\toverflow-y: auto;\n\t\toverflow-x: hidden;\n\t\tmax-height: 400px;\n\t}\n\n\t.history .toast {\n\t\tmin-width: 100%;\n\t}\n\n\t.history .toast:last-of-type {\n\t\tmargin-bottom: 0 !important;\n\t}\n\n\t.history .toast-body {\n\t\tpadding: 5px 10px;\n\t}\n</style>\n'],sourceRoot:""}]);const i=a},6837:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var s=n(7897),o=n.n(s),r=n(1519),a=n.n(r)()(o());a.push([t.id,".focusable[data-v-3b137a10]{overflow:hidden;padding-bottom:10px;position:relative;transition:padding-bottom .3s}.is-focused[data-v-3b137a10]{padding-bottom:50px}.fade-enter-active[data-v-3b137a10]{transition:opacity .5s}.fade-leave-active[data-v-3b137a10]{transition:opacity 0s}.fade-enter[data-v-3b137a10],.fade-leave-to[data-v-3b137a10]{opacity:0}","",{version:3,sources:["webpack://./resources/js/components/Focusable.vue"],names:[],mappings:"AA+EA,4BAEA,eAAA,CACA,mBAAA,CAFA,iBAAA,CAGA,6BACA,CAQA,6BACA,mBACA,CAEA,oCACA,sBACA,CACA,oCACA,qBACA,CACA,6DACA,SACA",sourcesContent:['<template>\r\n\t<div\r\n\t\tclass="card focusable"\r\n\t\t@click="focus"\r\n\t\tv-click-outside="blur"\r\n\t\t:class="{\'is-focused\': focused}"\r\n\t>\r\n\t\t<slot></slot>\r\n\t\t<slot name="main"></slot>\r\n\r\n\t\t<transition name="fade">\r\n\t\t\t<div v-if="focused" class="row input-group-append m-0 mt-2">\r\n\t\t\t\t<div class="col p-0">\r\n\t\t\t\t\t<slot name="footer"></slot>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</transition>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport Vue from \'vue\';\r\n\timport ClickOutside from \'@/js/directives/click-outside\';\r\n\tVue.use(ClickOutside);\r\n\r\n\texport default {\r\n\t\tprops: {\r\n\r\n\t\t},\r\n\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tfocused: false,\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\tfocus() {\r\n\t\t\t\tthis.focused = true;\r\n\t\t\t\tthis.$emit(\'focused\');\r\n\t\t\t},\r\n\r\n\t\t\tblur() {\r\n\t\t\t\tthis.focused = false;\r\n\t\t\t\tthis.$emit(\'blurred\');\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n<\/script>\r\n\r\n<style scoped>\r\n\t.focusable {\r\n\t\tposition: relative;\r\n\t\toverflow: hidden;\r\n\t\tpadding-bottom: 10px;\r\n\t\ttransition: padding-bottom 0.3s;\r\n\t}\r\n\r\n\t/* .focusable-hidden {\r\n\t\tposition: absolute;\r\n\t\tbottom: 10px; left: 10px;\r\n\t\twidth: calc(100% - 20px);\r\n\t}  */\r\n\r\n\t.is-focused {\r\n\t\tpadding-bottom: 50px;\r\n\t}\r\n\r\n\t.fade-enter-active {\r\n\t\ttransition: opacity .5s;\r\n\t}\r\n\t.fade-leave-active {\r\n\t\ttransition: opacity 0s;\r\n\t}\r\n\t.fade-enter, .fade-leave-to {\r\n\t\topacity: 0;\r\n\t}\r\n</style>\r\n'],sourceRoot:""}]);const i=a},9339:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var s=n(7897),o=n.n(s),r=n(1519),a=n.n(r)()(o());a.push([t.id,"textarea.text-box[data-v-72b7d0b3]{background-color:var(--bs-card-bg);border:none;flex:1 1 auto;font-size:14px;line-height:20px;min-height:20px;min-width:0;outline:0;overflow:hidden;overflow-wrap:break-word;position:relative;resize:none;width:1%}","",{version:3,sources:["webpack://./resources/js/components/TaskForm.vue"],names:[],mappings:"AAwLA,mCAaA,kCAAA,CAHA,WAAA,CARA,aAAA,CAOA,cAAA,CADA,gBAAA,CADA,eAAA,CAHA,WAAA,CAOA,SAAA,CANA,eAAA,CACA,wBAAA,CALA,iBAAA,CAWA,WAAA,CATA,QAWA",sourcesContent:['<template>\n\t<focusable class="pt-2 pl-2 pr-2 mb-4 p-2" ref="focusable" @blurred="onBlurred">\n\t\t<form v-show="!isPreview" @submit.prevent="submit">\n\t\t\t<div class="input-group">\n\t\t\t\t<textarea\n\t\t\t\t\t@keydown.enter.exact.prevent="submit"\n\t\t\t\t\t@paste="onPasteImage"\n\t\t\t\t\t@focus="$refs.focusable.focus()"\n\t\t\t\t\tref="text"\n\t\t\t\t\tclass="text-box"\n\t\t\t\t\t:class="{\'text-success\': isEdit}"\n\t\t\t\t\tv-model="textLocal"\n\t\t\t\t\t:placeholder="placeholder"\n\t\t\t\t\tv-autosize="textLocal" rows="1"\n\t\t\t\t></textarea>\n\t\t\t</div>\n\t\t</form>\n\n\t\t<vue-markdown v-if="isPreview" :html="false" :anchorAttributes="anchorAttributes" :source="textLocal"></vue-markdown>\n\n\t\t<template v-slot:footer>\n\t\t\t<button class="btn btn-light btn-sm" v-show="!isPreview && textLocal.length !== 0" @click.prevent="isPreview = true">Preview</button>\n\t\t\t<button class="btn btn-light btn-sm" v-show="isPreview" @click.prevent="isPreview = false">Edit</button>\n\n\t\t\t<div v-show="!isEdit" class="btn-group" role="group">\n\t\t\t\t<input type="radio" class="btn-check" name="mode" id="modeOnce" value="once" v-model="mode">\n\t\t\t\t<label class="btn btn-light btn-sm" for="modeOnce">Once</label>\n\n\t\t\t\t<input type="radio" class="btn-check" name="mode" id="modeMulti" value="multi" v-model="mode">\n\t\t\t\t<label class="btn btn-light btn-sm" for="modeMulti">Multi</label>\n\t\t\t</div>\n\n\t\t\t<button type="button" class="btn btn-light btn-sm" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Markdown supported">\n\t\t\t\t<i class="fa fa-question-circle-o" aria-hidden="true"></i>\n\t\t\t</button>\n\n\t\t\t<button\n\t\t\t\t@click.prevent="submit"\n\t\t\t\ttype="submit"\n\t\t\t\tclass="btn btn-sm float-end"\n\t\t\t\t:class="{\'btn-success\': isEdit, \'btn-primary\': !isEdit}"\n\t\t\t\t:disabled="textLocal.length === 0"\n\t\t\t>{{button}}</button>\n\t\t</template>\n\t</focusable>\n</template>\n\n<script>\n\timport VueMarkdown from \'vue-markdown\';\n\timport Focusable from \'@/js/components/Focusable\';\n\n\timport Vue from \'vue\';\n\timport VueAutosize from \'autosize-vue\';\n\tVue.use(VueAutosize);\n\n\timport Prism from \'prismjs\';\n\timport \'prismjs/themes/prism.css\';\n\n\timport \'prismjs/components/prism-markup-templating.js\';\n\timport \'prismjs/components/prism-php\';\n\timport \'prismjs/components/prism-bash\';\n\n\texport default {\n\t\tprops: {\n\t\t\ttext: {\n\t\t\t\ttype: String,\n\t\t\t\trequired: true,\n\t\t\t},\n\t\t\tplaceholder: {\n\t\t\t\ttype: String,\n\t\t\t\trequired: true,\n\t\t\t},\n\t\t\tbutton: {\n\t\t\t\ttype: String,\n\t\t\t\trequired: true,\n\t\t\t},\n\t\t\tisEdit: {\n\t\t\t\ttype: Boolean,\n\t\t\t\tdefault: false,\n\t\t\t},\n\t\t},\n\n\t\tcomponents: {\n\t\t\tVueMarkdown,\n\t\t\tFocusable,\n\t\t},\n\n\t\tdata: () => ({\n\t\t\ttextLocal: \'\',\n\t\t\tisPreview: false,\n\t\t\tmode: \'once\',\n\t\t}),\n\n\t\tmethods: {\n\t\t\tonPasteImage(pasteEvent) {\n\t\t\t\tif(pasteEvent.clipboardData == false){\n\t\t\t\t    if(typeof(callback) == "function"){\n\t\t\t\t        console.log(undefined);\n\t\t\t\t    }\n\t\t\t\t};\n\n\t\t\t\tvar items = pasteEvent.clipboardData.items;\n\n\t\t\t\tif(items == undefined){\n\t\t\t\t    if(typeof(callback) == "function"){\n\t\t\t\t        console.log(undefined);\n\t\t\t\t    }\n\t\t\t\t};\n\n\t\t\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\t\t    // Skip content if not image\n\t\t\t\t    if (items[i].type.indexOf("image") == -1) continue;\n\t\t\t\t    // Retrieve image on clipboard as blob\n\t\t\t\t    var blob = items[i].getAsFile();\n\t\t\t\t    console.log(blob);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tsubmit() {\n\t\t\t\tif (this.mode === \'multi\') {\n\t\t\t\t\tlet texts = this.textLocal.split(\'\\n\');\n\n\t\t\t\t\tfor (var i = 0; i < texts.length; i++) {\n\t\t\t\t\t\tthis.$emit(\'submit\', {text: texts[i]});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.$emit(\'submit\', {text: this.textLocal});\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tfocus() {\n\t\t\t\tthis.$refs.text.focus();\n\t\t\t\tthis.$refs.focusable.focus();\n\t\t\t},\n\n\t\t\tonBlurred() {\n\t\t\t\tthis.isPreview = false;\n\t\t\t\tthis.$refs.text.blur();\n\t\t\t}\n\t\t},\n\n\t\tcomputed: {\n\t\t\tanchorAttributes() {\n\t\t\t\treturn {\n\t\t\t\t\ttarget: \'blank\',\n\t\t\t\t\trel: \'nofollow\',\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\n\t\twatch: {\n\t\t\ttext() {\n\t\t\t\tthis.textLocal = this.text;\n\t\t\t},\n\n\t\t\tisPreview() {\n\t\t\t\tif (this.isPreview) {\n\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\tPrism.highlightAll();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t}\n<\/script>\n\n<style scoped>\n\ttextarea.text-box {\n\t\tposition: relative;\n\t\tflex: 1 1 auto;\n\t\twidth: 1%;\n\t\tmin-width: 0;\n\t\toverflow: hidden;\n\t\toverflow-wrap: break-word;\n\t\tmin-height: 20px;\n\t\tline-height: 20px;\n\t\tfont-size: 14px;\n\t\tborder: none;\n\t\toutline: 0;\n\t\tresize: none;\n\t\tbackground-color: var(--bs-card-bg);\n\t}\n</style>\n'],sourceRoot:""}]);const i=a},6879:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var s=n(7897),o=n.n(s),r=n(1519),a=n.n(r)()(o());a.push([t.id,".button[data-v-3c8fa7ed]{margin-top:35px}.flip-list-move[data-v-3c8fa7ed]{transition:transform .5s}.no-move[data-v-3c8fa7ed]{transition:transform 0s}.ghost[data-v-3c8fa7ed]{background:#c8ebfb;opacity:.5}.handle[data-v-3c8fa7ed]{cursor:move}.button-icon[data-v-3c8fa7ed]{cursor:pointer}.control[data-v-3c8fa7ed]{position:absolute;right:10px;top:10px}.task[data-v-3c8fa7ed]{padding:10px}.task-complite[data-v-3c8fa7ed]{background-color:#eef6ff}.task-active[data-v-3c8fa7ed]{background-color:#bbdbff}.story-point[data-v-3c8fa7ed]{background-color:#007bff;border-radius:3px;color:#fff;padding:1px 6px}.story-point div[data-v-3c8fa7ed]{display:inline-block}.task .control-owner[data-v-3c8fa7ed]{opacity:0;transition:opacity .5s}.task:hover .control-owner[data-v-3c8fa7ed]{opacity:1}.fade-enter-active[data-v-3c8fa7ed]{transition:all .5s}.fade-enter[data-v-3c8fa7ed],.fade-leave-to[data-v-3c8fa7ed]{opacity:0}.dropdown-menu[data-v-3c8fa7ed]{min-width:auto}","",{version:3,sources:["webpack://./resources/js/components/TaskList.vue"],names:[],mappings:"AAmcA,yBACA,eACA,CACA,iCACA,wBACA,CACA,0BACA,uBACA,CACA,wBAEA,kBAAA,CADA,UAEA,CACA,yBACA,WACA,CACA,8BACA,cACA,CACA,0BACA,iBAAA,CAEA,UAAA,CADA,QAEA,CACA,uBACA,YACA,CACA,gCACA,wBACA,CACA,8BACA,wBACA,CACA,8BAEA,wBAAA,CAEA,iBAAA,CADA,UAAA,CAFA,eAIA,CACA,kCACA,oBACA,CACA,sCACA,SAAA,CACA,sBACA,CACA,4CACA,SACA,CAEA,oCACA,kBACA,CACA,6DACA,SACA,CAEA,gCACA,cACA",sourcesContent:['<template>\n\t<transition name="fade">\n\t\t<div v-if="tasks.length || room.isOwner">\n\t\t\t<h4 class="d-flex justify-content-between align-items-center mb-3">\n\t\t\t\t<span>Tasks</span>\n\t\t\t\t<div>\n\t\t\t\t\t<span class="badge bg-secondary-subtle text-secondary-emphasis" title="Completed tasks/Number of tasks">{{completedTasks}}/{{tasks.length}}</span>\n\t\t\t\t\t<span class="badge bg-primary-subtle text-primary-emphasis" title="Amount story points">{{amount}}</span>\n\t\t\t\t</div>\n\t\t\t</h4>\n\n\t\t\t<transition name="fade">\n\t\t\t\t<task-form \n\t\t\t\t\tv-show="room.isOwner && !edit.enabled"\n\t\t\t\t\t@submit="add"\n\t\t\t\t\t:text="text"\n\t\t\t\t\tplaceholder="Enter text new task"\n\t\t\t\t\tbutton="Add task"\n\t\t\t\t></task-form>\n\t\t\t</transition>\n\n\t\t\t<task-form \n\t\t\t\tv-show="room.isOwner && edit.enabled"\n\t\t\t\t@submit="editSave"\n\t\t\t\t:text="edit.text"\n\t\t\t\tplaceholder="Enter text"\n\t\t\t\tbutton="Save"\n\t\t\t\t:isEdit="true"\n\t\t\t\tref="editForm"\n\t\t\t></task-form>\n\t\t\t\t\n\t\t\t<draggable\n\t\t\t\tv-model="tasks"\n\t\t\t\tv-bind="dragOptions"\n\t\t\t\t@start="drag = true"\n\t\t\t\t@end="endDrag"\n\t\t\t\thandle=".handle"\n\t\t\t>\n\t\t\t\t<transition-group\n\t\t\t\t\ttag="ul"\n\t\t\t\t\tclass="list-group mb-3"\n\t\t\t\t\ttype="transition"\n\t\t\t\t\t:name="!drag ? \'flip-list\' : null"\n\t\t\t\t>\n\t\t\t\t\t<li\n\t\t\t\t\t\tv-for="task in tasks"\n\t\t\t\t\t\t:key="task.id"\n\t\t\t\t\t\tclass="list-group-item d-flex justify-content-between lh-condensed task"\n\t\t\t\t\t\t:class="{\'list-group-item-secondary\': task.story_point_view, \'list-group-item-primary\': task.id === (room.task ? room.task.id : 0)}"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<span class="text-muted">#{{task.order}}</span>\n\t\t\t\t\t\t\t<vue-markdown :html="false" :anchorAttributes="anchorAttributes" :source="task.text"></vue-markdown>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<span class="control text-muted">\n\t\t\t\t\t\t\t<span v-if="room.isOwner" class="control-owner">\n\t\t\t\t\t\t\t\t<i class="fa fa-fw fa-align-justify handle" title="Sort"></i>\n\t\t\t\t\t\t\t\t<i class="fa fa-fw fa-pencil button-icon" title="Edit" @click.stop="editInit(task.id)"></i>\n\t\t\t\t\t\t\t\t<i class="fa fa-fw fa-trash-o button-icon" title="Delete" @click="remove(task.id)"></i>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span v-if="task.story_point_view && !room.isOwner" class="story-point" title="Story points">\n\t\t\t\t\t\t\t\t<vue-markdown\n\t\t\t\t\t\t\t\t\tclass="view"\n\t\t\t\t\t\t\t\t\t:html="false"\n\t\t\t\t\t\t\t\t\t:anchorAttributes="anchorAttributes"\n\t\t\t\t\t\t\t\t\t:source="task.story_point_view"\n\t\t\t\t\t\t\t\t></vue-markdown>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<div v-if="task.story_point_view && room.isOwner" class="btn-group" role="group">\n\t\t\t\t\t\t\t\t<div class="btn-group" role="group">\n\t\t\t\t\t\t\t\t\t<span class="story-point btn btn-primary dropdown-toggle" title="Story points" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n\t\t\t\t\t\t\t\t\t\t<vue-markdown\n\t\t\t\t\t\t\t\t\t\t\tclass="view"\n\t\t\t\t\t\t\t\t\t\t\t:html="false"\n\t\t\t\t\t\t\t\t\t\t\t:anchorAttributes="anchorAttributes"\n\t\t\t\t\t\t\t\t\t\t\t:source="task.story_point_view"\n\t\t\t\t\t\t\t\t\t\t></vue-markdown>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<div class="dropdown-menu">\n\t\t\t\t\t\t\t\t\t\t<button v-for="(card, index) in cards" :key="index" @click="editStoryPoint(task.id, card.point, card.view)" class="dropdown-item btn-sm" type="button">\n\t\t\t\t\t\t\t\t\t\t\t<vue-markdown\n\t\t\t\t\t\t\t\t\t\t\t\tclass="view"\n\t\t\t\t\t\t\t\t\t\t\t\t:html="false"\n\t\t\t\t\t\t\t\t\t\t\t\t:anchorAttributes="anchorAttributes"\n\t\t\t\t\t\t\t\t\t\t\t\t:source="card.view"\n\t\t\t\t\t\t\t\t\t\t\t></vue-markdown>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</li>\n\t\t\t\t</transition-group>\n\t\t\t</draggable>\n\t\t</div>\n\t</transition>\n</template>\n\n<script>\n\timport VueMarkdown from \'vue-markdown\';\n\timport Draggable from \'vuedraggable\';\n\timport TaskForm from \'@/js/components/TaskForm\';\n\timport CardSets from \'@/js/modules/CardSets.ts\';\n\n\timport Prism from \'prismjs\';\n\timport \'prismjs/themes/prism.css\';\n\n\timport \'prismjs/components/prism-markup-templating.js\';\n\timport \'prismjs/components/prism-php\';\n\timport \'prismjs/components/prism-bash\';\n\t\n\texport default {\n\t\tprops: [\'socket\', \'room\'],\n\n\t\tcomponents: {\n\t\t\tVueMarkdown,\n\t\t\tDraggable,\n\t\t\tTaskForm,\n\t\t},\n\n\t\tdata: () => ({\n\t\t\tdrag: false,\n\t\t\ttext: \'\',\n\t\t\ttasks: [],\n\t\t\tedit: {\n\t\t\t\tenabled: false,\n\t\t\t\ttext: \'\',\n\t\t\t\tid: \'\',\n\t\t\t},\n\t\t\ttextFocused: false,\n\t\t\tcards: [],\n\t\t\tcardsets: {},\n\t\t}),\n\n\t\tmounted: function() {\n\t\t\tthis.cardsets = CardSets;\n\t\t\tthis.socket.group(\'task\');\n\n\t\t\tthis.socket.listener(\'room.task.add\', (data) => {\n\t\t\t\tthis.tasks.push(data.task);\n\t\t\t\tthis.tasksSort();\n\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tPrism.highlightAll();\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.socket.listener(\'room.task.remove\', (data) => {\n\t\t\t\tfor (var i = 0; i < this.tasks.length; i++) {\n\t\t\t\t\tif (this.tasks[i].id === data.id) {\n\t\t\t\t\t\tthis.tasks.splice(i, 1);\n\t\t\t\t\t\tthis.save();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.socket.listener(\'room.task.update\', (data) => {\n\t\t\t\tfor (var i = 0; i < this.tasks.length; i++) {\n\t\t\t\t\tif (this.tasks[i].id === data.task.id) {\n\t\t\t\t\t\tthis.$set(this.tasks, i, data.task);\n\t\t\t\t\t\tthis.save();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.socket.listener(\'room.task.update.all\', (data) => {\n\t\t\t\tthis.tasks = data.tasks;\n\t\t\t\tthis.tasksSort();\n\t\t\t});\n\n\t\t\tthis.socket.listener(\'room.task.approve\', (data) => {\n\t\t\t\tfor (var i = 0; i < this.tasks.length; i++) {\n\t\t\t\t\tif (this.tasks[i].id === data.id) {\n\t\t\t\t\t\tthis.$set(this.tasks[i], \'story_point\', data.point);\n\t\t\t\t\t\tthis.$set(this.tasks[i], \'story_point_view\', data.view);\n\t\t\t\t\t\tthis.save();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$emit(\'approve\', data);\n\t\t\t});\n\n\t\t\tthis.socket.endGroup();\n\t\t},\n\n\t\tdestroyed() {\n\t\t\tthis.socket.offGroup(\'task\');\n\t\t},\n\n\t\tmethods: {\n\t\t\tinit() {\n\t\t\t\tif (localStorage[\'tasks-\'+this.room.hash]) {\n\t\t\t\t\tthis.tasks = JSON.parse(localStorage[\'tasks-\'+this.room.hash]);\n\t\t\t\t}\n\n\t\t\t\tlet promise = this.socket.request(\'task.get\', {\n\t\t\t\t\troom: this.room.hash,\n\t\t\t\t})\n\t\t\t\t\t.then((result) => {\n\t\t\t\t\t\tthis.tasks = result.data;\n\t\t\t\t\t\tthis.tasksSort();\n\t\t\t\t\t});\n\t\t\t},\n\n\t\t\tendDrag() {\n\t\t\t\tthis.drag = false;\n\n\t\t\t\tfor (var i = 0; i < this.tasks.length; i++) {\n\t\t\t\t\tlet item = this.tasks[i];\n\t\t\t\t\titem.order = i + 1;\n\t\t\t\t\tthis.$set(this.tasks, i, item);\n\t\t\t\t}\n\n\t\t\t\tthis.saveInServer();\n\t\t\t\tthis.save();\n\t\t\t},\n\n\t\t\tadd(data) {\n\t\t\t\tthis.text = data.text;\n\n\t\t\t\tif (this.text === \'\') {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tlet promise = this.socket.request(\'task.create\', {\n\t\t\t\t\ttext: this.text,\n\t\t\t\t\tuser: this.$root.getUser(),\n\t\t\t\t\troom: this.room.hash,\n\t\t\t\t})\n\t\t\t\t\t.then((result) => {\n\t\t\t\t\t\tthis.text = \'\';\n\t\t\t\t\t});\n\t\t\t},\n\n\t\t\tremove(id) {\n\t\t\t\tif (confirm("Remove task?")) {\n\t\t\t\t\tlet promise = this.socket.request(\'task.delete\', {\n\t\t\t\t\t\tid: id,\n\t\t\t\t\t\tuser: this.$root.getUser(),\n\t\t\t\t\t})\n\t\t\t\t\t\t.then((result) => {\n\t\t\t\t\t\t\tfor (var i = 0; i < this.tasks.length; i++) {\n\t\t\t\t\t\t\t\tif (this.tasks[i].id === id) {\n\t\t\t\t\t\t\t\t\tthis.tasks.splice(i, 1);\n\t\t\t\t\t\t\t\t\tthis.save();\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\n\t\t\teditInit(id) {\n\t\t\t\tfor (var i = 0; i < this.tasks.length; i++) {\n\t\t\t\t\tif (this.tasks[i].id === id) {\n\t\t\t\t\t\tthis.edit.enabled = true;\n\t\t\t\t\t\tthis.edit.id = this.tasks[i].id;\n\t\t\t\t\t\tthis.edit.text = this.tasks[i].text;\n\t\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\t\tthis.$refs.editForm.focus();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\teditSave(data) {\n\t\t\t\tthis.edit.text = data.text;\n\n\t\t\t\tlet promise = this.socket.request(\'task.update\', {\n\t\t\t\t\tid: this.edit.id,\n\t\t\t\t\ttext: this.edit.text,\n\t\t\t\t\tuser: this.$root.getUser(),\n\t\t\t\t})\n\t\t\t\t\t.then((result) => {\n\t\t\t\t\t\tthis.edit.enabled = false;\n\t\t\t\t\t\tthis.edit.text = \'\';\n\t\t\t\t\t\tthis.edit.id = \'\';\n\t\t\t\t\t});\n\t\t\t},\n\n\t\t\teditStoryPoint(id, story_point, story_point_view) {\n\t\t\t\tlet promise = this.socket.request(\'task.update\', {\n\t\t\t\t\tid: id,\n\t\t\t\t\tstory_point: story_point,\n\t\t\t\t\tstory_point_view: story_point_view,\n\t\t\t\t\tuser: this.$root.getUser(),\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tsave() {\n\t\t\t\tlocalStorage[\'tasks-\'+this.room.hash] = JSON.stringify(this.tasks);\n\t\t\t},\n\n\t\t\tsaveInServer() {\n\t\t\t\tthis.socket.send({\n\t\t\t\t\taction: \'room.task.update.all\',\n\t\t\t\t\troom: this.room.hash,\n\t\t\t\t\ttasks: this.tasks,\n\t\t\t\t\towner: this.$root.getUser(),\n\t\t\t\t});\n\t\t\t},\n\n\t\t\ttasksSort() {\n\t\t\t\tthis.tasks.sort(function(a, b) { \n\t\t\t\t\treturn a.order - b.order;\n\t\t\t\t});\n\t\t\t\tthis.save();\n\t\t\t},\n\t\t},\n\n\t\tcomputed: {\n\t\t\tdragOptions() {\n\t\t\t\treturn {\n\t\t\t\t\tanimation: 200,\n\t\t\t\t\tgroup: "description",\n\t\t\t\t\tdisabled: false,\n\t\t\t\t\tghostClass: "ghost"\n\t\t\t\t};\n\t\t\t},\n\n\t\t\tanchorAttributes() {\n\t\t\t\treturn {\n\t\t\t\t\ttarget: \'blank\',\n\t\t\t\t\trel: \'nofollow\',\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcompletedTasks() {\n\t\t\t\tlet count = 0;\n\t\t\t\tfor (var i = 0; i < this.tasks.length; i++) {\n\t\t\t\t\tif (this.tasks[i].story_point !== null && this.tasks[i].story_point !== undefined) {\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn count;\n\t\t\t},\n\n\t\t\thaveUnratedTasks() {\n\t\t\t\tfor (var i = 0; i < this.tasks.length; i++) {\n\t\t\t\t\tif (this.tasks[i].story_point === null || this.tasks[i].story_point === undefined) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tamount() {\n\t\t\t\tlet amount = 0;\n\t\t\t\tfor (var i = 0; i < this.tasks.length; i++) {\n\t\t\t\t\tif (this.tasks[i].story_point !== null && this.tasks[i].story_point !== undefined) {\n\t\t\t\t\t\tamount += parseFloat(this.tasks[i].story_point);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn amount;\n\t\t\t},\n\t\t},\n\n\t\twatch: {\n\t\t\t\'room.id\'() {\n\t\t\t\tif (this.room.id !== undefined && this.room.id !== null) {\n\t\t\t\t\tthis.init();\n\t\t\t\t}\n\t\t\t},\n\t\t\t\'room.cardset\'(n, o) {\n\t\t\t\tif (n.name !== undefined) {\n\t\t\t\t\tif (n.name === \'Custom\') {\n\t\t\t\t\t\tthis.cards = n.cards;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (let name in this.cardsets) {\n\t\t\t\t\t\t\tif (name === n.name) {\n\t\t\t\t\t\t\t\tthis.cards = this.cardsets[name];\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.cards = this.cardsets.Default;\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t}\n<\/script>\n\n<style scoped>\n\t.button {\n\t\tmargin-top: 35px;\n\t}\n\t.flip-list-move {\n\t\ttransition: transform 0.5s;\n\t}\n\t.no-move {\n\t\ttransition: transform 0s;\n\t}\n\t.ghost {\n\t\topacity: 0.5;\n\t\tbackground: #c8ebfb;\n\t}\n\t.handle {\n\t\tcursor: move;\n\t}\n\t.button-icon {\n\t\tcursor: pointer;\n\t}\n\t.control {\n\t\tposition: absolute;\n\t\ttop: 10px;\n\t\tright: 10px;\n\t}\n\t.task {\n\t\tpadding: 10px;\n\t}\n\t.task-complite {\n\t\tbackground-color: #eef6ff;\n\t}\n\t.task-active {\n\t\tbackground-color: #bbdbff;\n\t}\n\t.story-point {\n\t\tpadding: 1px 6px;\n\t\tbackground-color: #007bff;\n\t\tcolor: #fff;\n\t\tborder-radius: 3px;\n\t}\n\t.story-point div {\n\t\tdisplay: inline-block;\n\t}\n\t.task .control-owner {\n\t\topacity: 0;\n\t\ttransition: opacity .5s;\n\t}\n\t.task:hover .control-owner {\n\t\topacity: 1;\n\t}\n\n\t.fade-enter-active {\n\t\ttransition: all .5s;\n\t}\n\t.fade-enter, .fade-leave-to {\n\t\topacity: 0;\n\t}\n\n\t.dropdown-menu {\n\t\tmin-width: auto;\n\t}\n</style>\n'],sourceRoot:""}]);const i=a},9680:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var s=n(7897),o=n.n(s),r=n(1519),a=n.n(r)()(o());a.push([t.id,".panel-buttons[data-v-093145ab]{align-items:flex-start}.pointer[data-v-093145ab]{cursor:pointer}.user-control[data-v-093145ab]{font-size:100%}.empty-card[data-v-093145ab]{background-color:#007bff;border-radius:.25rem;color:#007bff;display:inline-block;height:24px;text-align:center;vertical-align:baseline;white-space:nowrap;width:22px}.disconnected[data-v-093145ab]{opacity:.5}","",{version:3,sources:["webpack://./resources/js/components/User.vue"],names:[],mappings:"AAsKA,gCACA,sBACA,CAEA,0BACA,cACA,CAEA,+BACA,cACA,CAEA,6BAKA,wBAAA,CACA,oBAAA,CAFA,aAAA,CAGA,oBAAA,CAJA,WAAA,CAFA,iBAAA,CAOA,uBAAA,CACA,kBAAA,CAPA,UAQA,CAEA,+BACA,UACA",sourcesContent:['<template>\n\t<li\n\t\tclass="list-group-item"\n\t\t:class="{\'d-flex justify-content-between lh-condensed\': !changeNameSwitcher, \'disconnected\': !user.active, \'list-group-item-secondary\': !user.hasVote}"\n\t>\n\t\t<div v-if="!changeNameSwitcherForSelf()" :class="{\'text-success\': user.isVoted}">\n\t\t\t<h6 class="my-0">\n\t\t\t\t{{user.name === \'\' ? \'[No name]\' : user.name}}\n\t\t\t</h6>\n\t\t\t<small v-if="user.isOwner" class="text-muted">Owner</small>\n\t\t\t<small v-if="!user.hasVote" class="text-muted">Spectator</small>\n\t\t</div>\n\t\t<span v-if="!changeNameSwitcher" class="text-muted d-flex panel-buttons">\n\t\t\t<span v-if="user.vote === undefined && user.isVoted" class="empty-card ml-1"></span>\n\t\t\t<vue-markdown\n\t\t\t\tclass="badge user-control badge-primary ml-1"\n\t\t\t\t:html="false"\n\t\t\t\t:source="user.voteView"\n\t\t\t></vue-markdown>\n\n\t\t\t<div v-if="user.isSelf || room.isOwner" class="btn-group dropleft" role="group">\n\t\t\t\t<button type="button" class="btn badge pr-0 user-control pointer" title="" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n\t\t\t\t\t<i class="fa fa-ellipsis-v" aria-hidden="true"></i>\n\t\t\t\t</button>\n\t\t\t\t<div class="dropdown-menu">\n\t\t\t\t\t<button v-if="user.isSelf" @click.prevent="changeName" class="dropdown-item btn-sm" type="button">\n\t\t\t\t\t\t<i class="fa fa-fw fa-pencil" aria-hidden="true"></i> Change name\n\t\t\t\t\t</button>\n\t\t\t\t\t<button v-if="room.isOwner && !user.isOwner" @click.prevent="kickOut(user.id)" class="dropdown-item btn-sm" type="button">\n\t\t\t\t\t\t<i class="fa fa-fw fa-sign-out" aria-hidden="true"></i> Kick from room\n\t\t\t\t\t</button>\n\t\t\t\t\t<button v-if="user.isSelf || room.isOwner && !user.isOwner" @click.prevent="toggleUserHasVote(user.id, !user.hasVote)" class="dropdown-item btn-sm" type="button">\n\t\t\t\t\t\t<i class="fa fa-fw" :class="{\'fa-toggle-on\': !user.hasVote, \'fa-toggle-off\': user.hasVote}" aria-hidden="true"></i> Spectator mode\n\t\t\t\t\t</button>\n\t\t\t\t\t<button v-if="!user.isSelf && room.isOwner" @click.prevent="transferTheRoom(user.id)" class="dropdown-item btn-sm" type="button">\n\t\t\t\t\t\t<i class="fa fa-fw fa-arrow-circle-o-right" aria-hidden="true"></i> Transfer the room\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</span>\n\n\t\t<form v-if="user.isSelf && changeNameSwitcher" @submit.prevent="saveName">\n\t\t\t<text-error :text="changeNameErrorText"></text-error>\n\t\t\t<div class="input-group">\n\t\t\t\t<input type="text" v-model="name" class="form-control" placeholder="Enter your name">\n\t\t\t\t<div class="input-group-append">\n\t\t\t\t\t<button type="submit" class="btn btn-secondary">Save</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</form>\n\t</li>\n</template>\n\n<script>\n\timport VueMarkdown from \'vue-markdown\';\n\timport TextError from \'@/js/components/TextError\';\n\n\texport default {\n\t\tprops: [\'socket\', \'user\', \'room\'],\n\n\t\tcomponents: {\n\t\t\tVueMarkdown,\n\t\t\tTextError,\n\t\t},\n\n\t\tdata: () => ({\n\t\t\tname: \'\',\n\t\t\tchangeNameSwitcher: false,\n\t\t\tchangeNameErrorText: null,\n\t\t}),\n\n\t\tmounted: function() {\n\t\t\tif (localStorage.name) {\n\t\t\t\tthis.name = localStorage.name;\n\t\t\t}\n\t\t},\n\n\t\tmethods: {\n\t\t\tchangeName() {\n\t\t\t\tthis.changeNameSwitcher = true;\n\t\t\t},\n\n\t\t\tsaveName() {\n\t\t\t\tif (this.name === \'\') {\n\t\t\t\t\tthis.changeNameErrorText = \'Empty name.\';\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tlocalStorage.name = this.name;\n\t\t\t\tthis.changeNameSwitcher = false;\n\n\t\t\t\tthis.socket.send({\n\t\t\t\t\t\'action\': \'room.user.changeName\',\n\t\t\t\t\t\'name\': this.name,\n\t\t\t\t\t\'room\': this.room.hash,\n\t\t\t\t});\n\n\t\t\t\tthis.changeNameErrorText = null;\n\t\t\t},\n\n\t\t\tchangeNameSwitcherForSelf(id) {\n\t\t\t\treturn this.user.isSelf && this.changeNameSwitcher;\n\t\t\t},\n\n\t\t\tkickOut(client_id) {\n\t\t\t\tif (confirm("Kick out this user?")) {\n\t\t\t\t\tthis.socket.send({\n\t\t\t\t\t\t\'action\': \'room.user.kick\',\n\t\t\t\t\t\t\'id\': client_id,\n\t\t\t\t\t\t\'room\': this.room.hash,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\n\t\t\ttoggleUserHasVote(client_id, value) {\n\t\t\t\tthis.socket.send({\n\t\t\t\t\t\'action\': \'room.user.toggle.hasVote\',\n\t\t\t\t\t\'id\': client_id,\n\t\t\t\t\t\'value\': value,\n\t\t\t\t\t\'room\': this.room.hash,\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tasync transferTheRoom(client_id) {\n\t\t\t\tif (confirm("Transfer the room other user?")) {\n\t\t\t\t\tlet data = await this.socket.request(\'room.update\', {\n\t\t\t\t\t\tid: this.room.id,\n\t\t\t\t\t\towner: this.$root.getUser(),\n\t\t\t\t\t\towner_client_id: client_id,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t}\n<\/script>\n\n<style scoped>\n\t.panel-buttons {\n\t\talign-items: flex-start;\n\t}\n\n\t.pointer {\n\t\tcursor: pointer;\n\t}\n\n\t.user-control {\n\t\tfont-size: 100%;\n\t}\n\n\t.empty-card {\n\t\ttext-align: center;\n\t\twidth: 22px;\n\t\theight: 24px;\n\t\tcolor: #007bff;\n\t\tbackground-color: #007bff;\n\t\tborder-radius: .25rem;\n\t\tdisplay: inline-block;\n\t\tvertical-align: baseline;\n\t\twhite-space: nowrap;\n\t}\n\n\t.disconnected {\n\t\topacity: 0.5;\n\t}\n</style>\n'],sourceRoot:""}]);const i=a},501:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var s=n(7897),o=n.n(s),r=n(1519),a=n.n(r)()(o());a.push([t.id,".list-group-item[data-v-305e101a]{padding:10px}.fade-enter-active[data-v-305e101a]{transition:all .5s}.fade-enter[data-v-305e101a],.fade-leave-to[data-v-305e101a]{opacity:0}","",{version:3,sources:["webpack://./resources/js/components/UsersList.vue"],names:[],mappings:"AA6HA,kCACA,YACA,CAEA,oCACA,kBACA,CACA,6DACA,SACA",sourcesContent:["<template>\n\t<transition name=\"fade\">\n\t\t<div v-if=\"users.length\">\n\t\t\t<h4 class=\"d-flex justify-content-between align-items-center mb-2\">\n\t\t\t\t<span class=\"text-muted\">Users</span>\n\t\t\t\t<span class=\"badge badge-secondary\">{{users.length}}</span>\n\t\t\t</h4>\n\t\t\t<ul class=\"list-group mb-3\">\n\t\t\t\t<user v-for=\"user in sortedUsers\" :key=\"user.id\" :socket=\"socket\" :user=\"user\" :room=\"room\"></user>\n\n\t\t\t\t<li v-if=\"average !== null && average != 0\" class=\"list-group-item d-flex justify-content-between\">\n\t\t\t\t\t<span>Average</span>\n\t\t\t\t\t<strong>{{average}}</strong>\n\t\t\t\t</li>\n\n\t\t\t\t<li v-if=\"chart\" class=\"list-group-item d-flex justify-content-between\">\n\t\t\t\t\t<div style=\"width: 100%;\"><chart ref=\"chart\" :chartdata=\"chartData()\" :options=\"chartOptions\" /></div>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</transition>\n</template>\n\n<script>\n\timport Chart from '@/js/components/Chart';\n\timport User from '@/js/components/User';\n\n\texport default {\n\t\tprops: ['socket', 'users', 'room', 'average'],\n\n\t\tcomponents: {\n\t\t\tUser,\n\t\t\tChart,\n\t\t},\n\n\t\tdata: () => ({\n\t\t\tchart: false,\n\t\t\tcolors: ['#6574cd', '#e3342f', '#38c172', '#f6993f', '#9561e2', '#ffed4a', '#6cb2eb'],\n\t\t\tchartOptions: {\n\t\t\t\tlegend: {\n\t\t\t\t\t'position': 'bottom',\n\t\t\t\t},\n\t\t\t},\n\t\t}),\n\n\t\tmounted: function() {\n\t\t\t\n\t\t},\n\n\t\tmethods: {\n\t\t\tchartData() {\n\t\t\t\tlet list = [],\n\t\t\t\t\tcount = [];\n\n\t\t\t\tfor (var i = 0; i < this.users.length; i++) {\n\t\t\t\t\tif (this.users[i]['hasVote']) {\n\t\t\t\t\t\tlet k = list.indexOf(this.users[i].voteView);\n\t\t\t\t\t\tif (k === -1) {\n\t\t\t\t\t\t\tk = list.length;\n\t\t\t\t\t\t\tlist[k] = this.users[i].voteView;\n\t\t\t\t\t\t\tcount[k] = 1;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcount[k]++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tlabels: list,\n\t\t\t\t\tdatasets: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: '',\n\t\t\t\t\t\t\tbackgroundColor: this.colors,\n\t\t\t\t\t\t\tdata: count,\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t};\n\t\t\t},\n\t\t},\n\n\t\tcomputed: {\n\t\t\tsortedUsers() {\n\t\t\t\treturn this.users.sort((a, b) => {\n\t\t\t\t\tif (a.isOwner && !b.isOwner) return -1;\n\t\t\t\t\tif (!a.isOwner && b.isOwner) return 1;\n\n\t\t\t\t\tif (a.hasVote && !b.hasVote) return -1;\n\t\t\t\t\tif (!a.hasVote && b.hasVote) return 1;\n\n\t\t\t\t\tif (a.name == '' && !b.name == '') return 1;\n\t\t\t\t\tif (!a.name == '' && b.name == '') return -1;\n\n\t\t\t\t\treturn a.name.localeCompare(b.name);\n\t\t\t\t});\n\t\t\t},\n\t\t},\n\n\t\twatch: {\n\t\t\taverage(value) {\n\t\t\t\tif (value !== null) {\n\t\t\t\t\tthis.chart = true;\n\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\tthis.$refs.chart.update();\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.chart = false;\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t}\n<\/script>\n\n<style scoped>\n\t.list-group-item {\n\t\tpadding: 10px;\n\t}\n\n\t.fade-enter-active {\n\t\ttransition: all .5s;\n\t}\n\t.fade-enter, .fade-leave-to {\n\t\topacity: 0;\n\t}\n</style>\n"],sourceRoot:""}]);const i=a},9130:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var s=n(7897),o=n.n(s),r=n(1519),a=n.n(r)()(o());a.push([t.id,'blockquote{background:#f9f9f9;border-left:10px solid #ccc;margin:1.5em 10px;padding:1em 10px .1em;quotes:"\\201C""\\201D""\\2018""\\2019"}',"",{version:3,sources:["webpack://./resources/js/pages/About.vue"],names:[],mappings:"AA4DA,WACA,kBAAA,CACA,2BAAA,CACA,iBAAA,CACA,qBAAA,CACA,mCACA",sourcesContent:["<template>\n\t<vue-markdown\n\t\t:html=\"true\"\n\t\t:anchorAttributes=\"anchorAttributes\"\n\t\t:source=\"`##### About\n\nThis site has been designed to carry out poker planning within the team. The goal was to develop a user-friendly online scheduling tool so that participants can vote from both a PC and a mobile device. As a result, this project can be used for planning poker online and offline, via mobile devices.\n\n> Planning poker, also called Scrum poker, is a consensus-based, gamified technique for estimating, mostly used for timeboxing in Agile principles. In planning poker, members of the group make estimates by playing numbered cards face-down to the table, instead of speaking them aloud. The cards are revealed, and the estimates are then discussed. By hiding the figures in this way, the group can avoid the cognitive bias of anchoring, where the first number spoken aloud sets a precedent for subsequent estimates.\n>\n> Planning poker is a variation of the Wideband delphi method. It is most commonly used in agile software development, in particular in Scrum and Extreme Programming.\n>\n> The method was first defined and named by James Grenning in 2002 and later popularized by Mike Cohn in the book Agile Estimating and Planning, whose company trade marked the term and a digital online tool.\n>\n>@wikipedia.org`\"\n\t></vue-markdown>\n</template>\n\n<script>\n\timport VueMarkdown from 'vue-markdown';\n\n\timport Prism from 'prismjs';\n\timport 'prismjs/themes/prism.css';\n\n\timport 'prismjs/components/prism-markup-templating.js';\n\timport 'prismjs/components/prism-php';\n\timport 'prismjs/components/prism-bash';\n\n\texport default {\n\t\tprops: ['socket'],\n\n\t\tmounted() {\n\t\t\tthis.$root.setTitle();\n\t\t},\n\n\t\tcomponents: {\n\t\t\tVueMarkdown,\n\t\t},\n\n\t\tcomputed: {\n\t\t\tanchorAttributes() {\n\t\t\t\treturn {\n\t\t\t\t\ttarget: 'blank',\n\t\t\t\t\trel: 'nofollow',\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t}\n<\/script>\n\n<style scope>\n\tblockquote {\n\t\tbackground: #f9f9f9;\n\t\tborder-left: 10px solid #ccc;\n\t\tmargin: 1.5em 10px;\n\t\tpadding: 1em 10px 0.1em 10px;\n\t\tquotes: \"\\201C\"\"\\201D\"\"\\2018\"\"\\2019\";\n\t}\n</style>\n"],sourceRoot:""}]);const i=a},2471:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var s=n(7897),o=n.n(s),r=n(1519),a=n.n(r)()(o());a.push([t.id,".wn-button[data-v-66c922b2]{cursor:pointer}","",{version:3,sources:["webpack://./resources/js/pages/Home.vue"],names:[],mappings:"AAkSA,4BACA,cACA",sourcesContent:['<template>\n\t<div class="row">\n\t\t<div class="col-md-8 order-md-1">\n\t\t\t<h4 class="mb-3">Your rooms</h4>\n\t\t\t<form @submit.prevent="createRoom" class="mb-4">\n\t\t\t\t<text-error :text="roomErrorText"></text-error>\n\t\t\t\t<div class="input-group">\n\t\t\t\t\t<input type="text" v-model="nameNewRoom" class="form-control" placeholder="Enter the name of the new room">\n\t\t\t\t\t<div class="input-group-append">\n\t\t\t\t\t\t<button type="submit" class="btn btn-primary">Create room</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<small class="text-muted">\n\t\t\t\t\tThis site is protected by reCAPTCHA and the Google\n\t\t\t\t\t\t<a href="https://policies.google.com/privacy" rel="nofollow" target="_blank">Privacy Policy</a> and\n\t\t\t\t\t\t<a href="https://policies.google.com/terms" rel="nofollow" target="_blank">Terms of Service</a> apply.\n\t\t\t\t</small>\n\t\t\t</form>\n\n\t\t\t<ul v-if="rooms.length > 0" class="list-group mb-3">\n\t\t\t\t<li v-for="room in rooms" class="list-group-item d-flex justify-content-between lh-condensed">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<router-link link :to="{name: \'room\', params: {hash: room.hash}}" style="cursor: pointer;">\n\t\t\t\t\t\t\t<h6 class="my-0">{{room.name}}</h6>\n\t\t\t\t\t\t</router-link>\n\t\t\t\t\t\t<small class="text-muted">\n\t\t\t\t\t\t\tSet: {{ room.cardset ? room.cardset.name : \'Default\' }} &bull;\n\t\t\t\t\t\t\tUpdated at <timer :created="room.updated_at"></timer></small>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<span class="badge wn-button" @click="setPassword(room.id)" title="Set password">\n\t\t\t\t\t\t\t<i class="fa fa-fw" :class="{\'fa-unlock\': !room.hasPassword, \'fa-lock\': room.hasPassword}" aria-hidden="true"></i>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class="badge wn-button" @click="cloneRoom(room.id, room.name)" title="Clone the room">\n\t\t\t\t\t\t\t<i class="fa fa-fw fa-clone" aria-hidden="true"></i>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class="badge wn-button" @click="deleteRoom(room.id)" title="Delete the room">\n\t\t\t\t\t\t\t<i class="fa fa-fw fa-trash-o" aria-hidden="true"></i>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class="col-md-4 order-md-2 mb-4">\n\t\t\t<h4 class="d-flex justify-content-between align-items-center mb-3">Your name</h4>\n\n\t\t\t<form @submit.prevent="saveName" class="mb-4">\n\t\t\t\t<text-error :text="changeNameErrorText"></text-error>\n\t\t\t\t<div class="input-group">\n\t\t\t\t\t<input type="text" v-model="name" class="form-control" placeholder="Enter your name">\n\t\t\t\t\t<div class="input-group-append">\n\t\t\t\t\t\t<button type="submit" class="btn btn-secondary">Save</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</form>\n\n\t\t\t<h4 class="d-flex justify-content-between align-items-center mb-3">Your secret UUID</h4>\n\t\t\t<div class="input-group mb-3">\n\t\t\t\t<input :type="uidVisibility ? \'text\' : \'password\'" @focus="$event.target.select()" :value="$root.getUser()" readonly class="form-control">\n\t\t\t\t<div class="input-group-append">\n\t\t\t\t\t<button @click="uidVisibility = !uidVisibility" type="button" class="btn btn-outline-secondary">\n\t\t\t\t\t\t<i class="fa" :class="{\'fa-eye\': !uidVisibility, \'fa-eye-slash\': uidVisibility}" aria-hidden="true"></i>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button @click="changeUid" type="button" class="btn btn-outline-secondary">\n\t\t\t\t\t\t<i class="fa fa-pencil-square-o" aria-hidden="true"></i>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button @click="copyUid" type="button" class="btn btn-outline-secondary">Copy</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="mb-4">\n\t\t\t\t<p>This is your unique user ID. Your rooms are tied to it and your owner rights are determined by it.</p>\n\t\t\t\t<p>You can copy and paste it on your other devices so you can access your rooms from all your devices.</p>\n\t\t\t\t<p>Do not share this code with other people.</p>\n\t\t\t</div>\n\n\t\t\t<h4 v-if="visitHistory.length > 0" class="d-flex justify-content-between align-items-center mb-3">Visit history</h4>\n\t\t\t<div v-if="visitHistory.length > 0">\n\t\t\t\t<div v-for="room in visitHistory">\n\t\t\t\t\t<router-link link :to="{name: \'room\', params: {hash: room.hash}}" style="cursor: pointer;">\n\t\t\t\t\t\t<h6 class="my-0">{{room.name}}</h6>\n\t\t\t\t\t</router-link>\n\t\t\t\t\t<hr>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\timport Timer from \'@/js/components/Timer\';\n\timport Socket from \'@/js/modules/Socket\';\n\timport TextError from \'@/js/components/TextError\';\n\timport { validate as uuidValidate } from \'uuid\';\n\timport { load as recaptchaLoad } from \'recaptcha-v3\';\n\n\texport default {\n\t\tprops: [\'socket\'],\n\n\t\tcomponents: {\n\t\t\tTimer,\n\t\t\tTextError,\n\t\t},\n\n\t\tdata: () => ({\n\t\t\trooms: [],\n\t\t\tvisitHistory: [],\n\t\t\tname: \'\',\n\t\t\troomErrorText: null,\n\t\t\tchangeNameErrorText: null,\n\t\t\tnameNewRoom: \'\',\n\t\t\tloading: false,\n\t\t\tuidVisibility: false,\n\t\t}),\n\n\t\tcreated: function() {\n\t\t\tif (localStorage.name) {\n\t\t\t\tthis.name = localStorage.name;\n\t\t\t}\n\n\t\t\tif (localStorage.rooms) {\n\t\t\t\tthis.rooms = JSON.parse(localStorage.rooms);\n\t\t\t}\n\n\t\t\tif (localStorage.visitHistory) {\n\t\t\t\tthis.visitHistory = JSON.parse(localStorage.visitHistory);\n\t\t\t}\n\n\t\t\tthis.roomsUpdate();\n\t\t},\n\n\t\tmounted: function() {\n\t\t\tif(this.$route.query.kicked) {\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tconsole.log(\'Kicked you out.\');\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.$root.setTitle();\n\t\t},\n\n\t\tmethods: {\n\t\t\troomsUpdate() {\n\t\t\t\tlet promise = this.socket.request(\'room.get\', {\n\t\t\t\t\towner: this.$root.getUser(),\n\t\t\t\t}).then((result) => {\n\t\t\t\t\tthis.rooms = result.data;\n\t\t\t\t\tlocalStorage.rooms = JSON.stringify(this.rooms);\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tsaveName() {\n\t\t\t\tif (this.name === \'\') {\n\t\t\t\t\tthis.changeNameErrorText = \'Empty name.\';\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tlocalStorage.name = this.name;\n\t\t\t\tthis.changeNameErrorText = null;\n\t\t\t},\n\n\t\t\tasync captchaVerify(action) {\n\t\t\t\tconst recaptcha = await recaptchaLoad(\'6LeVSDIfAAAAABxjfI8yEzoalSQ5iNa1TTobtx8j\');\n\t\t\t\tconst token = await recaptcha.execute(\'room/create\');\n\t\t\t\t\n\t\t\t\tlet verify = await this.socket.request(\'captcha.verify\', {\n\t\t\t\t\taction: action,\n\t\t\t\t\ttoken: token,\n\t\t\t\t});\n\n\t\t\t\treturn verify.data.success;\n\t\t\t},\n\n\t\t\tasync createRoom() {\n\t\t\t\tif (this.nameNewRoom === \'\') {\n\t\t\t\t\tthis.roomErrorText = \'Empty name.\';\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (!this.captchaVerify(\'room/create\')) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tlet promise = this.socket.request(\'room.create\', {\n\t\t\t\t\tname: this.nameNewRoom,\n\t\t\t\t\towner: this.$root.getUser(),\n\t\t\t\t}).then((result) => {\n\t\t\t\t\tthis.rooms.unshift(result.data);\n\t\t\t\t\tlocalStorage.rooms = JSON.stringify(this.rooms);\n\t\t\t\t\tthis.nameNewRoom = \'\';\n\t\t\t\t});\n\n\t\t\t\tthis.roomErrorText = null;\n\t\t\t},\n\n\t\t\tasync cloneRoom(id, cloneName) {\n\t\t\t\tlet name = prompt(`Enter the new room name`, cloneName);\n\n\t\t\t\tif (name === \'\') {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (!this.captchaVerify(\'room/create\')) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tlet promise = this.socket.request(\'room.create\', {\n\t\t\t\t\tname: name,\n\t\t\t\t\towner: this.$root.getUser(),\n\t\t\t\t\tclone: id,\n\t\t\t\t}).then((result) => {\n\t\t\t\t\tthis.rooms.unshift(result.data);\n\t\t\t\t\tlocalStorage.rooms = JSON.stringify(this.rooms);\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tdeleteRoom(id) {\n\t\t\t\tif (confirm("Delete room?")) {\n\t\t\t\t\tlet promise = this.socket.request(\'room.delete\', {\n\t\t\t\t\t\tid: id,\n\t\t\t\t\t\towner: this.$root.getUser(),\n\t\t\t\t\t}).then((result) => {\n\t\t\t\t\t\tfor (var i = 0; i < this.rooms.length; i++) {\n\t\t\t\t\t\t\tif (this.rooms[i].id == id) {\n\t\t\t\t\t\t\t\tthis.rooms.splice(i, 1);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlocalStorage.rooms = JSON.stringify(this.rooms);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\tsetPassword(id) {\n\t\t\t\tlet password = prompt(`Enter the password for the room. Empty password will unlock the room.`);\n\n\t\t\t\tif (password !== null) {\n\t\t\t\t\tlet promise = this.socket.request(\'room.update\', {\n\t\t\t\t\t\tid: id,\n\t\t\t\t\t\towner: this.$root.getUser(),\n\t\t\t\t\t\tpassword: password,\n\t\t\t\t\t})\n\t\t\t\t\t\t.then((result) => {\n\t\t\t\t\t\t\tfor (var i = 0; i < this.rooms.length; i++) {\n\t\t\t\t\t\t\t\tif (this.rooms[i].id == result.data.id) {\n\t\t\t\t\t\t\t\t\tthis.rooms.splice(i, 1, result.data);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlocalStorage.rooms = JSON.stringify(this.rooms);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcopyUid() {\n\t\t\t\tglobal.navigator.clipboard.writeText(this.$root.getUser());\n\t\t\t},\n\n\t\t\tchangeUid() {\n\t\t\t\tlet uid = prompt(`Enter UID`);\n\n\t\t\t\tif (uid === null || uid === \'\') {\n\t\t\t\t\treturn alert(\'Empty UID.\');\n\t\t\t\t}\n\n\t\t\t\tif (!uuidValidate(uid)) {\n\t\t\t\t\treturn alert(\'Not a valid UID.\');\n\t\t\t\t}\n\n\t\t\t\tif (confirm(\'Are you confident? All your current data will be rebound to the new UID.\')) {\n\t\t\t\t\tlet promise = this.socket.request(\'room.rebind\', {\n\t\t\t\t\t\towner: this.$root.getUser(),\n\t\t\t\t\t\tnew_uid: uid,\n\t\t\t\t\t}).then((result) => {\n\t\t\t\t\t\tif (result.data) {\n\t\t\t\t\t\t\tthis.$cookies.set(\'uid\', uid, 10000000*60);\n\t\t\t\t\t\t\tthis.roomsUpdate();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t}\n<\/script>\n\n<style scoped>\n\t.wn-button {\n\t\tcursor: pointer;\n\t}\n</style>\n'],sourceRoot:""}]);const i=a},5212:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var s=n(7897),o=n.n(s),r=n(1519),a=n.n(r)()(o());a.push([t.id,".fade-enter-active[data-v-f97f44d2],.fade-leave-active[data-v-f97f44d2]{transition:all .5s}.fade-enter[data-v-f97f44d2],.fade-leave-to[data-v-f97f44d2]{opacity:0}.wn-button[data-v-f97f44d2]{cursor:pointer}","",{version:3,sources:["webpack://./resources/js/pages/Room.vue"],names:[],mappings:"AAknBA,wEACA,kBACA,CACA,6DACA,SACA,CACA,4BACA,cACA",sourcesContent:['<template>\n\t<div class="row">\n\t\t<div class="col-md-4 order-md-2 mb-4" style="position: inherit;">\n\t\t\t<users-list :socket="socket" :users="users" :room="room" :average="average"></users-list>\n\n\t\t\t<chat :socket="socket" :room="room"></chat>\n\t\t</div>\n\t\t<div class="col-md-8 order-md-1">\n\t\t\t<div class="d-flex justify-content-between align-items-center mb-3">\n\t\t\t\t<div class="d-flex justify-content-between align-items-center gap-2">\n\t\t\t\t\t<h4 v-if="!changeRoomNameSwitcher">{{room.name}}</h4>\n\t\t\t\t\t<form v-if="room.isOwner && changeRoomNameSwitcher" @submit.prevent="saveRoomName">\n\t\t\t\t\t\t<text-error :text="changeRoomNameErrorText"></text-error>\n\t\t\t\t\t\t<div class="input-group">\n\t\t\t\t\t\t\t<input type="text" v-model="room.name" class="form-control" placeholder="Enter room name">\n\t\t\t\t\t\t\t<div class="input-group-append">\n\t\t\t\t\t\t\t\t<button type="submit" class="btn btn-secondary">Save</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\n\t\t\t\t\t<span\n\t\t\t\t\t\tv-if="room.name !== \'\' && room.isOwner && !changeRoomNameSwitcher"\n\t\t\t\t\t\tclass="badge bg-secondary-subtle text-secondary-emphasis"\n\t\t\t\t\t\t@click="editRoomName"\n\t\t\t\t\t\tdata-bs-toggle="modal" data-bs-target="#passwordModal"\n\t\t\t\t\t\ttitle="Edit room\'s name"\n\t\t\t\t\t\trole="button"\n\t\t\t\t\t>\n\t\t\t\t\t\t<i class="fa fa-fw fa-pencil" aria-hidden="true"></i>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span v-if="room.name !== \'\' && room.isOwner && !changeRoomNameSwitcher" class="badge bg-secondary-subtle text-secondary-emphasis" role="button" @click="setPassword" title="Set password">\n\t\t\t\t\t\t<i class="fa fa-fw" :class="{\'fa-unlock\': !room.hasPassword, \'fa-lock\': room.hasPassword}" aria-hidden="true"></i>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span v-if="room.name !== \'\' && !room.isOwner" class="badge bg-secondary-subtle text-secondary-emphasis" role="button">\n\t\t\t\t\t\t<i class="fa" :class="{\'fa-unlock\': !room.hasPassword, \'fa-lock\': room.hasPassword}" aria-hidden="true"></i>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span v-if="room.name !== \'\' && !changeRoomNameSwitcher" class="badge bg-secondary-subtle text-secondary-emphasis" role="button" data-bs-toggle="modal" data-bs-target="#qrcodeModal">\n\t\t\t\t\t\t<i class="fa fa-fw fa-share" aria-hidden="true"></i>\n\t\t\t\t\t</span>\n\n\n\t\t\t\t\t<div class="modal fade" id="passwordModal" tabindex="-1" aria-labelledby="passwordModalLabel" aria-hidden="true">\n\t\t\t\t\t\t<div class="modal-dialog">\n\t\t\t\t\t\t\t<div class="modal-content">\n\t\t\t\t\t\t\t\t<div class="modal-header">\n\t\t\t\t\t\t\t\t\t<h1 class="modal-title fs-5" id="passwordModalLabel">New message</h1>\n\t\t\t\t\t\t\t\t\t<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="modal-body">\n\t\t\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t\t\t<div class="mb-3">\n\t\t\t\t\t\t\t\t\t\t\t<label for="recipient-name" class="col-form-label">Recipient:</label>\n\t\t\t\t\t\t\t\t\t\t\t<input type="text" class="form-control" id="recipient-name">\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="mb-3">\n\t\t\t\t\t\t\t\t\t\t\t<label for="message-text" class="col-form-label">Message:</label>\n\t\t\t\t\t\t\t\t\t\t\t<textarea class="form-control" id="message-text"></textarea>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="modal-footer">\n\t\t\t\t\t\t\t\t\t<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>\n\t\t\t\t\t\t\t\t\t<button type="button" class="btn btn-primary">Save</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t\x3c!-- Modal --\x3e\n\t\t\t\t\t<div class="modal fade" id="qrcodeModal" tabindex="-1" aria-labelledby="qrcodeModalLabel" aria-hidden="true">\n\t\t\t\t\t\t<div class="modal-dialog">\n\t\t\t\t\t\t\t<div class="modal-content">\n\t\t\t\t\t\t\t\t<div class="modal-header">\n\t\t\t\t\t\t\t\t\t<h1 class="modal-title fs-5" id="qrcodeModalLabel">Share QR Code</h1>\n\t\t\t\t\t\t\t\t\t<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="modal-body" style="text-align: center;">\n\t\t\t\t\t\t\t\t\t<qrcode-vue :value="fullPageUrl" :size="300" level="H" />\n\t\t\t\t\t\t\t\t\t<a :href="fullPageUrl">{{ fullPageUrl }}</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="modal-footer">\n\t\t\t\t\t\t\t\t\t<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\t\t\t\t<span v-show="room.name !== \'\'" class="badge bg-secondary-subtle text-secondary-emphasis"><stopwatch ref="stopwatch"></stopwatch></span>\n\t\t\t</div>\n\n\t\t\t<cards ref="cards" :socket="socket" :canVote="canVote" :room="room" :users="users"></cards>\n\n\t\t\t<transition name="fade">\n\t\t\t\t<div v-if="room.isOwner" class="row ml-0">\n\t\t\t\t\t<div class="d-flex gap-2">\n\t\t\t\t\t\t<button v-if="stage === 0" class="btn mr-3 col-md-3 mb-3 btn-primary" @click="startVote">Start vote</button>\n\t\t\t\t\t\t<button v-if="stage === 1 || stage === 2" class="btn mr-3 mb-3 col-md-3 btn-primary" @click="resetVote">Reset</button>\n\t\t\t\t\t\t<button v-if="canSkipButton" class="btn mr-3 mb-3 col-md-3 btn-primary" @click="skipVote">Skip</button>\n\t\t\t\t\t\t<button v-if="canReVoteButton" class="btn mr-3 col-md-3 mb-3 btn-primary" @click="revote">Revote</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</transition>\n\n\t\t\t<transition name="fade">\n\t\t\t\t<div v-if="room.task" class="row ml-0 mr-0 mt-3 mb-3 pt-0">\n\t\t\t\t\t<h4 class="d-flex justify-content-between align-items-center mb-3">\n\t\t\t\t\t\t<span>Сurrent task</span>\n\t\t\t\t\t</h4>\n\n\t\t\t\t\t<div class="mb-2 col-12">\n\t\t\t\t\t\t<vue-markdown\n\t\t\t\t\t\t\t:html="false"\n\t\t\t\t\t\t\t:anchorAttributes="anchorAttributes"\n\t\t\t\t\t\t\t:source="room.task.text"\n\t\t\t\t\t\t\tclass="alert alert-success mb-0 p-2"\n\t\t\t\t\t\t></vue-markdown>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</transition>\n\n\t\t\t<task-list ref="tasksList" :socket="socket" :room="room" @approve="onApprove"></task-list>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\timport Stopwatch from \'@/js/components/Stopwatch\';\n\timport Chat from \'@/js/components/Chat\';\n\timport TaskList from \'@/js/components/TaskList\';\n\timport Cards from \'@/js/components/Cards\';\n\timport UsersList from \'@/js/components/UsersList\';\n\timport TextError from \'@/js/components/TextError\';\n\timport VueMarkdown from \'vue-markdown\';\n\timport QrcodeVue from \'qrcode.vue\'\n\n\texport default {\n\t\tprops: [\'socket\', \'hash\'],\n\n\t\tcomponents: {\n\t\t\tStopwatch,\n\t\t\tChat,\n\t\t\tTaskList,\n\t\t\tCards,\n\t\t\tUsersList,\n\t\t\tTextError,\n\t\t\tVueMarkdown,\n\t\t\tQrcodeVue,\n\t\t},\n\n\t\tdata: () => ({\n\t\t\tname: \'\',\n\t\t\troom: {\n\t\t\t\tid: null,\n\t\t\t\tname: \'\',\n\t\t\t\thash: null,\n\t\t\t\ttask: null,\n\t\t\t\tclientId: null,\n\t\t\t\tisOwner: false,\n\t\t\t\thasPassword: false,\n\t\t\t\tcardset: null,\n\t\t\t},\n\t\t\tusers: [],\n\t\t\tstage: 0,\n\t\t\taverage: null,\n\t\t\tcanVote: false,\n\t\t\tsoundStart: null,\n\t\t\tsoundFinal: null,\n\t\t\tenterCountWrongPassword: 0,\n\t\t\tchangeRoomNameSwitcher: false,\n\t\t\tchangeRoomNameErrorText: null,\n\t\t}),\n\n\t\tcreated() {\n\t\t\tthis.room.hash = this.hash;\n\n\t\t\tif (localStorage.name) {\n\t\t\t\tthis.name = localStorage.name;\n\t\t\t}\n\n\t\t\tthis.socket.onOpen(this.enterRoom);\n\n\t\t\tthis.soundStart = new Audio(\'../sounds/all-eyes-on-me.mp3\');\n\t\t\tthis.soundStart.volume = 0.1;\n\t\t\tthis.soundFinal = new Audio(\'../sounds/rhodesmas.mp3\');\n\t\t\tthis.soundFinal.volume = 0.1;\n\t\t},\n\n\t\tdestroyed() {\n\t\t\tthis.socket.offOpen(this.enterRoom);\n\t\t\tthis.socket.offGroup(\'room\');\n\t\t},\n\n\t\tbeforeRouteUpdate(to, from, next) {\n\t\t\tthis.enterRoom();\n\t\t\tnext();\n\t\t},\n\n\t\tbeforeRouteLeave(to, from, next) {\n\t\t\tthis.leaveRoom();\n\t\t\tnext();\n\t\t},\n\n\t\tmounted: function() {\n\t\t\tthis.socket.group(\'room\');\n\n\t\t\tthis.socket.listener(\'room.entered.user\', (data) => {\n\t\t\t\tthis.users.push({\n\t\t\t\t\tid: data.id,\n\t\t\t\t\tname: data.name,\n\t\t\t\t\tisOwner: data.isOwner,\n\t\t\t\t\thasVote: data.hasVote,\n\t\t\t\t\tactive: true,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.socket.listener(\'room.left.user\', (data) => {\n\t\t\t\tfor (var i = 0; i < this.users.length; i++) {\n\t\t\t\t\tif (this.users[i].id === data.id) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.users.splice(i, 1);\n\t\t\t});\n\n\t\t\tthis.socket.listener(\'room.parameters\', (data) => {\n\t\t\t\tthis.room.id = data.id;\n\t\t\t\tthis.room.name = data.name;\n\t\t\t\tthis.room.isOwner = data.isOwner;\n\t\t\t\tthis.room.clientId = data.client_id;\n\t\t\t\tthis.room.task = data.task;\n\t\t\t\tthis.room.hasPassword = data.hasPassword;\n\t\t\t\tthis.room.cardset = data.cardset || {name: \'Default\'};\n\t\t\t\tthis.hasVote = data.hasVote;\n\t\t\t\tthis.stage = data.stage;\n\n\t\t\t\tthis.$refs.stopwatch.clearAll();\n\t\t\t\tthis.$refs.stopwatch.startTimer(Date.now() - data.time*1000);\n\n\t\t\t\tthis.$root.setTitle(this.room.name);\n\t\t\t\tthis.setUsers(data.users);\n\t\t\t\tthis.saveVisitHistory();\n\t\t\t});\n\n\t\t\tthis.socket.listener(\'room.update\', (data) => {\n\t\t\t\tthis.room.name = data.name;\n\t\t\t\tthis.room.hasPassword = data.hasPassword;\n\t\t\t\tthis.room.cardset = data.cardset || {name: \'Default\'};\n\t\t\t\tthis.$root.setTitle(this.room.name);\n\t\t\t\tthis.room.isOwner = data.owner_client_id == this.room.clientId;\n\n\t\t\t\t// Изменение овнера\n\t\t\t\tfor (let i = 0; i < this.users.length; i++) {\n\t\t\t\t\tconst user = this.users[i];\n\t\t\t\t\tif (user.id == data.owner_client_id && !user.isOwner) {\n\t\t\t\t\t\tthis.users[i].isOwner = true;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (user.id != data.owner_client_id && user.isOwner) {\n\t\t\t\t\t\tthis.users[i].isOwner = false;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.socket.listener(\'room.user.changeName\', (data) => {\n\t\t\t\tfor (var i = 0; i < this.users.length; i++) {\n\t\t\t\t\tif (this.users[i].id === data.id) {\n\t\t\t\t\t\tthis.users[i].name = data.name;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (data.id === this.room.clientId) {\n\t\t\t\t\tthis.name = data.name;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.socket.listener(\'room.user.changeHasVote\', (data) => {\n\t\t\t\tfor (var i = 0; i < this.users.length; i++) {\n\t\t\t\t\tif (this.users[i].id === data.id) {\n\t\t\t\t\t\tthis.users[i].hasVote = data.hasVote;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (data.id === this.room.clientId) {\n\t\t\t\t\tthis.hasVote = data.hasVote;\n\t\t\t\t\tthis.changedStage();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.socket.listener(\'room.vote.start\', (data) => {\n\t\t\t\tthis.stage = data.stage;\n\t\t\t\tthis.room.task = data.task;\n\n\t\t\t\tthis.soundStart.pause();\n\t\t\t\tthis.soundStart.currentTime = 0;\n\t\t\t\tthis.soundStart.play();\n\t\t\t});\n\n\t\t\tthis.socket.listener(\'room.vote.revote\', (data) => {\n\t\t\t\tthis.stage = data.stage;\n\t\t\t\tthis.room.task = data.task;\n\n\t\t\t\tthis.average = null;\n\t\t\t\tfor (var i = 0; i < this.users.length; i++) {\n\t\t\t\t\tthis.$set(this.users[i], \'vote\', undefined);\n\t\t\t\t\tthis.$set(this.users[i], \'voteView\', undefined);\n\t\t\t\t\tthis.$set(this.users[i], \'isVoted\', false);\n\t\t\t\t}\n\n\t\t\t\tthis.soundStart.pause();\n\t\t\t\tthis.soundStart.currentTime = 0;\n\t\t\t\tthis.soundStart.play();\n\t\t\t});\n\n\t\t\tthis.socket.listener(\'room.vote\', (data) => {\n\t\t\t\tfor (var i = 0; i < this.users.length; i++) {\n\t\t\t\t\tif (this.users[i].id === data.id) {\n\t\t\t\t\t\tthis.$set(this.users[i], \'isVoted\', true);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.socket.listener(\'room.vote.you\', (data) => {\n\t\t\t\tfor (var i = 0; i < this.users.length; i++) {\n\t\t\t\t\tif (this.users[i].id === data.id) {\n\t\t\t\t\t\tthis.$set(this.users[i], \'vote\', data.vote);\n\t\t\t\t\t\tthis.$set(this.users[i], \'voteView\', data.voteView);\n\t\t\t\t\t\tthis.$set(this.users[i], \'isVoted\', true);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.socket.listener(\'room.kicked.you\', (data) => {\n\t\t\t\tthis.$router.push({name: \'home\', query: {kicked: true}});\n\t\t\t});\n\n\t\t\tthis.socket.listener(\'room.vote.final\', (data) => {\n\t\t\t\tif (this.stage !== 2) {\n\t\t\t\t\tthis.soundFinal.pause();\n\t\t\t\t\tthis.soundFinal.currentTime = 0;\n\t\t\t\t\tthis.soundFinal.play();\n\t\t\t\t}\n\n\t\t\t\tthis.canVote = false;\n\t\t\t\tthis.stage = 2;\n\n\t\t\t\tthis.setUsers(data.users);\n\t\t\t\tthis.average = this.getAverage();\n\n\t\t\t\tif (this.room.isOwner) {\n\t\t\t\t\tthis.$refs.cards.startApprove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.socket.listener(\'room.vote.reset\', (data) => {\n\t\t\t\tthis.stage = 0;\n\t\t\t\tthis.average = null;\n\t\t\t\tfor (var i = 0; i < this.users.length; i++) {\n\t\t\t\t\tthis.$set(this.users[i], \'vote\', undefined);\n\t\t\t\t\tthis.$set(this.users[i], \'voteView\', undefined);\n\t\t\t\t\tthis.$set(this.users[i], \'isVoted\', false);\n\t\t\t\t}\n\t\t\t\tthis.room.task = null;\n\t\t\t\tthis.$refs.stopwatch.clearAll();\n\t\t\t});\n\n\t\t\tthis.socket.listener(\'room.wait.password\', (data) => {\n\t\t\t\tif (data.wrong) {\n\t\t\t\t\tthis.enterCountWrongPassword++;\n\t\t\t\t}\n\n\t\t\t\tif (this.enterCountWrongPassword > 2) {\n\t\t\t\t\tthis.$router.push({name: \'home\'});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.$root.setTitle(data.name);\n\n\t\t\t\tlet password = prompt(`Enter the password for the room "${data.name}"`);\n\t\t\t\tif (password !== null && password.length !== 0) {\n\t\t\t\t\tthis.socket.send({\n\t\t\t\t\t\t\'action\': \'room.enter\',\n\t\t\t\t\t\t\'room\': this.hash,\n\t\t\t\t\t\t\'name\': this.name,\n\t\t\t\t\t\t\'uid\': this.$root.getUser(),\n\t\t\t\t\t\t\'password\': password,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.$router.push({name: \'home\'});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.socket.listener(\'room.user.disconnected\', (data) => {\n\t\t\t\tfor (var i = 0; i < this.users.length; i++) {\n\t\t\t\t\tif (this.users[i].id === data.id) {\n\t\t\t\t\t\tthis.users[i].active = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.socket.endGroup();\n\t\t},\n\n\t\tmethods: {\n\t\t\tonApprove() {\n\t\t\t\tthis.$refs.stopwatch.stopTimer();\n\t\t\t},\n\n\t\t\tenterRoom() {\n\t\t\t\tthis.socket.send({\n\t\t\t\t\t\'action\': \'room.enter\',\n\t\t\t\t\t\'room\': this.hash,\n\t\t\t\t\t\'name\': this.name,\n\t\t\t\t\t\'uid\': this.$root.getUser(),\n\t\t\t\t\t\'password\': \'\',\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tleaveRoom() {\n\t\t\t\tthis.socket.send({\n\t\t\t\t\t\'action\': \'room.leave\',\n\t\t\t\t\t\'room\': this.hash,\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tstartVote() {\n\t\t\t\tthis.socket.send({\n\t\t\t\t\t\'action\': \'room.vote.start\',\n\t\t\t\t\t\'room\': this.hash,\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tresetVote() {\n\t\t\t\tthis.socket.send({\n\t\t\t\t\t\'action\': \'room.vote.reset\',\n\t\t\t\t\t\'room\': this.hash,\n\t\t\t\t});\n\n\t\t\t\tthis.$refs.cards.stopApprove();\n\t\t\t},\n\n\t\t\tskipVote() {\n\t\t\t\tif (confirm(\'Skip the current task?\')) {\n\t\t\t\t\tthis.socket.send({\n\t\t\t\t\t\t\'action\': \'room.task.approve\',\n\t\t\t\t\t\t\'id\': this.room.task.id,\n\t\t\t\t\t\t\'point\': 0,\n\t\t\t\t\t\t\'view\': \'skipped\',\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.$refs.cards.stopApprove();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\trevote() {\n\t\t\t\tthis.socket.send({\n\t\t\t\t\t\'action\': \'room.vote.revote\',\n\t\t\t\t\t\'room\': this.hash,\n\t\t\t\t});\n\n\t\t\t\tthis.$refs.cards.stopApprove();\n\t\t\t},\n\n\t\t\tgetAverage() {\n\t\t\t\tlet amount = 0,\n\t\t\t\t\tcount = 0;\n\t\t\t\tfor (var i = 0; i < this.users.length; i++) {\n\t\t\t\t\tif (this.users[i][\'hasVote\'] && this.users[i][\'vote\'] != 0) {\n\t\t\t\t\t\tamount += parseFloat(this.users[i][\'vote\']);\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (count === 0) return 0;\n\n\t\t\t\treturn Math.round(amount/count*100) / 100;\n\t\t\t},\n\n\t\t\tsetUsers(users) {\n\t\t\t\tthis.users = users;\n\n\t\t\t\tfor (var i = 0; i < this.users.length; i++) {\n\t\t\t\t\tif (this.users[i].id === this.room.clientId) {\n\t\t\t\t\t\tthis.users[i].isSelf = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tsetPassword() {\n\t\t\t\tif (this.room.isOwner) {\n\t\t\t\t\tlet password = prompt(`Enter the password for the room. Empty password will unlock the room.`);\n\n\t\t\t\t\tif (password !== null) {\n\t\t\t\t\t\tlet promise = this.socket.request(\'room.update\', {\n\t\t\t\t\t\t\tid: this.room.id,\n\t\t\t\t\t\t\towner: this.$root.getUser(),\n\t\t\t\t\t\t\tpassword: password,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\teditRoomName() {\n\t\t\t\tif (this.room.isOwner) {\n\t\t\t\t\tthis.changeRoomNameSwitcher = true;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tsaveRoomName() {\n\t\t\t\tif (this.room.isOwner) {\n\t\t\t\t\tif (this.room.name === null || this.room.name.length === 0) {\n\t\t\t\t\t\tthis.changeRoomNameErrorText = \'Empty name.\';\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.changeRoomNameErrorText = null;\n\n\t\t\t\t\tlet promise = this.socket.request(\'room.update\', {\n\t\t\t\t\t\tid: this.room.id,\n\t\t\t\t\t\towner: this.$root.getUser(),\n\t\t\t\t\t\tname: this.room.name,\n\t\t\t\t\t}).then((result) => {\n\t\t\t\t\t\tthis.changeRoomNameSwitcher = false;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tchangedStage() {\n\t\t\t\tswitch(this.stage) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tthis.canVote = false;\n\t\t\t\t\t\tthis.$refs.stopwatch.stopTimer();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tif (this.hasVote) {\n\t\t\t\t\t\t\tthis.canVote = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.canVote = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!this.$refs.stopwatch.isRunning) {\n\t\t\t\t\t\t\tthis.$refs.stopwatch.startTimer();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tthis.canVote = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tsaveVisitHistory() {\n\t\t\t\tlet visitHistory = [];\n\t\t\t\tif (localStorage.visitHistory) {\n\t\t\t\t\tvisitHistory = JSON.parse(localStorage.visitHistory);\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0; i < visitHistory.length; i++) {\n\t\t\t\t\tif (visitHistory[i].hash === this.room.hash) {\n\t\t\t\t\t\tvisitHistory.splice(i, 1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvisitHistory.unshift({name: this.room.name, hash: this.room.hash});\n\t\t\t\tvisitHistory.splice(5);\n\t\t\t\tlocalStorage.visitHistory = JSON.stringify(visitHistory);\n\t\t\t},\n\t\t},\n\n\t\tcomputed: {\n\t\t\tcanNextButton() {\n\t\t\t\treturn this.stage === 2 && this.$refs.tasksList.haveUnratedTasks && !this.$refs.cards.approve;\n\t\t\t},\n\n\t\t\tcanSkipButton() {\n\t\t\t\treturn !this.canNextButton && this.room.task !== null && (this.stage === 1 || this.stage === 2);\n\t\t\t},\n\n\t\t\tcanReVoteButton() {\n\t\t\t\treturn this.stage === 2 && this.$refs.tasksList.haveUnratedTasks && this.$refs.cards.approve;\n\t\t\t},\n\t\t\tanchorAttributes() {\n\t\t\t\treturn {\n\t\t\t\t\ttarget: \'blank\',\n\t\t\t\t\trel: \'nofollow\',\n\t\t\t\t}\n\t\t\t},\n\t\t\tfullPageUrl() {\n\t\t\t\treturn global.location.href;\n\t\t\t}\n\t\t},\n\n\t\twatch: {\n\t\t\tstage() {\n\t\t\t\tthis.changedStage();\n\t\t\t},\n\t\t},\n\t}\n<\/script>\n\n<style scoped>\n\t.fade-enter-active {\n\t\ttransition: all .5s;\n\t}\n\t.fade-leave-active {\n\t\ttransition: all .5s;\n\t}\n\t.fade-enter, .fade-leave-to {\n\t\topacity: 0;\n\t}\n\t.wn-button {\n\t\tcursor: pointer;\n\t}\n</style>\n'],sourceRoot:""}]);const i=a},6609:()=>{},6700:(t,e,n)=>{var s={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6135,"./ar-kw.js":6135,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":7207,"./en-il.js":7207,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":5655,"./es-do":5251,"./es-do.js":5251,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":5655,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":5044,"./fy.js":5044,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":1793,"./ru.js":1793,"./sd":950,"./sd.js":950,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":9131,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":9131,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":5666,"./vi.js":5666,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-mo":9807,"./zh-mo.js":9807,"./zh-tw":4152,"./zh-tw.js":4152};function o(t){var e=r(t);return n(e)}function r(t){if(!n.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}o.keys=function(){return Object.keys(s)},o.resolve=r,t.exports=o,o.id=6700}},t=>{var e=e=>t(t.s=e);t.O(0,[170,898],(()=>(e(2134),e(6609))));t.O()}]);
//# sourceMappingURL=app.js.map